/*! jQuery v1.8.2 jquery.com | jquery.org/license */
(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0;}),b;}function J(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(I,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d;}catch(f){}p.data(a,c,d);}else{d=b;}}return d;}function K(a){var b;for(b in a){if(b==="data"&&p.isEmptyObject(a[b])){continue;}if(b!=="toJSON"){return !1;}}return !0;}function ba(){return !1;}function bb(){return !0;}function bh(a){return !a||!a.parentNode||a.parentNode.nodeType===11;}function bi(a,b){do{a=a[b];}while(a&&a.nodeType!==1);return a;}function bj(a,b,c){b=b||0;if(p.isFunction(b)){return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c;});}if(b.nodeType){return p.grep(a,function(a,d){return a===b===c;});}if(typeof b=="string"){var d=p.grep(a,function(a){return a.nodeType===1;});if(be.test(b)){return p.filter(b,d,!c);}b=p.filter(b,d);}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c;});}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop());}}return c;}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b));}function bD(a,b){if(b.nodeType!==1||!p.hasData(a)){return;}var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;d<e;d++){p.event.add(b,c,h[c][d]);}}}g.data&&(g.data=p.extend({},g.data));}function bE(a,b){var c;if(b.nodeType!==1){return;}b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando);}function bF(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[];}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked);}function bY(a,b){if(b in a){return b;}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bW.length;while(e--){b=bW[e]+c;if(b in a){return b;}}return d;}function bZ(a,b){return a=b||a,p.css(a,"display")==="none"||!p.contains(a.ownerDocument,a);}function b$(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style){continue;}e[f]=p._data(c,"olddisplay"),b?(!e[f]&&c.style.display==="none"&&(c.style.display=""),c.style.display===""&&bZ(c)&&(e[f]=p._data(c,"olddisplay",cc(c.nodeName)))):(d=bH(c,"display"),!e[f]&&d!=="none"&&p._data(c,"olddisplay",d));}for(f=0;f<g;f++){c=a[f];if(!c.style){continue;}if(!b||c.style.display==="none"||c.style.display===""){c.style.display=b?e[f]||"":"none";}}return a;}function b_(a,b,c){var d=bP.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b;}function ca(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2){c==="margin"&&(f+=p.css(a,c+bV[e],!0)),d?(c==="content"&&(f-=parseFloat(bH(a,"padding"+bV[e]))||0),c!=="margin"&&(f-=parseFloat(bH(a,"border"+bV[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bV[e]))||0,c!=="padding"&&(f+=parseFloat(bH(a,"border"+bV[e]+"Width"))||0));}return f;}function cb(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,"boxSizing")==="border-box";if(d<=0||d==null){d=bH(a,b);if(d<0||d==null){d=a.style[b];}if(bQ.test(d)){return d;}e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0;}return d+ca(a,b,c||(f?"border":"content"),e)+"px";}function cc(a){if(bS[a]){return bS[a];}var b=p("<"+a+">").appendTo(e.body),c=b.css("display");b.remove();if(c==="none"||c===""){bI=e.body.appendChild(bI||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement){bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write("<!doctype html><html><body>"),bJ.close();}b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI);}return bS[a]=c,c;}function ci(a,b,c,d){var e;if(p.isArray(b)){p.each(b,function(b,e){c||ce.test(a)?d(a,e):ci(a+"["+(typeof e=="object"?b:"")+"]",e,c,d);});}else{if(!c&&p.type(b)==="object"){for(e in b){ci(a+"["+e+"]",b[e],c,d);}}else{d(a,b);}}}function cz(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c)){for(;h<i;h++){d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c);}}};}function cA(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cv;for(;j<k&&(l||!h);j++){h=i[j](c,d,e),typeof h=="string"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cA(a,c,d,e,h,g)));}return(l||!h)&&!g["*"]&&(h=cA(a,c,d,e,"*",g)),h;}function cB(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);}e&&p.extend(!0,a,e);}function cC(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k){f in d&&(c[k[f]]=d[f]);}while(j[0]==="*"){j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));}if(e){for(f in i){if(i[f]&&i[f].test(e)){j.unshift(f);break;}}}if(j[0] in d){g=j[0];}else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break;}h||(h=f);}g=g||h;}if(g){return g!==j[0]&&j.unshift(g),d[g];}}function cD(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1]){for(c in a.converters){i[c.toLowerCase()]=a.converters[c];}}for(;e=g[++j];){if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c){for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break;}}}}if(c!==!0){if(c&&a["throws"]){b=c(b);}else{try{b=c(b);}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e};}}}}h=e;}}return{state:"success",data:b};}function cL(){try{return new a.XMLHttpRequest;}catch(b){}}function cM(){try{return new a.ActiveXObject("Microsoft.XMLHTTP");}catch(b){}}function cU(){return setTimeout(function(){cN=b;},0),cN=p.now();}function cV(a,b){p.each(b,function(b,c){var d=(cT[b]||[]).concat(cT["*"]),e=0,f=d.length;for(;e<f;e++){if(d[e].call(a,b,c)){return;}}});}function cW(a,b,c){var d,e=0,f=0,g=cS.length,h=p.Deferred().always(function(){delete i.elem;}),i=function(){var b=cN||cU(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++){j.tweens[e].run(d);}return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1);},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cN||cU(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e;},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++){j.tweens[c].run(1);}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this;}}),k=j.props;cX(k,j.opts.specialEasing);for(;e<g;e++){d=cS[e].call(j,a,k,j.opts);if(d){return d;}}return cV(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always);}function cX(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e);}}else{b[d]=e;}}}function cY(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bZ(a);c.queue||(j=p._queueHooks(a,"fx"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k();}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire();});})),a.nodeType===1&&("height" in b||"width" in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,"display")==="inline"&&p.css(a,"float")==="none"&&(!p.support.inlineBlockNeedsLayout||cc(a.nodeName)==="inline"?m.display="inline-block":m.zoom=1)),c.overflow&&(m.overflow="hidden",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2];}));for(d in b){f=b[d];if(cP.exec(f)){delete b[d];if(f===(q?"hide":"show")){continue;}o.push(d);}}g=o.length;if(g){h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide();}),l.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n){p.style(a,b,n[b]);}});for(d=0;d<g;d++){e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e==="width"||e==="height"?1:0));}}}function cZ(a,b,c,d,e){return new cZ.prototype.init(a,b,c,d,e);}function c$(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b){c=bV[e],d["margin"+c]=d["padding"+c]=a;}return b&&(d.opacity=d.width=a),d;}function da(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1;}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c);},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase();},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):e.readyState==="complete"&&(e.detachEvent("onreadystatechange",D),p.ready());},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a){return this;}if(a.nodeType){return this.context=this[0]=a,this.length=1,this;}if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1]){return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);}g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2]){return d.find(a);}this.length=1,this[0]=g;}return this.context=e,this.selector=a,this;}return !c||c.jquery?(c||d).find(a):this.constructor(c).find(a);}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this));},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length;},toArray:function(){return k.call(this);},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a];},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d;},each:function(a,b){return p.each(this,a,b);},ready:function(a){return p.ready.promise().done(a),this;},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","));},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b);}));},end:function(){return this.prevObject||this.constructor(null);},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++){if((a=arguments[i])!=null){for(c in a){d=h[c],e=a[c];if(h===e){continue;}k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e);}}}return h;},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p;},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0);},ready:function(a){if(a===!0?--p.readyWait:p.isReady){return;}if(!e.body){return setTimeout(p.ready,1);}p.isReady=!0;if(a!==!0&&--p.readyWait>0){return;}d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready");},isFunction:function(a){return p.type(a)==="function";},isArray:Array.isArray||function(a){return p.type(a)==="array";},isWindow:function(a){return a!=null&&a==a.window;},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a);},type:function(a){return a==null?String(a):E[m.call(a)]||"object";},isPlainObject:function(a){if(!a||p.type(a)!=="object"||a.nodeType||p.isWindow(a)){return !1;}try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf")){return !1;}}catch(c){return !1;}var d;for(d in a){}return d===b||n.call(a,d);},isEmptyObject:function(a){var b;for(b in a){return !1;}return !0;},error:function(a){throw new Error(a);},parseHTML:function(a,b,c){var d;return !a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)));},parseJSON:function(b){if(!b||typeof b!="string"){return null;}b=p.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b);}if(w.test(b.replace(y,"@").replace(z,"]").replace(x,""))){return(new Function("return "+b))();}p.error("Invalid JSON: "+b);},parseXML:function(c){var d,e;if(!c||typeof c!="string"){return null;}try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c));}catch(f){d=b;}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d;},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b);})(b);},camelCase:function(a){return a.replace(A,"ms-").replace(B,C);},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase();},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a){if(c.apply(a[e],d)===!1){break;}}}else{for(;f<g;){if(c.apply(a[f++],d)===!1){break;}}}}else{if(h){for(e in a){if(c.call(a[e],e,a[e])===!1){break;}}}else{for(;f<g;){if(c.call(a[f],f,a[f++])===!1){break;}}}}return a;},trim:o&&!o.call("\uFEFF\xA0")?function(a){return a==null?"":o.call(a);}:function(a){return a==null?"":(a+"").replace(t,"");},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d;},inArray:function(a,b,c){var d;if(b){if(l){return l.call(b,a,c);}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c;}}}return -1;},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number"){for(;f<d;f++){a[e++]=c[f];}}else{while(c[f]!==b){a[e++]=c[f++];}}return a.length=e,a;},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++){d=!!b(a[f],f),c!==d&&e.push(a[f]);}return e;},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i=="number"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j){for(;h<i;h++){e=c(a[h],h,d),e!=null&&(g[g.length]=e);}}else{for(f in a){e=c(a[f],f,d),e!=null&&(g[g.length]=e);}}return g.concat.apply([],g);},guid:1,proxy:function(a,c){var d,e,f;return typeof c=="string"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)));},f.guid=a.guid=a.guid||p.guid++,f):b;},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d=="object"){for(k in d){p.access(a,c,k,d[k],1,g,e);}f=1;}else{if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c);}):(c.call(a,e),c=null));if(c){for(;k<l;k++){c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);}}f=1;}}return f?a:j?c.call(a):l?c(a[0],d):g;},now:function(){return(new Date).getTime();}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState==="complete"){setTimeout(p.ready,1);}else{if(e.addEventListener){e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1);}else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement;}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left");}catch(a){return setTimeout(g,50);}p.ready();}}();}}}return d.promise(b);},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase();}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a=="string"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++){if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break;}}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable());},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){var e=p.type(c);e==="function"&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&e!=="string"&&d(c);});})(arguments),e?g=i.length:c&&(f=b,k(c));}return this;},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1){i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--);}}),this;},has:function(a){return p.inArray(a,i)>-1;},empty:function(){return i=[],this;},disable:function(){return i=j=c=b,this;},disabled:function(){return !i;},lock:function(){return j=b,c||l.disable(),this;},locked:function(){return !j;},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this;},fire:function(){return l.fireWith(this,arguments),this;},fired:function(){return !!d;}};return l;},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c;},always:function(){return e.done(arguments).fail(arguments),this;},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a]);}:c[f]);}),a=null;}).promise();},promise:function(a){return a!=null?p.extend(a,d):d;}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h;},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith;}),d.promise(e),a&&a.call(e,e),e;},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c);};},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++){c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e;}}return e||f.resolveWith(j,c),f.promise();}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length){return{};}f=e.createElement("select"),g=f.appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:n.className!=="t",enctype:!!e.createElement("form").enctype,html5Clone:e.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:e.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test;}catch(o){b.deleteExpando=!1;}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1;}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),h=e.createElement("input"),h.value="t",h.setAttribute("type","radio"),b.radioValue=h.value==="t",h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent){for(k in {submit:!0,change:!0,focusin:!0}){j="on"+k,l=j in n,l||(n.setAttribute(j,"return;"),l=typeof n[j]=="function"),b[k+"Bubbles"]=l;}}return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];if(!i){return;}c=e.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",l=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px",g=e.createElement("div"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!="undefined"&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null;}),i.removeChild(n),c=d=f=g=h=i=n=null,b;}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a);},data:function(a,c,d,e){if(!p.acceptData(a)){return;}var f,g,h=p.expando,i=typeof c=="string",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b){return;}l||(j?a[h]=l=p.deletedIds.pop()||p.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c=="object"||typeof c=="function"){e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);}return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g;},removeData:function(a,b,c){if(!p.acceptData(a)){return;}var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i]){return;}if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++){delete d[b[e]];}if(!(c?K:p.isEmptyObject)(d)){return;}}}if(!c){delete h[i].data;if(!K(h[i])){return;}}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null;},_data:function(a,b,c){return p.data(a,b,c,!0);},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return !b||b!==!0&&a.getAttribute("classid")===b;}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++){g=f[j].name,g.indexOf("data-")||(g=p.camelCase(g.substring(5)),J(i,g,k[g]));}p._data(i,"parsedAttrs",!0);}}return k;}return typeof a=="object"?this.each(function(){p.data(this,a);}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){if(c===b){return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;}d[1]=c,this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a,c),b.triggerHandler("changeData"+e,d);});},null,c,arguments.length>1,null,!1));},removeData:function(a){return this.each(function(){p.removeData(this,a);});}}),p.extend({queue:function(a,b,c){var d;if(a){return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[];}},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b);};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire();},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0);})});}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a==="fx"&&b[0]!=="inprogress"&&p.dequeue(this,a);});},dequeue:function(a){return this.each(function(){p.dequeue(this,a);});},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d);};});},clearQueue:function(a){return this.queue(a||"fx",[]);},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g]);};typeof a!="string"&&(c=a,a=b),a=a||"fx";while(h--){d=p._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));}return i(),f.promise(c);}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1);},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a);});},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1);},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a];}catch(c){}});},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a)){return this.each(function(b){p(this).addClass(a.call(this,b,this.className));});}if(a&&typeof a=="string"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a;}else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++){f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");}e.className=p.trim(f);}}}}return this;},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a)){return this.each(function(b){p(this).removeClass(a.call(this,b,this.className));});}if(a&&typeof a=="string"||a===b){c=(a||"").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(O," ");for(f=0,g=c.length;f<g;f++){while(d.indexOf(" "+c[f]+" ")>=0){d=d.replace(" "+c[f]+" "," ");}}e.className=a?p.trim(d):"";}}}return this;},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b);}):this.each(function(){if(c==="string"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++]){h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);}}else{if(c==="undefined"||c==="boolean"){this.className&&p._data(this,"__className__",this.className),this.className=this.className||a===!1?"":p._data(this,"__className__")||"";}}});},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>=0){return !0;}}return !1;},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f){return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get" in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(P,""):d==null?"":d);}return;}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1){return;}e?f=a.call(this,d,g.val()):f=a,f==null?f="":typeof f=="number"?f+="":p.isArray(f)&&(f=p.map(f,function(a){return a==null?"":a+"";})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,f,"value")===b){this.value=f;}});}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text;}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0){return null;}c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){b=p(e).val();if(i){return b;}g.push(b);}}return i&&!g.length&&h.length?p(h[f]).val():g;},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0;}),c.length||(a.selectedIndex=-1),c;}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2){return;}if(e&&p.isFunction(p.fn[c])){return p(a)[c](d);}if(typeof a.getAttribute=="undefined"){return p.prop(a,c,d);}h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return;}return g&&"set" in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d);}return g&&"get" in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f);},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++){e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1));}}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode){p.error("type property can't be changed");}else{if(!p.support.radioValue&&b==="radio"&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b;}}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null;},set:function(a,b,c){if(L&&p.nodeName(a,"button")){return L.set(a,b,c);}a.value=b;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2){return;}return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set" in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get" in f&&(e=f.get(a,c))!==null?e:a[c];},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b;}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b;},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c;}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!=="":d.specified)?d.value:b;},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+"";}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c===""){return a.setAttribute(b,"auto"),c;}}});}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===""&&(b="false"),L.set(a,b,c);}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d;}});}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b;},set:function(a,b){return a.style.cssText=b+"";}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null;}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value;}};}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b)){return a.checked=p.inArray(p(a).val(),b)>=0;}}});});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1");};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a))){return;}d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!="undefined"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b;},h.elem=a),c=p.trim(_(c)).split(" ");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&p.expr.match.needsContext.test(f),namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1){a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h);}}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0;}a=null;},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events)){return;}b=p.trim(_(b||"")).split(" ");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m){p.event.remove(a,h+b[f],c,d,!0);}continue;}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++){q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));}o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h]);}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,"events",!0));},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered)){return;}s.indexOf("!")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(".")>=0&&(t=s.split("."),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s]){return;}c=typeof c=="object"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"";if(!f){h=p.cache;for(j in h){h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);}return;}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1){return;}q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode){q.push([k,r]),l=k;}l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r]);}for(j=0;j<q.length&&!c.isPropagationStopped();j++){k=q[j][0],c.type=q[j][1],o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply&&o.apply(k,d)===!1&&c.preventDefault();}return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!=="click"||!p.nodeName(f,"a"))&&p.acceptData(f)&&m&&f[s]&&(s!=="focus"&&s!=="blur"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result;}return;},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,l,m,n,o=(p._data(this,"events")||{})[c.type]||[],q=o.delegateCount,r=k.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1){return;}if(q&&(!c.button||c.type!=="click")){for(f=c.target;f!=this;f=f.parentNode||this){if(f.disabled!==!0||c.type!=="click"){h={},j=[];for(d=0;d<q;d++){l=o[d],m=l.selector,h[m]===b&&(h[m]=l.needsContext?p(m,this).index(f)>=0:p.find(m,this,null,[f]).length),h[m]&&j.push(l);}j.length&&u.push({elem:f,matches:j});}}}o.length>q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.isPropagationStopped();d++){i=u[d],c.currentTarget=i.elem;for(e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++){l=i.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace)){c.data=l.data,c.handleObj=l,g=((p.event.special[l.origType]||{}).handle||l.handler).apply(i.elem,r),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation()));}}}return t.postDispatch&&t.postDispatch.call(this,c),c.result;},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a;}},fix:function(a){if(a[p.expando]){return a;}var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;){c=g[--b],a[c]=d[c];}return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a;},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c);},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null);}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault();}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1);}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]=="undefined"&&(a[d]=null),a.detachEvent(d,c));},p.Event=function(a,b){if(this instanceof p.Event){a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;}else{return new p.Event(a,b);}},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a){return;}a.preventDefault?a.preventDefault():a.returnValue=!1;},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a){return;}a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation();},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e)){a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;}return c;}};}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form")){return !1;}p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0;}),p._data(d,"_submit_attached",!0));});},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0));},teardown:function(){if(p.nodeName(this,"form")){return !1;}p.event.remove(this,"._submit");}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){p.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0);}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0);});}return !1;}p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0);}),p._data(b,"_change_attached",!0));});},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments);}},teardown:function(){return p.event.remove(this,"._change"),!V.test(this.nodeName);}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0);};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0);},teardown:function(){--c===0&&e.removeEventListener(a,d,!0);}};}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a){this.on(h,c,d,a[h],f);}return this;}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=ba;}else{if(!e){return this;}}return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments);},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c);});},one:function(a,b,c,d){return this.on(a,b,c,d,1);},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj){return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;}if(typeof a=="object"){for(f in a){this.off(f,c,a[f]);}return this;}if(c===!1||typeof c=="function"){d=c,c=b;}return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c);});},bind:function(a,b,c){return this.on(a,null,b,c);},unbind:function(a,b){return this.off(a,null,b);},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this;},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this;},delegate:function(a,b,c,d){return this.on(b,a,c,d);},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c);},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this);});},triggerHandler:function(a,b){if(this[0]){return p.event.trigger(a,b,this[0],!0);}},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1;};e.guid=c;while(d<b.length){b[d++].guid=c;}return this.click(e);},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a);}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b);},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks);}),function(a,b){function bc(a,b,c,d){c=c||[],b=b||r;var e,f,i,j,k=b.nodeType;if(!a||typeof a!="string"){return c;}if(k!==1&&k!==9){return[];}i=g(b);if(!i&&!d){if(e=P.exec(a)){if(j=e[1]){if(k===9){f=b.getElementById(j);if(!f||!f.parentNode){return c;}if(f.id===j){return c.push(f),c;}}else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(j))&&h(b,f)&&f.id===j){return c.push(f),c;}}}else{if(e[2]){return w.apply(c,x.call(b.getElementsByTagName(a),0)),c;}if((j=e[3])&&_&&b.getElementsByClassName){return w.apply(c,x.call(b.getElementsByClassName(j),0)),c;}}}}return bp(a.replace(L,"$1"),b,c,d,i);}function bd(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a;};}function be(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a;};}function bf(a){return z(function(b){return b=+b,z(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){c[e=f[g]]&&(c[e]=!(d[e]=c[e]));}});});}function bg(a,b,c){if(a===b){return c;}var d=a.nextSibling;while(d){if(d===b){return -1;}d=d.nextSibling;}return 1;}function bh(a,b){var c,d,f,g,h,i,j,k=C[o][a];if(k){return b?0:k.slice(0);}h=a,i=[],j=e.preFilter;while(h){if(!c||(d=M.exec(h))){d&&(h=h.slice(d[0].length)),i.push(f=[]);}c=!1;if(d=N.exec(h)){f.push(c=new q(d.shift())),h=h.slice(c.length),c.type=d[0].replace(L," ");}for(g in e.filter){(d=W[g].exec(h))&&(!j[g]||(d=j[g](d,r,!0)))&&(f.push(c=new q(d.shift())),h=h.slice(c.length),c.type=g,c.matches=d);}if(!c){break;}}return b?h.length:h?bc.error(a):C(a,i).slice(0);}function bi(a,b,d){var e=b.dir,f=d&&b.dir==="parentNode",g=u++;return b.first?function(b,c,d){while(b=b[e]){if(f||b.nodeType===1){return a(b,c,d);}}}:function(b,d,h){if(!h){var i,j=t+" "+g+" ",k=j+c;while(b=b[e]){if(f||b.nodeType===1){if((i=b[o])===k){return b.sizset;}if(typeof i=="string"&&i.indexOf(j)===0){if(b.sizset){return b;}}else{b[o]=k;if(a(b,d,h)){return b.sizset=!0,b;}b.sizset=!1;}}}}else{while(b=b[e]){if(f||b.nodeType===1){if(a(b,d,h)){return b;}}}}};}function bj(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return !1;}}return !0;}:a[0];}function bk(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++){if(f=a[h]){if(!c||c(f,d,e)){g.push(f),j&&b.push(h);}}}return g;}function bl(a,b,c,d,e,f){return d&&!d[o]&&(d=bl(d)),e&&!e[o]&&(e=bl(e,f)),z(function(f,g,h,i){if(f&&e){return;}var j,k,l,m=[],n=[],o=g.length,p=f||bo(b||"*",h.nodeType?[h]:h,[],f),q=a&&(f||!b)?bk(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){l=bk(r,n),d(l,[],h,i),j=l.length;while(j--){if(k=l[j]){r[n[j]]=!(q[n[j]]=k);}}}if(f){j=a&&r.length;while(j--){if(k=r[j]){f[m[j]]=!(g[m[j]]=k);}}}else{r=bk(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):w.apply(g,r);}});}function bm(a){var b,c,d,f=a.length,g=e.relative[a[0].type],h=g||e.relative[" "],i=g?1:0,j=bi(function(a){return a===b;},h,!0),k=bi(function(a){return y.call(b,a)>-1;},h,!0),m=[function(a,c,d){return !g&&(d||c!==l)||((b=c).nodeType?j(a,c,d):k(a,c,d));}];for(;i<f;i++){if(c=e.relative[a[i].type]){m=[bi(bj(m),c)];}else{c=e.filter[a[i].type].apply(null,a[i].matches);if(c[o]){d=++i;for(;d<f;d++){if(e.relative[a[d].type]){break;}}return bl(i>1&&bj(m),i>1&&a.slice(0,i-1).join("").replace(L,"$1"),c,i<d&&bm(a.slice(i,d)),d<f&&bm(a=a.slice(d)),d<f&&a.join(""));}m.push(c);}}return bj(m);}function bn(a,b){var d=b.length>0,f=a.length>0,g=function(h,i,j,k,m){var n,o,p,q=[],s=0,u="0",x=h&&[],y=m!=null,z=l,A=h||f&&e.find.TAG("*",m&&i.parentNode||i),B=t+=z==null?1:Math.E;y&&(l=i!==r&&i,c=g.el);for(;(n=A[u])!=null;u++){if(f&&n){for(o=0;p=a[o];o++){if(p(n,i,j)){k.push(n);break;}}y&&(t=B,c=++g.el);}d&&((n=!p&&n)&&s--,h&&x.push(n));}s+=u;if(d&&u!==s){for(o=0;p=b[o];o++){p(x,q,i,j);}if(h){if(s>0){while(u--){!x[u]&&!q[u]&&(q[u]=v.call(k));}}q=bk(q);}w.apply(k,q),y&&!h&&q.length>0&&s+b.length>1&&bc.uniqueSort(k);}return y&&(t=B,l=z),x;};return g.el=0,d?z(g):g;}function bo(a,b,c,d){var e=0,f=b.length;for(;e<f;e++){bc(a,b[e],c,d);}return c;}function bp(a,b,c,d,f){var g,h,j,k,l,m=bh(a),n=m.length;if(!d&&m.length===1){h=m[0]=m[0].slice(0);if(h.length>2&&(j=h[0]).type==="ID"&&b.nodeType===9&&!f&&e.relative[h[1].type]){b=e.find.ID(j.matches[0].replace(V,""),b,f)[0];if(!b){return c;}a=a.slice(h.shift().length);}for(g=W.POS.test(a)?-1:h.length-1;g>=0;g--){j=h[g];if(e.relative[k=j.type]){break;}if(l=e.find[k]){if(d=l(j.matches[0].replace(V,""),R.test(h[0].type)&&b.parentNode||b,f)){h.splice(g,1),a=d.length&&h.join("");if(!a){return w.apply(c,x.call(d,0)),c;}break;}}}}return i(a,m)(d,b,f,c,R.test(a)),c;}function bq(){}var c,d,e,f,g,h,i,j,k,l,m=!0,n="undefined",o=("sizcache"+Math.random()).replace(".",""),q=String,r=a.document,s=r.documentElement,t=0,u=0,v=[].pop,w=[].push,x=[].slice,y=[].indexOf||function(a){var b=0,c=this.length;for(;b<c;b++){if(this[b]===a){return b;}}return -1;},z=function(a,b){return a[o]=b==null||b,a;},A=function(){var a={},b=[];return z(function(c,d){return b.push(c)>e.cacheLength&&delete a[b.shift()],a[c]=d;},a);},B=A(),C=A(),D=A(),E="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",G=F.replace("w","w#"),H="([*^$|!~]?=)",I="\\["+E+"*("+F+")"+E+"*(?:"+H+E+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+G+")|)|)"+E+"*\\]",J=":("+F+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+I+")|[^:]|\\\\.)*|.*))\\)|)",K=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+E+"*((?:-\\d)?\\d*)"+E+"*\\)|)(?=[^-]|$)",L=new RegExp("^"+E+"+|((?:^|[^\\\\])(?:\\\\.)*)"+E+"+$","g"),M=new RegExp("^"+E+"*,"+E+"*"),N=new RegExp("^"+E+"*([\\x20\\t\\r\\n\\f>+~])"+E+"*"),O=new RegExp(J),P=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Q=/^:not/,R=/[\x20\t\r\n\f]*[+~]/,S=/:not\($/,T=/h\d/i,U=/input|select|textarea|button/i,V=/\\(?!\\)/g,W={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),NAME:new RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+J),POS:new RegExp(K,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+E+"*(even|odd|(([+-]|)(\\d*)n|)"+E+"*(?:([+-]|)"+E+"*(\\d+)|))"+E+"*\\)|)","i"),needsContext:new RegExp("^"+E+"*[>+~]|"+K,"i")},X=function(a){var b=r.createElement("div");try{return a(b);}catch(c){return !1;}finally{b=null;}},Y=X(function(a){return a.appendChild(r.createComment("")),!a.getElementsByTagName("*").length;}),Z=X(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==n&&a.firstChild.getAttribute("href")==="#";}),$=X(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string";}),_=X(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length===2);}),ba=X(function(a){a.id=o+0,a.innerHTML="<a name='"+o+"'></a><div name='"+o+"'></div>",s.insertBefore(a,s.firstChild);var b=r.getElementsByName&&r.getElementsByName(o).length===2+r.getElementsByName(o+0).length;return d=!r.getElementById(o),s.removeChild(a),b;});try{x.call(s.childNodes,0)[0].nodeType;}catch(bb){x=function(a){var b,c=[];for(;b=this[a];a++){c.push(b);}return c;};}bc.matches=function(a,b){return bc(a,null,null,b);},bc.matchesSelector=function(a,b){return bc(b,null,null,[a]).length>0;},f=bc.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent=="string"){return a.textContent;}for(a=a.firstChild;a;a=a.nextSibling){c+=f(a);}}else{if(e===3||e===4){return a.nodeValue;}}}else{for(;b=a[d];d++){c+=f(b);}}return c;},g=bc.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1;},h=bc.contains=s.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d));}:s.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16);}:function(a,b){while(b=b.parentNode){if(b===a){return !0;}}return !1;},bc.attr=function(a,b){var c,d=g(a);return d||(b=b.toLowerCase()),(c=e.attrHandle[b])?c(a):d||$?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null);},e=bc.selectors={cacheLength:50,createPseudo:z,match:W,attrHandle:Z?{}:{href:function(a){return a.getAttribute("href",2);},type:function(a){return a.getAttribute("type");}},find:{ID:d?function(a,b,c){if(typeof b.getElementById!==n&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[];}}:function(a,c,d){if(typeof c.getElementById!==n&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==n&&e.getAttributeNode("id").value===a?[e]:b:[];}},TAG:Y?function(a,b){if(typeof b.getElementsByTagName!==n){return b.getElementsByTagName(a);}}:function(a,b){var c=b.getElementsByTagName(a);if(a==="*"){var d,e=[],f=0;for(;d=c[f];f++){d.nodeType===1&&e.push(d);}return e;}return c;},NAME:ba&&function(a,b){if(typeof b.getElementsByName!==n){return b.getElementsByName(name);}},CLASS:_&&function(a,b,c){if(typeof b.getElementsByClassName!==n&&!c){return b.getElementsByClassName(a);}}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(V,""),a[3]=(a[4]||a[5]||"").replace(V,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4);},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||bc.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&bc.error(a[0]),a;},PSEUDO:function(a){var b,c;if(W.CHILD.test(a[0])){return null;}if(a[3]){a[2]=a[3];}else{if(b=a[4]){O.test(b)&&(c=bh(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;}}return a.slice(0,3);}},filter:{ID:d?function(a){return a=a.replace(V,""),function(b){return b.getAttribute("id")===a;};}:function(a){return a=a.replace(V,""),function(b){var c=typeof b.getAttributeNode!==n&&b.getAttributeNode("id");return c&&c.value===a;};},TAG:function(a){return a==="*"?function(){return !0;}:(a=a.replace(V,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a;});},CLASS:function(a){var b=B[o][a];return b||(b=B(a,new RegExp("(^|"+E+")"+a+"("+E+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==n&&a.getAttribute("class")||"");};},ATTR:function(a,b,c){return function(d,e){var f=bc.attr(d,a);return f==null?b==="!=":b?(f+="",b==="="?f===c:b==="!="?f!==c:b==="^="?c&&f.indexOf(c)===0:b==="*="?c&&f.indexOf(c)>-1:b==="$="?c&&f.substr(f.length-c.length)===c:b==="~="?(" "+f+" ").indexOf(c)>-1:b==="|="?f===c||f.substr(0,c.length+1)===c+"-":!1):!0;};},CHILD:function(a,b,c,d){return a==="nth"?function(a){var b,e,f=a.parentNode;if(c===1&&d===0){return !0;}if(f){e=0;for(b=f.firstChild;b;b=b.nextSibling){if(b.nodeType===1){e++;if(a===b){break;}}}}return e-=d,e===c||e%c===0&&e/c>=0;}:function(b){var c=b;switch(a){case"only":case"first":while(c=c.previousSibling){if(c.nodeType===1){return !1;}}if(a==="first"){return !0;}c=b;case"last":while(c=c.nextSibling){if(c.nodeType===1){return !1;}}return !0;}};},PSEUDO:function(a,b){var c,d=e.pseudos[a]||e.setFilters[a.toLowerCase()]||bc.error("unsupported pseudo: "+a);return d[o]?d(b):d.length>1?(c=[a,a,"",b],e.setFilters.hasOwnProperty(a.toLowerCase())?z(function(a,c){var e,f=d(a,b),g=f.length;while(g--){e=y.call(a,f[g]),a[e]=!(c[e]=f[g]);}}):function(a){return d(a,0,c);}):d;}},pseudos:{not:z(function(a){var b=[],c=[],d=i(a.replace(L,"$1"));return d[o]?z(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){if(f=g[h]){a[h]=!(b[h]=f);}}}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop();};}),has:z(function(a){return function(b){return bc(a,b).length>0;};}),contains:z(function(a){return function(b){return(b.textContent||b.innerText||f(b)).indexOf(a)>-1;};}),enabled:function(a){return a.disabled===!1;},disabled:function(a){return a.disabled===!0;},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected;},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0;},parent:function(a){return !e.pseudos.empty(a);},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4){return !1;}a=a.nextSibling;}return !0;},header:function(a){return T.test(a.nodeName);},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b);},radio:bd("radio"),checkbox:bd("checkbox"),file:bd("file"),password:bd("password"),image:bd("image"),submit:be("submit"),reset:be("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button";},input:function(a){return U.test(a.nodeName);},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href);},active:function(a){return a===a.ownerDocument.activeElement;},first:bf(function(a,b,c){return[0];}),last:bf(function(a,b,c){return[b-1];}),eq:bf(function(a,b,c){return[c<0?c+b:c];}),even:bf(function(a,b,c){for(var d=0;d<b;d+=2){a.push(d);}return a;}),odd:bf(function(a,b,c){for(var d=1;d<b;d+=2){a.push(d);}return a;}),lt:bf(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;){a.push(d);}return a;}),gt:bf(function(a,b,c){for(var d=c<0?c+b:c;++d<b;){a.push(d);}return a;})}},j=s.compareDocumentPosition?function(a,b){return a===b?(k=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1;}:function(a,b){if(a===b){return k=!0,0;}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}var c,d,e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h){return bg(a,b);}if(!g){return -1;}if(!h){return 1;}while(i){e.unshift(i),i=i.parentNode;}i=h;while(i){f.unshift(i),i=i.parentNode;}c=e.length,d=f.length;for(var j=0;j<c&&j<d;j++){if(e[j]!==f[j]){return bg(e[j],f[j]);}}return j===c?bg(a,f[j],-1):bg(e[j],b,1);},[0,0].sort(j),m=!k,bc.uniqueSort=function(a){var b,c=1;k=m,a.sort(j);if(k){for(;b=a[c];c++){b===a[c-1]&&a.splice(c--,1);}}return a;},bc.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a);},i=bc.compile=function(a,b){var c,d=[],e=[],f=D[o][a];if(!f){b||(b=bh(a)),c=b.length;while(c--){f=bm(b[c]),f[o]?d.push(f):e.push(f);}f=D(a,bn(e,d));}return f;},r.querySelectorAll&&function(){var a,b=bp,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[":focus"],f=[":active",":focus"],h=s.matchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.oMatchesSelector||s.msMatchesSelector;X(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+E+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked");}),X(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+E+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled");}),e=new RegExp(e.join("|")),bp=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a))){var i,j,k=!0,l=o,m=d,n=d.nodeType===9&&a;if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){i=bh(a),(k=d.getAttribute("id"))?l=k.replace(c,"\\$&"):d.setAttribute("id",l),l="[id='"+l+"'] ",j=i.length;while(j--){i[j]=l+i[j].join("");}m=R.test(a)&&d.parentNode||d,n=i.join(",");}if(n){try{return w.apply(f,x.call(m.querySelectorAll(n),0)),f;}catch(p){}finally{k||d.removeAttribute("id");}}}return b(a,d,f,g,h);},h&&(X(function(b){a=h.call(b,"div");try{h.call(b,"[test!='']:sizzle"),f.push("!=",J);}catch(c){}}),f=new RegExp(f.join("|")),bc.matchesSelector=function(b,c){c=c.replace(d,"='$1']");if(!g(b)&&!f.test(c)&&(!e||!e.test(c))){try{var i=h.call(b,c);if(i||a||b.document&&b.document.nodeType!==11){return i;}}catch(j){}}return bc(c,null,null,[b]).length>0;});}(),e.pseudos.nth=e.pseudos.eq,e.filters=bq.prototype=e.pseudos,e.setFilters=new bq,bc.attr=p.attr,p.find=bc,p.expr=bc.selectors,p.expr[":"]=p.expr.pseudos,p.unique=bc.uniqueSort,p.text=bc.getText,p.isXMLDoc=bc.isXML,p.contains=bc.contains;}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!="string"){return p(a).filter(function(){for(b=0,c=h.length;b<c;b++){if(p.contains(h[b],this)){return !0;}}});}g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0){for(e=d;e<g.length;e++){for(f=0;f<d;f++){if(g[f]===g[e]){g.splice(e--,1);break;}}}}}return g;},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++){if(p.contains(this,c[b])){return !0;}}});},not:function(a){return this.pushStack(bj(this,a,!1),"not",a);},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a);},is:function(a){return !!a&&(typeof a=="string"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0);},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!="string"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break;}c=c.parentNode;}}return f=f.length>1?p.unique(f):f,this.pushStack(f,"closest",a);},index:function(a){return a?typeof a=="string"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1;},add:function(a,b){var c=typeof a=="string"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d));},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a));}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null;},parents:function(a){return p.dir(a,"parentNode");},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c);},next:function(a){return bi(a,"nextSibling");},prev:function(a){return bi(a,"previousSibling");},nextAll:function(a){return p.dir(a,"nextSibling");},prevAll:function(a){return p.dir(a,"previousSibling");},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c);},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c);},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a);},children:function(a){return p.sibling(a.firstChild);},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes);}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d=="string"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(","));};}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b);},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d))){f.nodeType===1&&e.push(f),f=f[c];}return e;},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a);}return c;}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a));},null,a,arguments.length);},wrapAll:function(a){if(p.isFunction(a)){return this.each(function(b){p(this).wrapAll(a.call(this,b));});}if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild;}return a;}).append(this);}return this;},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b));}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a);});},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a);});},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes);}).end();},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a);});},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild);});},before:function(){if(!bh(this[0])){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this);});}if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector);}},after:function(){if(!bh(this[0])){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling);});}if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector);}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++){if(!a||p.filter(a,[c]).length){!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);}}return this;},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName("*"));while(a.firstChild){a.removeChild(a.firstChild);}}return this;},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b);});},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(bm,""):b;}if(typeof a=="string"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bo,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);}c=0;}catch(f){}}c&&this.empty().append(a);},null,a,arguments.length);},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d));}):(typeof a!="string"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a);}));},detach:function(a){return this.remove(a,!0);},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j=="string"&&bw.test(j)){return this.each(function(){p(this).domManip(a,c,d);});}if(p.isFunction(j)){return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d);});}if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++){d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0));}}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b);});}return this;}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,a.length===1&&typeof i=="string"&&i.length<512&&c===e&&i.charAt(0)==="<"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g};},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1){return g[b](this[0]),this;}for(;e<h;e++){d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);}return this.pushStack(f,a,g.selector);};}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f){e[f]&&bE(d[f],e[f]);}}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f){bD(d[f],e[f]);}}}return d=e=null,g;},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=b===e&&bA,t=[];if(!b||typeof b.createDocumentFragment=="undefined"){b=e;}for(f=0;(h=a[f])!=null;f++){typeof h=="number"&&(h+="");if(!h){continue;}if(typeof h=="string"){if(!br.test(h)){h=b.createTextNode(h);}else{s=s||bk(b),l=b.createElement("div"),s.appendChild(l),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--){l=l.lastChild;}if(!p.support.tbody){m=bq.test(h),n=i==="table"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]==="<table>"&&!m?l.childNodes:[];for(g=n.length-1;g>=0;--g){p.nodeName(n[g],"tbody")&&!n[g].childNodes.length&&n[g].parentNode.removeChild(n[g]);}}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l.parentNode.removeChild(l);}}h.nodeType?t.push(h):p.merge(t,h);}l&&(h=l=s=null);if(!p.support.appendChecked){for(f=0;(h=t[f])!=null;f++){p.nodeName(h,"input")?bG(h):typeof h.getElementsByTagName!="undefined"&&p.grep(h.getElementsByTagName("input"),bG);}}if(c){q=function(a){if(!a.type||bx.test(a.type)){return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a);}};for(f=0;(h=t[f])!=null;f++){if(!p.nodeName(h,"script")||!q(h)){c.appendChild(h),typeof h.getElementsByTagName!="undefined"&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[f+1,0].concat(r)),f+=r.length);}}}return t;},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++){if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events){for(f in c.events){k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);}}i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d));}}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"};},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c);}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b);},a.fn.init.prototype=a.fn;var b=a(e);return a;};}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^(none|table(?!-c[ea]).+)/,bO=/^margin/,bP=new RegExp("^("+q+")(.*)$","i"),bQ=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bR=new RegExp("^([-+])=("+q+")","i"),bS={},bT={position:"absolute",visibility:"hidden",display:"block"},bU={letterSpacing:0,fontWeight:400},bV=["Top","Right","Bottom","Left"],bW=["Webkit","O","Moz","ms"],bX=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c);},a,c,arguments.length>1);},show:function(){return b$(this,!0);},hide:function(){return b$(this);},toggle:function(a,b){var c=typeof a=="boolean";return p.isFunction(a)&&p.isFunction(b)?bX.apply(this,arguments):this.each(function(){(c?a:bZ(this))?p(this).show():p(this).hide();});}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return c===""?"1":c;}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style){return;}var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bY(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b){return h&&"get" in h&&(f=h.get(a,!1,e))!==b?f:j[c];}g=typeof d,g==="string"&&(f=bR.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d)){return;}g==="number"&&!p.cssNumber[i]&&(d+="px");if(!h||!("set" in h)||(d=h.set(a,d,e))!==b){try{j[c]=d;}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bY(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&"get" in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f==="normal"&&c in bU&&(f=bU[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f;},swap:function(a,b,c){var d,e,f={};for(e in b){f[e]=a.style[e],a.style[e]=b[e];}d=c.call(a);for(e in b){a.style[e]=f[e];}return d;}}),a.getComputedStyle?bH=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],d===""&&!p.contains(b.ownerDocument,b)&&(d=p.style(b,c)),bQ.test(d)&&bO.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d;}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bQ.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),e===""?"auto":e;}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth===0&&bN.test(bH(a,"display"))?p.swap(a,bT,function(){return cb(a,b,d);}):cb(a,b,d);}},set:function(a,c,d){return b_(a,c,d?ca(a,b,d,p.support.boxSizing&&p.css(a,"boxSizing")==="border-box"):0);}};}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":"";},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter){return;}}c.filter=bK.test(f)?f.replace(bK,e):f+" "+e;}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b){return bH(a,"marginRight");}});}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bQ.test(d)?p(a).position()[b]+"px":d;}}};});}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,"display"))==="none";},p.expr.filters.visible=function(a){return !p.expr.filters.hidden(a);}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bV[d]+b]=e[d]||e[d-2]||e[0];}return f;}},bO.test(a)||(p.cssHooks[a+b].set=b_);});var cd=/%20/g,ce=/\[\]$/,cf=/\r?\n/g,cg=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ch=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||ch.test(this.nodeName)||cg.test(this.type));}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(cf,"\r\n")};}):{name:b.name,value:c.replace(cf,"\r\n")};}).get();}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b);};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a)){p.each(a,function(){f(this.name,this.value);});}else{for(d in a){ci(d,a[d],c,f);}}return e.join("&").replace(cd,"+");};var cj,ck,cl=/#.*$/,cm=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,cn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,co=/^(?:GET|HEAD)$/,cp=/^\/\//,cq=/\?/,cr=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cs=/([?&])_=[^&]*/,ct=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,cu=p.fn.load,cv={},cw={},cx=["*/"]+["*"];try{ck=f.href;}catch(cy){ck=e.createElement("a"),ck.href="",ck=ck.href;}cj=ct.exec(ck.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!="string"&&cu){return cu.apply(this,arguments);}if(!this.length){return this;}var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):c&&typeof c=="object"&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a]);}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cr,"")).find(e):a);}),this;},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a);};}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f});};}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script");},getJSON:function(a,b,c){return p.get(a,b,c,"json");},ajaxSetup:function(a,b){return b?cB(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cB(a,b),a;},ajaxSettings:{url:ck,isLocal:cn.test(cj[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cx},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cz(cv),ajaxTransport:cz(cw),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2){return;}v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=a>0?4:0,f&&(u=cC(l,x,f));if(a>=200&&a<300||a===304){l.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(p.lastModified[d]=w),w=x.getResponseHeader("Etag"),w&&(p.etag[d]=w)),a===304?(y="notmodified",k=!0):(k=cD(l,u),y=k.state,s=k.data,t=k.error,k=!t);}else{t=y;if(!y||a){y="error",a<0&&(a=0);}}x.status=a,x.statusText=(c||y)+"",k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop"));}typeof a=="object"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b;}return this;},getAllResponseHeaders:function(){return v===2?e:null;},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cm.exec(e)){f[c[1].toLowerCase()]=c[2];}}c=f[a.toLowerCase()];}return c===b?null:c;},overrideMimeType:function(a){return v||(l.mimeType=a),this;},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this;}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2){for(b in a){r[b]=[r[b],a[b]];}}else{b=a[x.status],x.always(b);}}return this;},l.url=((a||l.url)+"").replace(cl,"").replace(cp,cj[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),l.crossDomain==null&&(i=ct.exec(l.url.toLowerCase())||!1,l.crossDomain=i&&i.join(":")+(i[3]?"":i[1]==="http:"?80:443)!==cj.join(":")+(cj[3]?"":cj[1]==="http:"?80:443)),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),cA(cv,l,c,x);if(v===2){return x;}j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!co.test(l.type),j&&p.active++===0&&p.event.trigger("ajaxStart");if(!l.hasContent){l.data&&(l.url+=(cq.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cs,"$1_="+z);l.url=A+(A===l.url?(cq.test(l.url)?"&":"?")+"_="+z:"");}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+cx+"; q=0.01":""):l.accepts["*"]);for(k in l.headers){x.setRequestHeader(k,l.headers[k]);}if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w="abort";for(k in {success:1,error:1,complete:1}){x[k](l[k]);}g=cA(cw,l,c,x);if(!g){y(-1,"No Transport");}else{x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort("timeout");},l.timeout));try{v=1,g.send(t,y);}catch(B){if(v<2){y(-1,B);}else{throw B;}}}return x;}return x.abort();},active:0,lastModified:{},etag:{}});var cE=[],cF=/\?/,cG=/(=)\?(?=&|$)|\?\?/,cH=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cE.pop()||p.expando+"_"+cH++;return this[a]=!0,a;}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cG.test(j),m=k&&!l&&typeof i=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cG.test(i);if(c.dataTypes[0]==="jsonp"||l||m){return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cG,"$1"+f):m?c.data=i.replace(cG,"$1"+f):k&&(c.url+=(cF.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0];},c.dataTypes[0]="json",a[f]=function(){h=arguments;},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cE.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b;}),"script";}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a;}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1);}),p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState)){c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success");}},d.insertBefore(c,d.firstChild);},abort:function(){c&&c.onload(0,1);}};}});var cI,cJ=a.ActiveXObject?function(){for(var a in cI){cI[a](0,1);}}:!1,cK=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&cL()||cM();}:cL,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials" in a});}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields){for(h in c.xhrFields){i[h]=c.xhrFields[h];}}c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e){i.setRequestHeader(h,e[h]);}}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cJ&&delete cI[g]);if(e){i.readyState!==4&&i.abort();}else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText;}catch(a){}try{j=i.statusText;}catch(n){j="";}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204);}}}catch(o){e||f(-1,o);}l&&f(h,j,l,k);},c.async?i.readyState===4?setTimeout(d,0):(g=++cK,cJ&&(cI||(cI={},p(a).unload(cJ)),cI[g]=d),i.onreadystatechange=d):d();},abort:function(){d&&d(0,1);}};}});var cN,cO,cP=/^(?:toggle|show|hide)$/,cQ=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cR=/queueHooks$/,cS=[cY],cT={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=cQ.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){c=+f[2],d=f[3]||(p.cssNumber[a]?"":"px");if(d!=="px"&&h){h=p.css(e.elem,a,!0)||c||1;do{i=i||".5",h=h/i,p.style(e.elem,a,h+d);}while(i!==(i=e.cur()/g)&&i!==1&&--j);}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c;}return e;}]};p.Animation=p.extend(cW,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++){c=a[d],cT[c]=cT[c]||[],cT[c].unshift(b);}},prefilter:function(a,b){b?cS.unshift(a):cS.push(a);}}),p.Tween=cZ,cZ.prototype={constructor:cZ,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px");},cur:function(){var a=cZ.propHooks[this.prop];return a&&a.get?a.get(this):cZ.propHooks._default.get(this);},run:function(a){var b,c=cZ.propHooks[this.prop];return this.options.duration?this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cZ.propHooks._default.set(this),this;}},cZ.prototype.init.prototype=cZ.prototype,cZ.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop];},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now;}}},cZ.propHooks.scrollTop=cZ.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now);}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d=="boolean"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(c$(b,!0),d,e,f);};}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bZ).css("opacity",0).show().end().animate({opacity:b},a,c,d);},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cW(this,p.extend({},a),f);e&&b.stop(!0);};return e||f.queue===!1?this.each(g):this.queue(f.queue,g);},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d);};return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=p.timers,g=p._data(this);if(c){g[c]&&g[c].stop&&e(g[c]);}else{for(c in g){g[c]&&g[c].stop&&cR.test(c)&&e(g[c]);}}for(c=f.length;c--;){f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));}(b||!d)&&p.dequeue(this,a);});}}),p.each({slideDown:c$("show"),slideUp:c$("hide"),slideToggle:c$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d);};}),p.speed=function(a,b,c){var d=a&&typeof a=="object"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx";}return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue);},d;},p.easing={linear:function(a){return a;},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2;}},p.timers=[],p.fx=cZ.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1);}b.length||p.fx.stop();},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cO&&(cO=setInterval(p.fx.tick,p.fx.interval));},p.fx.interval=13,p.fx.stop=function(){clearInterval(cO),cO=null;},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem;}).length;});var c_=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b);});}var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(!l){return;}return(d=l.body)===k?p.offset.bodyOffset(k):(c=l.documentElement,p.contains(c,k)?(typeof k.getBoundingClientRect!="undefined"&&(j=k.getBoundingClientRect()),e=da(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j);},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c};},setOffset:function(a,b,c){var d=p.css(a,"position");d==="static"&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=(d==="absolute"||d==="fixed")&&p.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using" in b?b.using.call(a,j):e.css(j);}},p.fn.extend({position:function(){if(!this[0]){return;}var a=this[0],b=this.offsetParent(),c=this.offset(),d=c_.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left};},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c_.test(a.nodeName)&&p.css(a,"position")==="static"){a=a.offsetParent;}return a||e.body;});}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=da(a);if(f===b){return g?c in g?g[c]:g.document.documentElement[e]:a[e];}g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f;},a,e,arguments.length,null);};}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h);},c,g?e:b,g,null);};});}),a.jQuery=a.$=p,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p;});})(window);var JSON;if(!JSON){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}}());(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,g=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n);};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n){if(s&&n.forEach===s){n.forEach(t,e);}else{if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++){if(t.call(e,n[u],u,n)===r){return;}}}else{for(var a in n){if(w.has(n,a)&&t.call(e,n[a],a,n)===r){return;}}}}}};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i);}),e);};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h){return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);}if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0);}),!u){throw new TypeError(O);}return r;},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v){return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);}var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length;}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0);}),!u){throw new TypeError(O);}return r;},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0;}),e;},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n);}),e);},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return !t.call(r,n,e,u);},r);},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:g&&n.every===g?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r;}),!!u);};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0;}),!!u);};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:E(n,function(n){return n===t;});},w.invoke=function(n,t){var r=o.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r);});},w.pluck=function(n,t){return w.map(n,function(n){return n[t];});},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t){if(t[r]!==n[r]){return !1;}}return !0;});},w.findWhere=function(n,t){return w.where(n,t,!0);},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length){return Math.max.apply(Math,n);}if(!t&&w.isEmpty(n)){return -1/0;}var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a});}),e.value;},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length){return Math.min.apply(Math,n);}if(!t&&w.isEmpty(n)){return 1/0;}var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a});}),e.value;},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n;}),e;};var k=function(n){return w.isFunction(n)?n:function(t){return t[n];};};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)};}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0){return 1;}if(e>r||e===void 0){return -1;}}return n.index<t.index?-1:1;}),"value");};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t);}),u;};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r);});},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++;});},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o;}return i;},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[];},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length;},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t);},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t));},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0));},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t);},w.compact=function(n){return w.filter(n,w.identity);};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n);}),r;};w.flatten=function(n,t){return R(n,t,[]);},w.without=function(n){return w.difference(n,o.call(arguments,1));},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]));}),i;},w.union=function(){return w.uniq(c.apply(e,arguments));},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0;});});},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return !w.contains(t,n);});},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++){r[e]=w.pluck(n,""+e);}return r;},w.object=function(n,t){if(null==n){return{};}for(var r={},e=0,u=n.length;u>e;e++){t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];}return r;},w.indexOf=function(n,t,r){if(null==n){return -1;}var e=0,u=n.length;if(r){if("number"!=typeof r){return e=w.sortedIndex(n,t),n[e]===t?e:-1;}e=0>r?Math.max(0,u+r):r;}if(y&&n.indexOf===y){return n.indexOf(t,r);}for(;u>e;e++){if(n[e]===t){return e;}}return -1;},w.lastIndexOf=function(n,t,r){if(null==n){return -1;}var e=null!=r;if(b&&n.lastIndexOf===b){return e?n.lastIndexOf(t,r):n.lastIndexOf(t);}for(var u=e?r:n.length;u--;){if(n[u]===t){return u;}}return -1;},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;){i[u++]=n,n+=r;}return i;},w.bind=function(n,t){if(n.bind===j&&j){return j.apply(n,o.call(arguments,1));}var r=o.call(arguments,2);return function(){return n.apply(t,r.concat(o.call(arguments)));};},w.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)));};},w.bindAll=function(n){var t=o.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n);}),n;},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments);};},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r);},t);},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)));},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e);};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i;};},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a));},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u;};},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t);};},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r);};},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--){t=[n[r].apply(this,t)];}return t[0];};},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0;};},w.keys=_||function(n){if(n!==Object(n)){throw new TypeError("Invalid object");}var t=[];for(var r in n){w.has(n,r)&&(t[t.length]=r);}return t;},w.values=function(n){var t=[];for(var r in n){w.has(n,r)&&t.push(n[r]);}return t;},w.pairs=function(n){var t=[];for(var r in n){w.has(n,r)&&t.push([r,n[r]]);}return t;},w.invert=function(n){var t={};for(var r in n){w.has(n,r)&&(t[n[r]]=r);}return t;},w.functions=w.methods=function(n){var t=[];for(var r in n){w.isFunction(n[r])&&t.push(r);}return t.sort();},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t){for(var r in t){n[r]=t[r];}}}),n;},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r]);}),t;},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n){w.contains(r,u)||(t[u]=n[u]);}return t;},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t){for(var r in t){null==n[r]&&(n[r]=t[r]);}}}),n;},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n;},w.tap=function(n,t){return t(n),n;};var I=function(n,t,r,e){if(n===t){return 0!==n||1/n==1/t;}if(null==n||null==t){return n===t;}n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t)){return !1;}switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return +n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase;}if("object"!=typeof n||"object"!=typeof t){return !1;}for(var i=r.length;i--;){if(r[i]==n){return e[i]==t;}}r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length){for(;a--&&(o=I(n[a],t[a],r,e));){}}}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f)){return !1;}for(var s in n){if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&I(n[s],t[s],r,e)))){break;}}if(o){for(s in t){if(w.has(t,s)&&!a--){break;}}o=!a;}}return r.pop(),e.pop(),o;};w.isEqual=function(n,t){return I(n,t,[],[]);},w.isEmpty=function(n){if(null==n){return !0;}if(w.isArray(n)||w.isString(n)){return 0===n.length;}for(var t in n){if(w.has(n,t)){return !1;}}return !0;},w.isElement=function(n){return !(!n||1!==n.nodeType);},w.isArray=x||function(n){return"[object Array]"==l.call(n);},w.isObject=function(n){return n===Object(n);},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]";};}),w.isArguments(arguments)||(w.isArguments=function(n){return !(!n||!w.has(n,"callee"));}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n;}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n));},w.isNaN=function(n){return w.isNumber(n)&&n!=+n;},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n);},w.isNull=function(n){return null===n;},w.isUndefined=function(n){return n===void 0;},w.has=function(n,t){return f.call(n,t);},w.noConflict=function(){return n._=t,this;},w.identity=function(n){return n;},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++){e[u]=t.call(r,u);}return e;},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1));};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=w.invert(M.escape);var S={escape:RegExp("["+w.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(M.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(S[n],function(t){return M[n][t];});};}),w.result=function(n,t){if(null==n){return null;}var r=n[t];return w.isFunction(r)?r.call(n):r;},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n));};});};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t;},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(B,function(n){return"\\"+q[n];}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t;}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=Function(r.variable||"obj","_",a);}catch(o){throw o.source=a,o;}if(t){return e(t,w);}var c=function(n){return e.call(this,n,w);};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c;},w.chain=function(n){return w(n).chain();};var D=function(n){return this._chain?w(n).chain():n;};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r);};}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments));};}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this;},value:function(){return this._wrapped;}});}).call(this);(function(){var l=this,y=l.Backbone,z=Array.prototype.slice,A=Array.prototype.splice,g;g="undefined"!==typeof exports?exports:l.Backbone={};g.VERSION="0.9.2";var f=l._;!f&&"undefined"!==typeof require&&(f=require("underscore"));var i=l.jQuery||l.Zepto||l.ender;g.setDomLibrary=function(a){i=a;};g.noConflict=function(){l.Backbone=y;return this;};g.emulateHTTP=!1;g.emulateJSON=!1;var p=/\s+/,k=g.Events={on:function(a,b,c){var d,e,f,g,j;if(!b){return this;}a=a.split(p);for(d=this._callbacks||(this._callbacks={});e=a.shift();){f=(j=d[e])?j.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:j?j.next:f};}return this;},off:function(a,b,c){var d,e,h,g,j,q;if(e=this._callbacks){if(!a&&!b&&!c){return delete this._callbacks,this;}for(a=a?a.split(p):f.keys(e);d=a.shift();){if(h=e[d],delete e[d],h&&(b||c)){for(g=h.tail;(h=h.next)!==g;){if(j=h.callback,q=h.context,b&&j!==b||c&&q!==c){this.on(d,j,q);}}}}return this;}},trigger:function(a){var b,c,d,e,f,g;if(!(d=this._callbacks)){return this;}f=d.all;a=a.split(p);for(g=z.call(arguments,1);b=a.shift();){if(c=d[b]){for(e=c.tail;(c=c.next)!==e;){c.callback.apply(c.context||this,g);}}if(c=f){e=c.tail;for(b=[b].concat(g);(c=c.next)!==e;){c.callback.apply(c.context||this,b);}}}return this;}};k.bind=k.on;k.unbind=k.off;var o=g.Model=function(a,b){var c;a||(a={});b&&b.parse&&(a=this.parse(a));if(c=n(this,"defaults")){a=f.extend({},c,a);}b&&b.collection&&(this.collection=b.collection);this.attributes={};this._escapedAttributes={};this.cid=f.uniqueId("c");this.changed={};this._silent={};this._pending={};this.set(a,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=f.clone(this.attributes);this.initialize.apply(this,arguments);};f.extend(o.prototype,k,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes);},get:function(a){return this.attributes[a];},escape:function(a){var b;if(b=this._escapedAttributes[a]){return b;}b=this.get(a);return this._escapedAttributes[a]=f.escape(null==b?"":""+b);},has:function(a){return null!=this.get(a);},set:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c||(c={});if(!d){return this;}d instanceof o&&(d=d.attributes);if(c.unset){for(e in d){d[e]=void 0;}}if(!this._validate(d,c)){return !1;}this.idAttribute in d&&(this.id=d[this.idAttribute]);var b=c.changes={},h=this.attributes,g=this._escapedAttributes,j=this._previousAttributes||{};for(e in d){a=d[e];if(!f.isEqual(h[e],a)||c.unset&&f.has(h,e)){delete g[e],(c.silent?this._silent:b)[e]=!0;}c.unset?delete h[e]:h[e]=a;!f.isEqual(j[e],a)||f.has(h,e)!=f.has(j,e)?(this.changed[e]=a,c.silent||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e]);}c.silent||this.change(c);return this;},unset:function(a,b){(b||(b={})).unset=!0;return this.set(a,null,b);},clear:function(a){(a||(a={})).unset=!0;return this.set(f.clone(this.attributes),a);},fetch:function(a){var a=a?f.clone(a):{},b=this,c=a.success;a.success=function(d,e,f){if(!b.set(b.parse(d,f),a)){return !1;}c&&c(b,d);};a.error=g.wrapError(a.error,b,a);return(this.sync||g.sync).call(this,"read",this,a);},save:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c=c?f.clone(c):{};if(c.wait){if(!this._validate(d,c)){return !1;}e=f.clone(this.attributes);}a=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?a:c)){return !1;}var h=this,i=c.success;c.success=function(a,b,e){b=h.parse(a,e);if(c.wait){delete c.wait;b=f.extend(d||{},b);}if(!h.set(b,c)){return false;}i?i(h,a):h.trigger("sync",h,a,c);};c.error=g.wrapError(c.error,h,c);b=this.isNew()?"create":"update";b=(this.sync||g.sync).call(this,b,this,c);c.wait&&this.set(e,a);return b;},destroy:function(a){var a=a?f.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a);};if(this.isNew()){return d(),!1;}a.success=function(e){a.wait&&d();c?c(b,e):b.trigger("sync",b,e,a);};a.error=g.wrapError(a.error,b,a);var e=(this.sync||g.sync).call(this,"delete",this,a);a.wait||d();return e;},url:function(){var a=n(this,"urlRoot")||n(this.collection,"url")||t();return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id);},parse:function(a){return a;},clone:function(){return new this.constructor(this.attributes);},isNew:function(){return null==this.id;},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent){this._pending[c]=!0;}var d=f.extend({},a.changes,this._silent);this._silent={};for(c in d){this.trigger("change:"+c,this,this.get(c),a);}if(b){return this;}for(;!f.isEmpty(this._pending);){this._pending={};this.trigger("change",this,a);for(c in this.changed){!this._pending[c]&&!this._silent[c]&&delete this.changed[c];}this._previousAttributes=f.clone(this.attributes);}this._changing=!1;return this;},hasChanged:function(a){return !arguments.length?!f.isEmpty(this.changed):f.has(this.changed,a);},changedAttributes:function(a){if(!a){return this.hasChanged()?f.clone(this.changed):!1;}var b,c=!1,d=this._previousAttributes,e;for(e in a){if(!f.isEqual(d[e],b=a[e])){(c||(c={}))[e]=b;}}return c;},previous:function(a){return !arguments.length||!this._previousAttributes?null:this._previousAttributes[a];},previousAttributes:function(){return f.clone(this._previousAttributes);},isValid:function(){return !this.validate(this.attributes);},_validate:function(a,b){if(b.silent||!this.validate){return !0;}var a=f.extend({},this.attributes,a),c=this.validate(a,b);if(!c){return !0;}b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b);return !1;}});var r=g.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,{silent:!0,parse:b.parse});};f.extend(r.prototype,k,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a);});},add:function(a,b){var c,d,e,g,i,j={},k={},l=[];b||(b={});a=f.isArray(a)?a.slice():[a];c=0;for(d=a.length;c<d;c++){if(!(e=a[c]=this._prepareModel(a[c],b))){throw Error("Can't add an invalid model to a collection");}g=e.cid;i=e.id;j[g]||this._byCid[g]||null!=i&&(k[i]||this._byId[i])?l.push(c):j[g]=k[i]=e;}for(c=l.length;c--;){a.splice(l[c],1);}c=0;for(d=a.length;c<d;c++){(e=a[c]).on("all",this._onModelEvent,this),this._byCid[e.cid]=e,null!=e.id&&(this._byId[e.id]=e);}this.length+=d;A.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(b.silent){return this;}c=0;for(d=this.models.length;c<d;c++){if(j[(e=this.models[c]).cid]){b.index=c,e.trigger("add",e,this,b);}}return this;},remove:function(a,b){var c,d,e,g;b||(b={});a=f.isArray(a)?a.slice():[a];c=0;for(d=a.length;c<d;c++){if(g=this.getByCid(a[c])||this.get(a[c])){delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);}}return this;},push:function(a,b){a=this._prepareModel(a,b);this.add(a,b);return a;},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b;},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:0},b));return a;},shift:function(a){var b=this.at(0);this.remove(b,a);return b;},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a];},getByCid:function(a){return a&&this._byCid[a.cid||a];},at:function(a){return this.models[a];},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a){if(a[c]!==b.get(c)){return !1;}}return !0;});},sort:function(a){a||(a={});if(!this.comparator){throw Error("Cannot sort a set without a comparator");}var b=f.bind(this.comparator,this);1==this.comparator.length?this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("reset",this,a);return this;},pluck:function(a){return f.map(this.models,function(b){return b.get(a);});},reset:function(a,b){a||(a=[]);b||(b={});for(var c=0,d=this.models.length;c<d;c++){this._removeReference(this.models[c]);}this._reset();this.add(a,f.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this;},fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d,e,f){b[a.add?"add":"reset"](b.parse(d,f),a);c&&c(b,d);};a.error=g.wrapError(a.error,b,a);return(this.sync||g.sync).call(this,"read",this,a);},create:function(a,b){var c=this,b=b?f.clone(b):{},a=this._prepareModel(a,b);if(!a){return !1;}b.wait||c.add(a,b);var d=b.success;b.success=function(e,f){b.wait&&c.add(e,b);d?d(e,f):e.trigger("sync",a,f,b);};a.save(null,b);return a;},parse:function(a){return a;},chain:function(){return f(this.models).chain();},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={};},_prepareModel:function(a,b){b||(b={});a instanceof o?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1));return a;},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this);},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments));}});f.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(a){r.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)));};});var u=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments);},B=/:\w+/g,C=/\*\w+/g,D=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(u.prototype,k,{initialize:function(){},route:function(a,b,c){g.history||(g.history=new m);f.isRegExp(a)||(a=this._routeToRegExp(a));c||(c=this[b]);g.history.route(a,f.bind(function(d){d=this._extractParameters(a,d);c&&c.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));g.history.trigger("route",this,b,d);},this));return this;},navigate:function(a,b){g.history.navigate(a,b);},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes){a.unshift([b,this.routes[b]]);}b=0;for(var c=a.length;b<c;b++){this.route(a[b][0],a[b][1],this[a[b][1]]);}}},_routeToRegExp:function(a){a=a.replace(D,"\\$&").replace(B,"([^/]+)").replace(C,"(.*?)");return RegExp("^"+a+"$");},_extractParameters:function(a,b){return a.exec(b).slice(1);}});var m=g.History=function(){this.handlers=[];f.bindAll(this,"checkUrl");},s=/^[#\/]/,E=/msie [\w.]+/;m.started=!1;f.extend(m.prototype,k,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:"";},getFragment:function(a,b){if(null==a){if(this._hasPushState||b){var a=window.location.pathname,c=window.location.search;c&&(a+=c);}else{a=this.getHash();}}a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(s,"");},start:function(a){if(m.started){throw Error("Backbone.history has already been started");}m.started=!0;this.options=f.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=E.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b)){this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);}this._hasPushState?i(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange" in window&&!b?i(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=window.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b){return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;}this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=this.getHash().replace(s,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent){return this.loadUrl();}},stop:function(){i(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1;},route:function(a,b){this.handlers.unshift({route:a,callback:b});},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment){return !1;}this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash());},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,function(a){if(a.route.test(b)){return a.callback(b),!0;}});},navigate:function(a,b){if(!m.started){return !1;}if(!b||!0===b){b={trigger:b};}var c=(a||"").replace(s,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a));},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b;}});var v=g.View=function(a){this.cid=f.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents();},F=/^(\S+)\s*(.*)$/,w="model,collection,el,id,attributes,className,tagName".split(",");f.extend(v.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a);},initialize:function(){},render:function(){return this;},remove:function(){this.$el.remove();return this;},make:function(a,b,c){a=document.createElement(a);b&&i(a).attr(b);c&&i(a).html(c);return a;},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof i?a:i(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this;},delegateEvents:function(a){if(a||(a=n(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c){throw Error('Method "'+a[b]+'" does not exist');}var d=b.match(F),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c);}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid);},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=w.length;b<c;b++){var d=w[b];a[d]&&(this[d]=a[d]);}this.options=a;},_ensureElement:function(){if(this.el){this.setElement(this.el,!1);}else{var a=n(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1);}}});o.extend=r.extend=u.extend=v.extend=function(a,b){var c=G(this,a,b);c.extend=this.extend;return c;};var H={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=H[a];c||(c={});var e={type:d,dataType:"json"};c.url||(e.url=n(b,"url")||t());if(!c.data&&b&&("create"==a||"update"==a)){e.contentType="application/json",e.data=JSON.stringify(b.toJSON());}g.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{});if(g.emulateHTTP&&("PUT"===d||"DELETE"===d)){g.emulateJSON&&(e.data._method=d),e.type="POST",e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);};}"GET"!==e.type&&!g.emulateJSON&&(e.processData=!1);return i.ajax(f.extend(e,c));};g.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d;a?a(b,e,c):b.trigger("error",b,e,c);};};var x=function(){},G=function(a,b,c){var d;d=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments);};f.extend(d,a);x.prototype=a.prototype;d.prototype=new x;b&&f.extend(d.prototype,b);c&&f.extend(d,c);d.prototype.constructor=d;d.__super__=a.prototype;return d;},n=function(a,b){return !a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b];},t=function(){throw Error('A "url" property or function must be specified');};}).call(this);var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)];}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac};}(),k=function(){if(!M.w3){return;}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f();}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false);}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f();}});if(O==top){(function(){if(J){return;}try{j.documentElement.doScroll("left");}catch(X){setTimeout(arguments.callee,0);return;}f();})();}}if(M.wk){(function(){if(J){return;}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return;}f();})();}s(f);}}();function f(){if(J){return;}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z);}catch(aa){return;}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]();}}function K(X){if(J){X();}else{U[U.length]=X;}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false);}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false);}else{if(typeof O.attachEvent!=D){i(O,"onload",Y);}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y();};}else{O.onload=Y;}}}}}function h(){if(T){V();}else{H();}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)];}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return;}}X.removeChild(aa);Z=null;H();})();}else{H();}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa);}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class");}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align");}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value");}}P(ai,ah,Y,ab);}else{p(ae);if(ab){ab(aa);}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z;}ab(aa);}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y;}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z;}}}return X;}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312);}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null;}else{l=ae;Q=X;}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310";}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137";}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac;}else{ab.flashvars=ac;}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae);}else{setTimeout(arguments.callee,10);}})();}u(aa,ab,X);}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y);}else{setTimeout(arguments.callee,10);}})();}else{Y.parentNode.replaceChild(g(Y),Y);}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML;}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true));}}}}}return aa;}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X;}if(aa){if(typeof ai.id==D){ai.id=Y;}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae];}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"';}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"';}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />';}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id);}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac]);}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac]);}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab]);}}aa.parentNode.replaceChild(Z,aa);X=Z;}}return X;}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa);}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y);}else{setTimeout(arguments.callee,10);}})();}else{X.parentNode.removeChild(X);}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null;}}Y.parentNode.removeChild(Y);}}function c(Z){var X=null;try{X=j.getElementById(Z);}catch(Y){}return X;}function C(X){return j.createElement(X);}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y];}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false;}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return;}var aa=j.getElementsByTagName("head")[0];if(!aa){return;}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null;}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1];}G=X;}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y);}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"));}}}function w(Z,X){if(!m){return;}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y;}else{v("#"+Z,"visibility:"+Y);}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y;}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2]);}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa]);}for(var Y in M){M[Y]=null;}M=null;for(var X in swfobject){swfobject[X]=null;}swfobject=null;});}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false);}else{if(Z){Z({success:false,id:ab});}}},getObjectById:function(X){if(M.w3){return z(X);}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al];}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak];}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai];}else{am.flashvars=ai+"="+Z[ai];}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true);}X.success=true;X.ref=an;}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return;}else{w(ah,true);}}if(ac){ac(X);}});}else{if(ac){ac(X);}}},switchOffAutoHideShow:function(){m=false;},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]};},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X);}else{return undefined;}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y);}},removeSWF:function(X){if(M.w3){y(X);}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X);}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1];}if(aa==null){return L(Z);}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block";}}if(E){E(B);}}a=false;}}};}();var cj={};cj.VERSION="coreJS v.0.2.0";cj.TEST_MODE=false;cj.events={global_click:"click:body",change:"change"};cj.loadContent=function(container,contentPath,callback){container.load(contentPath,callback);};cj.stopSelect=function(){window.event.cancelBubble=true;window.event.returnValue=false;return false;};cj.bodyClick=function(){if(this.trigger){this.trigger(cj.events.global_click);}};cj.getObjectsByPropertyValue=function(obj,key,val){var objects=[];for(var i in obj){if(!obj.hasOwnProperty(i)){continue;}if(typeof obj[i]=="object"){objects=objects.concat(cj.getObjectsByPropertyValue(obj[i],key,val));}else{if(i==key&&obj[key]==val){objects.push(obj);}}}return objects;};cj.getFirstObjectByPropertyValue=function(obj,key,val){return cj.getObjectsByPropertyValue(obj,key,val)[0];};cj.round2=function(num){return Math.round(num*100)/100;};cj.printObject=function(obj){var output="";for(var property in obj){if(typeof obj[property]!="function"){output+=property+": "+obj[property]+"; ";}}return output;};if(window._&&window.Backbone){_.extend(cj,Backbone.Events);
/*!
 * Cross-Browser Split 1.1.1
 */
}var split;split=split||function(undef){var nativeSplit=String.prototype.split,compliantExecNpcg=/()??/.exec("")[1]===undef,self;self=function(str,separator,limit){if(Object.prototype.toString.call(separator)!=="[object RegExp]"){return nativeSplit.call(str,separator,limit);}var output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.extended?"x":"")+(separator.sticky?"y":""),lastLastIndex=0,separator=new RegExp(separator.source,flags+"g"),separator2,match,lastIndex,lastLength;str+="";if(!compliantExecNpcg){separator2=new RegExp("^"+separator.source+"$(?!\\s)",flags);}limit=limit===undef?-1>>>0:limit>>>0;while(match=separator.exec(str)){lastIndex=match.index+match[0].length;if(lastIndex>lastLastIndex){output.push(str.slice(lastLastIndex,match.index));if(!compliantExecNpcg&&match.length>1){match[0].replace(separator2,function(){for(var i=1;i<arguments.length-2;i++){if(arguments[i]===undef){match[i]=undef;}}});}if(match.length>1&&match.index<str.length){Array.prototype.push.apply(output,match.slice(1));}lastLength=match[0].length;lastLastIndex=lastIndex;if(output.length>=limit){break;}}if(separator.lastIndex===match.index){separator.lastIndex++;}}if(lastLastIndex===str.length){if(lastLength||!separator.test("")){output.push("");}}else{output.push(str.slice(lastLastIndex));}return output.length>limit?output.slice(0,limit):output;};String.prototype.split=function(separator,limit){return self(this,separator,limit);};return self;}();cj.commission={};cj.commission.CommissionUtils={getCommisSumm:function(value,profiles){if(!profiles||isNaN(value)||(value==0)){return 0;}for(var i=0;i<profiles.length;i++){var profile=profiles[i];if((isNaN(profile.from)||value>=profile.from)&&(isNaN(profile.to)||value<=profile.to)){var tempSum=isNaN(profile.percent)?0:(value*(profile.percent/100));if(!isNaN(profile.fix)){tempSum+=profile.fix;}if(!isNaN(profile.min)&&(tempSum<profile.min)&&(profile.min>0)){return profile.min;}if(!isNaN(profile.max)&&(tempSum>profile.max)&&(profile.max>0)){return profile.max;}return tempSum;}}return 0;},convert:function(obj){var result={};if(!obj){console.log("no obj");return result;}if(obj.max_commission){result.max=obj.max_commission;}if(obj.min_commission){result.min=obj.min_commission;}if(obj.commission){result.percent=obj.commission;}if(obj.commision){result.percent=obj.commision;}return result;}};cj.commission.ComissionProfile=function(from,to,percent,min,max,fix,isDefaultProfile){this.isDefaultProfile=!!isDefaultProfile;this.from=from;this.to=to;this.percent=percent;this.min=min;this.max=max;this.fix=fix;this.goodFor=function(sum){return sum>=this.from&&sum<=this.to;};this.countCommis=function(toSum){if(this.goodFor(toSum)){var s=0;if(!isNaN(this.percent)){s=toSum*this.percent/100;}if(!isNaN(this.fix)){s+=this.fix;}if(!isNaN(this.min)&&s<this.min){s=this.min;}if(!isNaN(this.max)&&s>this.max){s=this.max;}return s;}return 0;};this.hasMin=function(){return this.min;};this.hasMax=function(){return this.max;};this.hasFix=function(){return this.fix;};this.hasMinOrMax=function(){return this.hasMax()||this.hasMin();};this.hasMinAndMax=function(){return this.hasMin()&&this.hasMax();};this.hasPercent=function(){return this.percent;};this.isZero=function(){return !(this.percent||this.fix);};this.fromOrZero=function(){return this.from?this.from:0;};this.getToOrMaxSum=function(maxSum){return this.to?this.to:maxSum;};};cj.commission.ComissionInfo=function(){this.stringFactory=new cj.commission.CommStringFactory();this.humanReadableProfilesLines=function(){var self=this;return _.map(this.profiles,function(itm){return self.stringFactory.make(itm).join(": ");});};this.profilesAndCommissions=function(){var self=this;return _.map(this.profiles,function(itm){return self.stringFactory.make(itm);});};this.humanReadableProfilesString=function(){return this.humanReadableProfilesLines.join("\n");};};cj.commission.CommStringFactory=function(){this.MAX_SUM=14999;this.currency=".";this.make=function(prof){var res=["",""];if(prof.isDefaultProfile){res[0]="  ";res[1]=prof.percent+" %";}else{res[0]=" "+prof.fromOrZero()+"  "+prof.getToOrMaxSum(this.MAX_SUM)+" "+this.currency;if(prof.isZero()){res[1]="0 %";}else{if(prof.percent){res[1]=prof.percent+" %";if(prof.hasFix()){res[1]+=" + "+prof.fix+" "+this.currency;}}else{res[1]=prof.fix+" "+this.currency;}}if(prof.hasMinOrMax()){res[1]+=",  ";}if(prof.hasMin()){res[1]+="  "+prof.min+" "+this.currency;}if(prof.hasMinAndMax()){res[1]+=",  ";}if(prof.hasMax()){res[1]+="  "+prof.max+" "+this.currency;}}return res;};};cj.commission.CommissionProfilesParser={parseCurrentProfile:function(cms){var res;if(cms.getElementsByTagName("profile").length){res=this.getProf(cms.getElementsByTagName("profile")[0]);}else{if(cms.getElementsByTagName("def").length){res=new cj.commission.ComissionProfile(0,Number.POSITIVE_INFINITY,Number(cms.getElementsByTagName("def")[0].toString()),Number.NaN,Number.NaN,Number.NaN,true);}}return res;},getProf:function(itm){return new cj.commission.ComissionProfile(this.getValueOrNaN(itm.getAttribute("from")),this.getValueOrNaN(itm.getAttribute("to")),this.getValueOrNaN(itm.getAttribute("percent")),this.getValueOrNaN(itm.getAttribute("min")),this.getValueOrNaN(itm.getAttribute("max")),this.getValueOrNaN(itm.getAttribute("fix")));},parse:function(cms){var _comProf=[];var fix=Number.NaN;var cInfo=new cj.commission.ComissionInfo();cInfo.prvId=cms.getAttribute("id").toString();for(var i=0;i<cms.childNodes.length;i++){var itm=cms.childNodes[i];switch(itm.nodeName.toString()){case"def":fix=Number(itm.childNodes[0].nodeValue);break;case"profile":_comProf.push(this.getProf(itm));break;}}if(!isNaN(fix)||_comProf.length==0){_comProf.push(new cj.commission.ComissionProfile(0,Number.POSITIVE_INFINITY,isNaN(fix)?0:fix,Number.NaN,Number.NaN,Number.NaN,true));}cInfo.profiles=_comProf;return cInfo;},getValueOrNaN:function(x){if(x){return x.length?Number(x):Number.NaN;}return Number.NaN;}};cj.log={};cj.LOG_ENABLED=false;cj.log.isVisible=false;cj.log.$log=jQuery("#log");cj.log.show=function(){cj.log.$log.css("display","block");cj.log.isVisible=true;};cj.log.hide=function(){cj.log.$log.css("display","none");cj.log.isVisible=false;};cj.log.init=function(){$(document.body).attr("tabIndex",1).on("keyup",function(e){if(e.keyCode.toString()=="76"){cj.log.isVisible?cj.log.hide():cj.log.show();}});};cj.log.l=function(text){if(cj.LOG_ENABLED){this.$log.append(text+"<br/>");}};cj.log.clear=function(){this.$log.text("");};cj.USE_JS_SESSION=false;cj.session={js_session:{},isNoU:function(value){return(value==undefined||value==null);},sizeOf:function(obj){var counter=0;if(!this.isNoU(obj)){for(var f in obj){if(obj.hasOwnProperty(f)){counter++;}}}return counter;},isString:function(o){return $.type(o)==="string";},serialize:function(o){var sResult="";switch($.type(o)){case"array":sResult="[";for(var i=0;i<o.length;i++){sResult+=this.serialize(o[i])+",";}if(sResult.length>1){sResult=sResult.substr(0,sResult.length-1);}sResult+="]";return sResult;break;case"string":return'"'+o.replace(/\\/g,"\\\\").replace(new RegExp('"',"g"),'\\"')+'"';break;case"number":case"boolean":return o.toString();break;case"date":return'new Date("'+o.toString()+'")';break;default:sResult="{";for(var field in o){if(o.hasOwnProperty(field)&&o[field]&&o!=this[field]&&!($.type(o[field])==="function")){sResult+='"'+field+'" : '+this.serialize(o[field])+",";}}if(sResult.length>1){sResult=sResult.substr(0,sResult.length-1);}sResult+="}";return sResult;break;}},deserialize:function(sSerializedObj){if(this.isNoU(sSerializedObj)||!(this.isString(sSerializedObj)&&sSerializedObj.length)){return null;}var o=null;try{eval("o = ("+sSerializedObj+")");}catch(e){return null;}return o;},set:function(sName,sValue){if(!this.isNoU(sName)&&this.isString(sName)){if(cj.USE_JS_SESSION){this.js_session[escape(sName)]=sValue;return;}if(this.isNoU(sValue)||!this.isString(sValue)){sValue="null";}var oStorage=this.deserialize(window.name);if(this.isNoU(oStorage)){oStorage={};}oStorage[escape(sName)]=sValue;window.name=this.serialize(oStorage);}},remove:function(sName){if(cj.USE_JS_SESSION&&!this.isNoU(sName)&&this.isString(sName)){delete this.js_session[escape(sName)];return;}var oStorage=this.deserialize(window.name);if(!this.isNoU(oStorage)){if(!this.isNoU(sName)&&this.isString(sName)){delete oStorage[escape(sName)];if(this.sizeOf(oStorage)){window.name=this.serialize(oStorage);}else{window.name="";}}}},get:function(sName){if(cj.USE_JS_SESSION&&!this.isNoU(sName)&&this.isString(sName)){return this.js_session[escape(sName)];}var sResult=null;var oStorage=this.deserialize(window.name);if(!this.isNoU(oStorage)){if(!this.isNoU(sName)&&this.isString(sName)){sName=escape(sName);if(!this.isNoU(oStorage[sName])&&this.isString(oStorage[sName])){sResult=oStorage[sName];}}}return sResult;},clear:function(){this.js_session={};window.name="";},show:function(){var sResult="Session info:\n\n";if(cj.USE_JS_SESSION){for(var f in this.js_session){if(this.js_session.hasOwnProperty(f)){sResult+=f+": "+this.js_session[f]+"\n\n";}}}else{var oStorage=this.deserialize(window.name);if(!this.isNoU(oStorage)){for(var f in oStorage){if(oStorage.hasOwnProperty(f)){sResult+=f+": "+oStorage[f]+"\n\n";}}}}alert(sResult);}};if(window.waitsForSession){for(var i=0;i<window.waitsForSession.length;i++){cj.session.set(window.waitsForSession[i].key,window.waitsForSession[i].value);}}cj.maratl={TEST_MODE_ON:function(){},onResponse:function(key,value){cj.log.l(_.escape(key+"="+value+" <--"));this.trigger(cj.maratl.events.response,key,value);},send:function(key,value){cj.log.l(_.escape("--> "+key+"="+value));document.Maratl.ProcessCommand(key,value);},sendRequest:function(request){var commands=request.split("&");for(var i=0;i<commands.length;i++){var c=commands[i].split("=");cj.maratl.send(c[0],(c[1]?c[1]:""));}},events:{response:"response"}};_.extend(cj.maratl,Backbone.Events);if(window.waitsForMaratl){for(var i=0;i<window.waitsForMaratl.length;i++){cj.maratl.onResponse(window.waitsForMaratl[i].key,window.waitsForMaratl[i].value);}}cj.statistics={enterTime:null,_phone:"",_sum:"",init:function(){var t=cj.session.get("startUpTime");if(!t||t=="null"){this.enterTime=new Date().getTime();cj.session.set("startUpTime",this.enterTime.toString());}else{this.enterTime=Number(t);}this.value=cj.session.get("statistics")||"";},append:function(eventCode){if(!eventCode){return;}var currentTime=new Date().getTime();var millisSinceStartUp=Math.floor((currentTime-this.enterTime)/1000);if(this.value==""){this.value+=eventCode+":"+millisSinceStartUp.toString(32);}else{this.value+="|"+eventCode+":"+millisSinceStartUp.toString(32);}cj.session.set("statistics",this.value);},phone:function(val){if(val){this._phone=val;}return this._phone;},sum:function(val){if(val){this._sum=val;}return this._sum;}};cj.statistics.init();cj.timeout={_current:-1,DEFAULT_TIMEOUT:180000,clickResetEnabled:true,events:{timeout:"timeout"},reset:function(time){cj.timeout.turnOff();var t=(Number(time)||cj.timeout.DEFAULT_TIMEOUT);cj.timeout._current=setTimeout(function(){cj.timeout.trigger(cj.timeout.events.timeout);},t);},turnOff:function(){if(!(cj.timeout._current==-1)){clearTimeout(cj.timeout._current);}}};cj.on(cj.events.global_click,function(){if(cj.timeout.clickResetEnabled){cj.timeout.reset();}});_.extend(cj.timeout,Backbone.Events);cj.phoneCapacity={_u:"",_uE:"",_loaded:false,_error:false,_data:null,load:function(url,urlError){var self=this;this._u=url||"../phones.txt";this._uE=urlError||"../phones_er.txt";$.ajax({url:this._u,dataType:"text",data:{},success:function(data){self.parse(data);self._loaded=true;},error:function(){self.loadError();}});},loadError:function(){var self=this;$.ajax({url:this._uE,dataType:"text",data:{},success:function(data){self.parse(data);self._loaded=true;},error:function(){self._error=true;}});},parse:function(data){this._data=_.map(_.filter(data.split("|"),function(str){return str.length>0;}),function(str){return _.map(str.split(","),function(str){return Number(str);});});},prvId:function(phone){for(var i=0;i<this._data.length;i++){var p=this._data[i];if(p[0]<=phone&&p[1]>=phone){return p[2];}}return -1;}};cj.phoneCapacity.load();cj.views={mixins:{},events:{action:"action",popup:"popup",preloader:"preloader",click:"click"}};cj.maratl.codes={};(function(c){c.PrtStatus="PrtStatus";c.TermID="TermID";c.StartParam="StartParam";c.Balance="Balance";c.PrvAllow="PrvAllow";c.PrvDenied="PrvDenied";c.ValOn="ValOn";c.MinCash="MinCash";c.MinCashResult="MinCashResult";c.MaxCash="MaxCash";c.ValOff="ValOff";c.ValTimeout="ValTimeout";c.ValAlert="ValAlert";c.PaySumm="PaySumm";c.PaySumm2="PaySumm2";c.CashSumm="CashSumm";c.CommProfileLine="CommProfileLine";c.CommProfileLine2="CommProfileLine2";c.CommisSumm="CommisSumm";c.CommisSumm2="CommisSumm2";c.FiscalReceipt="FiscalReceipt";c.PaySuccess="PaySuccess";c.GetTermID="GetTermID";c.GetBalance="GetBalance";c.GetCommis="GetCommis";c.GetStartParam="GetStartParam";c.GetPrtStatus="GetPrtStatus";c.Validator="Validator";c.CreatePay="CreatePay";})(cj.maratl.codes);cj.maratl.payments={};cj.maratl.payments.PaymentBase=Backbone.Model.extend({_valOnProperties:null,_valAlertProperties:null,_collectingValOn:false,_collectingValAlert:false,isValidatorOn:false,defaults:{},initialize:function(payment_options){for(var key in payment_options){if(payment_options[key].value){this.set(key,payment_options[key].value);}else{if(payment_options[key].key){this.set(key,cj.session.get(payment_options[key].key));}}}},destroy:function(){cj.maratl.off(cj.maratl.events.response,this.onMaratlResponse,this);},startCollectingValOn:function(){this._collectingValOn=true;this._valOnProperties={};_.delay(this.stopCollectingValOn,1000,this);},stopCollectingValOn:function(self){self._collectingValOn=false;self.trigger("validator:on",self._valOnProperties);},startCollectingValAlert:function(){this._collectingValAlert=true;this._valAlertProperties={};_.delay(this.stopCollectingValAlert,1000,this);},stopCollectingValAlert:function(self){self._collectingValAlert=false;self.trigger("validator:alert",self._valAlertProperties);},onMaratlResponse:function(key,value){var c=cj.maratl.codes;switch(key){case c.ValOn:this.isValidatorOn=true;case c.MinCash:case c.MaxCash:if(!this._collectingValOn){this.startCollectingValOn();}this._valOnProperties[key]=value;return true;case c.ValOff:this.isValidatorOn=false;this.trigger("validator:off",{ValOff:value});return;case c.ValTimeout:this.trigger("validator:timeout",{ValTimeout:value});return;case c.MinCashResult:this.trigger("validator:min_cash_result",{MinCashResult:value});return;case c.ValAlert:case c.PaySumm:case c.PaySumm2:case c.CashSumm:case c.CommProfileLine:case c.CommProfileLine2:case c.CommisSumm:case c.CommisSumm2:if(!this._collectingValAlert){this.startCollectingValAlert();}this._valAlertProperties[key]=value;return true;case c.FiscalReceipt:this.trigger("receipt",{FiscalReceipt:value});return true;case c.PaySuccess:this.trigger("paysuccess",{PaySuccess:value});return true;}},start:function(additionalParams){cj.maratl.on(cj.maratl.events.response,this.onMaratlResponse,this);cj.log.l("-----------subscription");var req=this.request(additionalParams);cj.maratl.sendRequest(req);_.delay(this.turnValidatorOn,500);},sendExtras:function(additionalParams){var req=this.prepareParams(additionalParams);cj.maratl.sendRequest(req);},turnValidatorOn:function(){cj.maratl.send(cj.maratl.codes.Validator,"on");},turnValidatorOff:function(){cj.maratl.send(cj.maratl.codes.Validator,"off");},createPay:function(){cj.maratl.send(cj.maratl.codes.CreatePay,"true");},prepareParams:function(obj){var k=[];for(var key in obj){k.push(key+"="+obj[key]);}return k.join("&");}});cj.maratl.payments.OneProvider=cj.maratl.payments.PaymentBase.extend({request:function(additionalParams){return"AccNum="+this.get("AccNum")+"&PrvId="+this.get("PrvId")+"&PrvName="+this.get("PrvName")+"&GetMinCash="+this.get("MinCashLimit")+"&_extra_ev_scode="+this.get("_extra_ev_scode")+"&_extra_comment="+this.get("_extra_comment")+"&_extra_ev_trm_id="+this.get("_extra_ev_trm_id")+"&"+this.prepareParams(additionalParams);}});cj.maratl.payments.Change=cj.maratl.payments.PaymentBase.extend({request:function(additionalParams){return"AccNum="+this.get("AccNum")+"&PrvId="+this.get("PrvId")+"&PrvName="+this.get("PrvName")+"&_extra_fixed_int_summ="+this.get("_extra_fixed_int_summ")+"&MinCashLimit="+this.get("MinCashLimit")+"&PrvId2="+this.get("PrvId2")+"&AccNum2="+this.get("AccNum2")+"&"+this.prepareParams(additionalParams);}});cj.maratl.onlines={};cj.maratl.onlines.XMLRequest=function(request){this._text=request;this.toString=function(){return this._text;};};cj.maratl.onlines.XMLResponse=function(data){this._data=data;this.findInNode=function(node,tag){for(var i=0;i<node.childNodes.length;i++){if(node.childNodes[i].nodeName==tag){return node.childNodes[i];}}for(var i=0;i<node.childNodes.length;i++){if(node.childNodes[i].nodeName!="#text"){var r=this.findInNode(node.childNodes[i],tag);if(r){return r;}}}return null;};this.find=function(tag){return this.findInNode(this._data,tag);};this.findValue=function(tag){return this.text(this.findInNode(this._data,tag));};this.text=function(node){var r=this.findInNode(node,"#text");return r.nodeValue;};this.resultCode=function(){return this.findValue("result-code");};this.connectionFail=function(){return(this.resultCode()=="600");};};cj.maratl.onlines.XMLOnline=function(request,startImmediately){this._triedFirst=false;this._urlsTried=-1;this._request=request;this.status="initial";this._timers={};this._urls=["https://w.qiwi.ru/term2/xmlutf.jsp","https://service1.osmp.ru/mylk/xmlutf.jsp","https://service2.osmp.ru/mylk/xmlutf.jsp"];this.processXMLDoc=function(data){this.response=new cj.maratl.onlines.XMLResponse(data);this.trigger("response",this.response);};this.timerOff=function(id){clearTimeout(id);this._timers[id].isOn=0;};this.timerOn=function(callback,time){var o={id:0,callback:callback,isOn:1};o.id=setTimeout(function(){o.callback();},time);this._timers[o.id]=o;return o.id;};this.success=function(data){cj.maratl.send("WriteToLog","response: "+data);var d='<?xml version="1.0" encoding="utf-8" ?>'+data;var xml=new ActiveXObject("Microsoft.XMLDOM");xml.async=false;xml.loadXML(d);var self=this;setTimeout(function(){self.processXMLDoc(xml);self.status="success";},100);};this.fail=function(){var self=this;if(!this._triedFirst){this._triedFirst=true;this._urlsTried--;}if(this._urlsTried==2){this.status="timeout";this.trigger("timeout");}else{setTimeout(function(){self.start();},300);}};this.start=function(timeout){var self=this;this.status="started";cj.timeout.reset();var t=this._triedFirst?timeout||30000:5000;var timerId=this.timerOn(function(){if(this.isOn==1){cj.timeout.reset();xhr.abort();}},t);var xhr=new window.ActiveXObject("Microsoft.XMLHTTP");var obj={xhr:xhr,id:timerId,callback:function(){if(self._timers[this.id].isOn==1){if(xhr.readyState==4){cj.timeout.reset();self.timerOff(this.id);if(xhr.status==200){self.success(xhr.responseText);}else{self.fail();}}}}};xhr.onreadystatechange=function(){obj.callback();};this._urlsTried++;var url=this._urls[this._urlsTried]||this._urls[0];cj.maratl.send("WriteToLog","url: "+url+", request: "+this._request.toString());xhr.open("POST",url,true);xhr.send(this._request.toString());};if(startImmediately){this.start();}};_.extend(cj.maratl.onlines.XMLOnline.prototype,Backbone.Events);cj.maratl.onlines.ERROR_CODES=[[0,"OK"],[1,"  "],[2,"  "],[3," ,    "],[4,"  /"],[5,"   "],[6,"  ,   "],[7,"  ,   "],[8,"     "],[9,"Timeout  "],[10," "],[12,"   "],[13," ,    "],[15,"        "],[16,"  "],[20," "],[71,"     "],[72,"    "],[73,"   "],[74,"    "],[75,"   "],[76,"  "],[77,"   "],[78,"    "],[79,"   "],[80,"VIP .   ."],[81,"   "],[82,"    "],[83,"     "],[84,"   ."],[85,"  "],[86,"   "],[90,"   "],[100,"  - JSP Error"],[101,"    "],[110,"  - PL/SQL Error"],[115,"PL/SQL -     "],[116,"   (   )"],[130,"     "],[133,"    "],[134,"  "],[135,"    "],[140,"   -  .  "],[141,"     "],[142,"   "],[150," "],[155,"     "],[200,"JSP -   R"],[201,"    , !!"],[202,"  "],[203,"     "],[209," "],[210,"    "],[211,"  "],[212,"    (  )"],[213,"   "],[215,"       "],[216,"     "],[220,"   "],[221,"     "],[222,"     "],[223,"       "],[230,"     "],[231,"  "],[232,"  "],[233,"    "],[234,"   "],[235," "],[236,"    "],[237,"   "],[238,"     "],[239," "],[240," "],[241,"  "],[242,"  "],[243,"   "],[244,"    "],[245,"  "],[246," PIN-"],[247,"     "],[249,"  "],[250," "],[251,"  "],[252,"  "],[260,":  "],[261,":  "],[262,": "],[270,"  "],[271,"   "],[272,"    "],[274,"     "],[275,"  "],[276,"!  !"],[278,"  "],[280,"    "],[290,"     "],[296," "],[297,"  "],[298,"    "],[299,"  "],[300," ()  "],[301,"  "],[302," "],[303,"  "],[304,"  "],[305,"     "],[306,"  "],[307,"   "],[308,"  "],[309,"   "],[310," "],[311,"  "],[312,"     "],[313,"    IP"],[314,"  CyberCheck (    )"],[315,"       "],[316,"  24 "],[317,"SMS  PIN-   "],[318,"     "],[319,"   "],[330," "],[331,"   "],[332,"  "],[333,"    "],[334,"  PIN"],[335,"     "],[336,"PIN "],[337,"  PIN-"],[338,"      .   ."],[339,"  IP-"],[340,"    "],[341," "],[342," "],[343," "],[344," "],[345,"  "],[346," ufs"],[347," concert.ru"],[348,"  "],[349," PIN-  "],[350," "],[351,"   "],[352,"    "],[353,"  "],[354,"   "],[355,"     1   "],[364," "],[365,"  "],[366,"    "],[367,"  "],[368,"   "],[402,"    "],[403,"   timeOut    "],[406,"    "],[407,"     "],[408,"     "],[410,"     "],[411,"     "],[412,"     "],[421,"       "],[450,"  -    "],[451,"  -       "],[452,"  -       "],[453,"  -      "],[454,"  -  -"],[455,"  -       "],[461," -,     "],[471,"       "],[472,"       "],[473,"      ,      "],[490,"    "],[500,"        .    , ,    "],[501,"    "],[502,"   "],[503,"  "],[504,"  "],[505,"  "],[506," /    "],[507,"  "],[509,"        .    , ,    "],[510,"  "],[511,"  "],[512,"  "],[519,"     "],[520,"  "],[521,"    "],[522,"      "],[523,"  "],[524,"  "],[525,"  "],[526,"  "],[527,"     "],[528,"    "],[529,"   "],[530," ,       "],[531,"    "],[532," a "],[533,"     "],[534,"   "],[535,"   "],[536,"   "],[537,"    "],[538,"     "],[539,"    oper_type"],[540,"  "],[541,"   . ,            "],[542,"   "],[543,"  "],[544,"  "],[545,"  "],[546,"  "],[547,"     "],[548,"    "],[549,"   "],[550,"  "],[551,"  "],[552,"  /    "],[553,"    "],[554,"   "],[555,"    "],[556,"        //"],[557,"  = 0"],[558,"    "],[559,"   "],[560,"   "],[561,"   "],[569,"     "],[571,"  / "],[572,"  "],[573,"      "],[574,"      "],[575,"      "],[576,"       "],[577,"       "],[578,"        "],[579,"        "],[580,"   "],[581,"  "],[589,"   .  "],[590,"   "],[591,"   "],[592,"    "],[599,"  "],[600,"   .    ."],[650,"    ,     "],[651,"   "],[652,"    "],[653,"  "],[654,"  "],[655,"   "],[656,"   .          0500 ( )"],[657,"     "],[658,"     "],[659,"       "],[660,"         "],[661,"   "],[662,"     "],[663,'      . ,       " "'],[664,"       "],[665,"    "],[666,"   . ,   -     0500 ( )"],[667,"        "],[668,'   "    "'],[700,"   "],[750,"  "],[751,"       "],[752,"    1    "],[753,"  "],[754,"       . ,   ."],[755,"    "],[756,"     "],[757,"     "],[758,"    "],[759,"    "],[760,"CVV2     "],[761,"      1 "],[762,"      1 "],[763,"       1 "],[764,"       1 "],[765,"       1 "],[766,"       1 "],[767,"      1 "],[768,"      1 "],[769,"        "],[770,"    .    "],[771,"     1   ."],[772,"   "],[773,"   ."],[774,"  "],[775,"   "],[776,"  "],[777,"  .  ."],[778,"  .  ."],[779,"  . 10   ."],[780,"   "],[781,"     "],[782,"     "],[783,"  "],[784," "],[785," "],[786,"  "],[787,"   "],[788,"     "],[789,"   "],[790," "],[791,"  "],[792,"   "],[793,"     "],[794,"    "],[795,"     "],[796," "],[797," "],[798,"    "],[799,"   "],[800,"   "],[801,"        "],[802,"  "],[803,"    "],[804,"   "],[805,"      "],[806,"       "],[807,"   ."],[808,"  ,      ."],[809,"   "],[810,"  ,     .    ."],[811,"   "],[812,"      "],[813,"      .    ."],[814,"    ()  "],[815,"    ."],[816,"         ( )."],[817,'     .      ""'],[818,'   .      ""'],[819,"   "],[850,"        "],[851," , ..   "],[860," "],[861,"  "],[862,"   "],[863,"     "],[864,"     ."],[888,"  ,   "],[889,"  "],[890,"  "],[891,"  "],[892,"  "],[893," "],[895,"    "],[896,"  "],[897,"   "],[900,"     "],[901,"    "],[902,"       SMS"],[903,"   "],[904,"   "],[905,",   "],[906," "],[907,"  "],[908," "],[909,"  "],[1000,"  "],[1004,"      "]];cj.maratl.onlines.STATUS_CODES=[[3,"   "],[5,"      "],[6,"   "],[9,"  SIP"],[10," "],[20,"  "],[25,""],[27," "],[28," "],[30,""],[31,"  "],[32,""],[35,"  2- "],[40,"   ."],[45,",   "],[48,"  "],[49,"  "],[50,""],[51,"(51)"],[52," "],[55,"    ..."],[56," R=2,      "],[57," "],[58,""],[59,"  "],[60,""],[61,""],[65," -, "],[66," ,  56"],[67," ,  ??"],[120,"    "],[125,"   "],[130,"  "],[140,"   .  ."],[148,"  (.)"],[149,"  (.)"],[150," "],[151," "],[152,"   52"],[155,"  "],[160," "],[161,"  ( )"],[166,"  VISA"]];cj.maratl.onlines.getErrorForStatus=function(code){for(var i=0;i<cj.maratl.onlines.STATUS_CODES.length;i++){if(cj.maratl.onlines.STATUS_CODES[i][0]==code){return cj.maratl.onlines.STATUS_CODES[i][1];}}return null;};cj.maratl.onlines.getErrorForCode=function(code){for(var i=0;i<cj.maratl.onlines.ERROR_CODES.length;i++){if(cj.maratl.onlines.ERROR_CODES[i][0]==code){return cj.maratl.onlines.ERROR_CODES[i][1];}}return null;};cj.views.AbstractView=Backbone.View.extend({$el:null,_model:null,initialize:function(options){this.$el=options.el;this._model=options.model;},isVisible:function(){return this.$el&&!(this.$el.hasClass("hidden"));},isEnabled:function(){return this.$el&&(!(this.$el.hasClass("disabled")));},hide:function(){this.$el&&this.$el.addClass("hidden");},show:function(){this.$el&&this.$el.removeClass("hidden");},enable:function(){this.$el&&this.$el.removeClass("disabled");},disable:function(){this.$el&&this.$el.addClass("disabled");},prepareOptions:function(options){var res=options;if(res==undefined){res={};}res.context=this;return res;},showPopup:function(options){options=this.prepareOptions(options);options.state="show";this.trigger(cj.views.events.popup,options);},hidePopup:function(options){options=this.prepareOptions(options);options.state="hide";this.trigger(cj.views.events.popup,options);},showPreloader:function(options){options=this.prepareOptions(options);options.state="show";options.text=options.text||this.model.get("preloader_text");this.trigger(cj.views.events.preloader,options);},stopPreloader:function(options){options=this.prepareOptions(options);options.state="stop";this.trigger(cj.views.events.preloader,options);},hidePreloader:function(options){options=this.prepareOptions(options);options.state="hide";this.trigger(cj.views.events.preloader,options);},clear:function(){},destroy:function(){this.clear();if(this.$el){this.$el.off();this.$el=null;}if(this._model){this._model=null;}}});cj.views.StatisticsView=cj.views.AbstractView.extend({GetDateTimeString:function(){var dat=new Date(),sMonth=(1+dat.getMonth()).toString(),sDate=dat.getDate().toString(),sHours=dat.getHours().toString(),sMinutes=dat.getMinutes().toString(),sSeconds=dat.getSeconds().toString();if(sMonth.length==1){sMonth="0"+sMonth;}if(sDate.length==1){sDate="0"+sDate;}if(sHours.length==1){sHours="0"+sHours;}if(sMinutes.length==1){sMinutes="0"+sMinutes;}if(sSeconds.length==1){sSeconds="0"+sSeconds;}return dat.getFullYear()+"-"+sMonth+"-"+sDate+" "+sHours+":"+sMinutes+":"+sSeconds;},initialize:function(options){if(cj.session.get("timeout_exit")=="true"){cj.statistics.append("X1");}else{cj.statistics.append("X0");}$("#_extra_MGT_date").val(this.GetDateTimeString());$("#_extra_MGT_path").val(cj.statistics.value);$("#_extra_MGT_sum").val(cj.session.get("payed_summ")||"0");$("#_extra_MGT_phone").val(cj.session.get("phone"));$("#_extra_MGT_ver").val(cj.APP_VERSION);$("#_extra_MGT_qk_id").val(cj.session.get("startParams")?cj.session.get("startParams").qkPrvId:"");$("#ff").submit();}});cj.views.TextField=cj.views.AbstractView.extend({_text:"",_maxChars:Number.MAX_VALUE,_textContainer:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);if(options.maxChars){this._maxChars=options.maxChars;}var container=this.$el.find(".text-container");this._textContainer=container[0]?container:$('<div class="text-container"></div>').appendTo(this.$el);},render:function(){this.$el.on("mousedown",{self:this},this.onClick);return this;},onClick:function(e){e.data.self.performClick();},text:function(value){if((value||value=="")&&value!=this._text&&value.length<=this._maxChars){this._text=value.toString();this._textContainer.html(value);}return this._text;},appendText:function(text){if(!text){return;}text=text.toString();if((this._text.length+text.length)<=this._maxChars){this.text(this._text+text);}},erase:function(){if(this._text.length){this.text(this._text.substr(0,this._text.length-1));}},performClick:function(){this.trigger(cj.views.events.click);},clear:function(){if(this.$el){this.$el.off();}},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);this._textContainer&&(this._textContainer=null);}});cj.Masker={charsUsed:-1,format:function(value,mask){return cj.Masker.formatWithPreparedMask(value,cj.Masker.prepareMask(mask));},formatWithPreparedMask:function(value,preparedMask){var res="";cj.Masker.charsUsed=0;for(var i=0;i<preparedMask.length;i++){if(preparedMask[i].charAt(0)=="$"){if(cj.Masker.charsUsed>=value.length){cj.Masker.charsUsed=-1;return res;}var curValue=value.substr(cj.Masker.charsUsed);var count=Number(preparedMask[i].substr(2));if(curValue.length<count){res+=curValue;cj.Masker.charsUsed=-1;return res;}else{res+=curValue.substr(0,count);cj.Masker.charsUsed+=count;}}else{res+=preparedMask[i];}}return res;},prepareMask:function(maskText){var arr=maskText.split(/(\\[dw]\{\d+\})/);arr[0]=arr[0].replace("^","");arr[arr.length-1]=arr[arr.length-1].replace("$","");return _.map(arr,function(item){return/(\\[dw]\{\d+\})/.test(item)?item.replace(/\\([dw])\{(\d+)\}/,"$$$1$2"):item;});}};cj.views.MaskedTextField=cj.views.TextField.extend({_value:"",_mask:null,_maskParts:[],initialize:function(options){cj.views.TextField.prototype.initialize.call(this,options);this._disableMask=!!options.disableMask;this._mask=options.mask;this._maskParts=cj.Masker.prepareMask(this._mask);cj.log.l(this._maskParts.join(","));},text:function(value){if(value||value==""){throw new Error("MaskedTextField text should be set via 'value' function");}return this._text;},value:function(value){if((value||value=="")&&value.length<=this._maxChars){this._value=value.toString();this._text=this._disableMask?this._value:this.format(this._value);this._textContainer.html(_.escape(this._text));}return this._value;},appendText:function(value){if(value&&(this._value.length+value.length)<=this._maxChars){this.value(this._value+value);}},erase:function(){if(this._value.length){this.value(this._value.substr(0,this._value.length-1));}},format:function(value){var res=cj.Masker.formatWithPreparedMask(value,this._maskParts);if(cj.Masker.charsUsed>0){this._value=this._value.substr(0,cj.Masker.charsUsed);}return res;}});cj.views.ExpirationDateTextField=cj.views.MaskedTextField.extend({_textContainer2:null,initialize:function(options){cj.views.MaskedTextField.prototype.initialize.call(this,options);this._textContainer2=this.$el.find(".text-container-2");},value:function(value){if((value||value=="")){if(value.length==1&&Number(value)>1){cj.views.MaskedTextField.prototype.value.call(this,"0"+value);}else{cj.views.MaskedTextField.prototype.value.call(this,value);}this._textContainer.html(this._text.substr(0,2));this._textContainer2.html(this._text.substr(2));}return this._value;},destroy:function(){cj.views.MaskedTextField.prototype.destroy.call(this);this._textContainer2&&(this._textContainer2=null);}});cj.views.FullDateTextField=cj.views.MaskedTextField.extend({_textContainer2:null,_textContainer3:null,initialize:function(options){cj.views.MaskedTextField.prototype.initialize.call(this,options);this._textContainer2=this.$el.find(".text-container-2");this._textContainer3=this.$el.find(".text-container-3");},value:function(value){if((value||value=="")){if(value.length==1&&Number(value)>3){cj.views.MaskedTextField.prototype.value.call(this,"0"+value);}else{if(this._value.length==2&&value.length==3&&Number(value.charAt(2))>1){cj.views.MaskedTextField.prototype.value.call(this,value.substr(0,2)+"0"+value.charAt(2));}else{cj.views.MaskedTextField.prototype.value.call(this,value);}}this._textContainer.html(this._text.substr(0,2));this._textContainer2.html(this._text.substr(2,2));this._textContainer3.html(this._text.substr(4));}return this._value;},destroy:function(){cj.views.MaskedTextField.prototype.destroy.call(this);this._textContainer2&&(this._textContainer2=null);this._textContainer3&&(this._textContainer3=null);}});cj.views.PasswordTextField=cj.views.MaskedTextField.extend({initialize:function(options){cj.views.MaskedTextField.prototype.initialize.call(this,_.extend(options,{mask:"^\\d{"+(options.model.get("maxChars")||10)+"}$"}));},value:function(value){if((value||value=="")&&value!=this._value&&value.length<=this._maxChars){this._value=value.toString();this._text=this.format(this._value).replace(/./g,"*");this._textContainer.html(this._text);}return this._value;}});cj.views.mixins.CombinedTextField={apply:function(view){view.$el.prepend('<div class="tf-l"></div><div class="tf-c"></div><div class="tf-r"></div>');}};cj.views.mixins.TextFieldWithPlaceholder={apply:function(view){var slash=view.$el.find(".slash");var placeholder=view.$el.find(".placeholder");var oldFunction=view.value;view.value=function(val){var res=oldFunction.call(view,val);slash.removeClass("hidden");view.text()?placeholder.addClass("hidden"):placeholder.removeClass("hidden");return res;};}};cj.views.PreloaderView=cj.views.AbstractView.extend({_preloaderText:null,_points:1,_preloaderAnimation:null,_preloaderStep:0,_animInterval:-1,_text:"",initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._text=options.text;this._preloaderText=this.$el.find(".preloader-text");this._preloaderAnimation=this.$el.find(".preloader-animation");},render:function(){var self=this;this._preloaderStep=0;this._points=1;this._animInterval=setInterval(function(){self.processPreloader();},100);},stop:function(){clearInterval(this._animInterval);},processPreloader:function(){var text=this._text;var p;if(this._preloaderStep%10==0){switch(this._points){case 1:p=".";this._points++;break;case 2:p="..";this._points++;break;case 3:p="...";this._points=1;break;}this._preloaderText.html(text+p);}var n=(this._preloaderStep%16)+1;if(n!=1){this._preloaderAnimation&&this._preloaderAnimation.css("background-image","url('../img/ui/corejs/loader/l"+n.toString()+".jpg')");}else{this._preloaderAnimation&&this._preloaderAnimation.css("background-image","none");}this._preloaderStep++;},clear:function(){this.stop();},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);this._preloaderText&&(this._preloaderText=null);this._preloaderAnimation&&(this._preloaderAnimation=null);}});cj.views.CashBlockView=cj.views.AbstractView.extend({_label:null,_value:null,_comment:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._label=this.$el.find(".label");this._value=this.$el.find(".value");this._comment=this.$el.find(".comment");},value:function(val){if(val||val==""){this._value.html(val);}return this._value.html();},label:function(val){if(val||val==""){this._label.html(val);}return this._label.html();},comment:function(val){if(val||val==""){this._comment.html(val);}return this._comment.html();},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);this._comment&&(this._comment=null);this._label&&(this._label=null);this._value&&(this._value=null);}});cj.views.CommissionInfoView=cj.views.AbstractView.extend({_profiles:null,_profStrings:null,_container:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._profiles=options.profiles.profilesAndCommissions();this._profStrings=[];this._container=this.$el.find("table");cj.maratl.on("response",this.onMaratlResponse,this);this.fillContainer();},fillContainer:function(){for(var i=0;i<this._profiles.length;i++){var prof=this._profiles[i];this._profStrings.push($('<tr class="commission-profile"><td>'+prof[0]+"</td><td>"+prof[1]+"</td></tr>").appendTo(this._container));}},setProfile:function(index){_.each(this._profStrings,function(item){item.addClass("commission-profile");item.removeClass("active-commission-profile");});this._profStrings[index-1].removeClass("commission-profile");this._profStrings[index-1].addClass("active-commission-profile");},onMaratlResponse:function(key,val){if(key=="CashSumm"){this._hasCash=(Number(val)>0);}if(key=="CommProfileLine"&&this._hasCash){this.setProfile(Number(val));}},label:function(val){if(val||val==""){this._label.html(val);}return this._label.html();},comment:function(val){if(val||val==""){this._comment.html(val);}return this._comment.html();},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);cj.maratl.off("response",this.onMaratlResponse,this);}});cj.views.Button=cj.views.AbstractView.extend({_$content:null,_$shadow:null,_content:null,_code:null,_isSlow:false,_timeout:400,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._$content=this.$el.find(".button-content");this._code=this.$el.data("code");if(!this._$content.length&&options.AUTO_CONTENT){this._$content=this.$el.prepend('<div class="button-content"></div>');}if(options.isSlow){this._isSlow=true;}this._$shadow=this.$el.find(".button-shadow");if(options.content){this.content(options.content);}if(options.code){this.code(options.code);}if(options.timeout){this._timeout=options.timeout;}},render:function(){this.$el.on("mousedown",{self:this},this.onMouseDown);return this;},onMouseDown:function(e){if(e.data.self.isEnabled()){e.data.self.performClick();}},code:function(link){if(link&&link.toString()){this._code=link.toString();this.$el.data("code",_.escape(link.toString()));}return this._code;},content:function(value){if(value){this._content=value;this._$content.html(_.escape(value));this._$shadow.html(_.escape(value));}return this._content;},performClick:function(){if(!this.$el){return;}var self=this;if(this._isSlow&&this.$el.hasClass("pressed")){return;}this.$el.addClass("pressed");setTimeout(function(){self.release();},this._timeout);},release:function(){this.$el&&this.$el.removeClass("pressed");this.trigger(cj.views.events.click,this.code());},clear:function(){if(this.$el){this.$el.off();this.$el.removeData();}},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);this._$content&&(this._$content=null);this._$shadow&&(this._$shadow=null);}});cj.views.PhoneTextField=cj.views.MaskedTextField.extend({initialize:function(options){cj.views.MaskedTextField.prototype.initialize.call(this,_.extend(options,{mask:"^8(\\d{3})\\d{3}-\\d{2}-\\d{2}$"}));},text:function(value){if(value){throw new Error("PhoneField text should be set via 'value' function");}return this._text;},value:function(value){if((value||value=="")&&value!=this._value&&value.length<=this._maxChars){var v=(value=="89"||value=="79")?"9":value.toString();this._value=v.toString();this._text=this.format(this._value);this._textContainer.html(this._text);}return this._value;}});cj.views.Numpad=cj.views.AbstractView.extend({_keys:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);},render:function(){this.clear();var self=this;this._keys=_.map([0,1,2,3,4,5,6,7,8,9],function(value){var b=new cj.views.Button({el:self.$el.find("#key-"+value)});b.render();b.on(cj.views.events.click,self.onKey,self);return b;});},onKey:function(code){this.trigger(cj.views.events.click,code);},clear:function(){if(this._keys){_.each(this._keys,function(item){item.clear();item.off();});}},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._keys){_.each(this._keys,function(item){item.destroy();});this._keys=null;}}});cj.views.Keyboard=cj.views.AbstractView.extend({_keys:null,_layout:null,_isShifted:true,_lang:0,_languages:["","eng"],_space:null,_shift:null,_langSwitch:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._keys=[];if(options.layout){this._layout=options.layout;}else{this._layout=cj.views.Keyboard.DEFAULT_LAYOUT;}if(options.languages){this._languages=options.languages;}else{this._languages=["","eng"];}this._lang=0;},createKeys:function(){for(var i=0;i<5;i++){this._keys[i]=[];for(var j=0;j<13;j++){var $k=this.$el.find("#key-"+i+"-"+j);var key=this.currentLayout()[i][j];if($k.length){var k=new cj.views.Button({el:$k,content:key.toUpperCase(),code:key.toUpperCase(),AUTO_CONTENT:true});k.render();k.on(cj.views.events.click,this.onKey,this);this._keys[i][j]=k;}}}},onKey:function(code){this.trigger(cj.views.events.click,code);this.updateKeys();},onShift:function(code){this._isShifted=!this._isShifted;this.updateKeys();},onLangSwitch:function(code){this.switchLang();this.updateKeys();},createSpace:function(){var $k=this.$el.find("#key-space");(this._space=new cj.views.Button({el:$k,code:" ",AUTO_CONTENT:true})).render();this._space.on(cj.views.events.click,this.onKey,this);},createShift:function(){var $k=this.$el.find("#key-shift");(this._shift=new cj.views.Button({el:$k,content:"Shift",AUTO_CONTENT:true})).render();this._shift.on(cj.views.events.click,this.onShift,this);},createLangSwitch:function(){var $k=this.$el.find("#key-langswitch");(this._langSwitch=new cj.views.Button({el:$k,content:this._languages[this.nextLang()].toUpperCase(),AUTO_CONTENT:true})).render();this._langSwitch.on(cj.views.events.click,this.onLangSwitch,this);},render:function(){this.clear();this.createKeys();this.createSpace();this.createShift();this.createLangSwitch();},currentLayout:function(){return this._layout[this._languages[this._lang]];},isShifted:function(value){this._isShifted=!!value;this.updateKeys();},nextLang:function(){return(this._lang<this._languages.length-1)?this._lang+1:0;},switchLang:function(){this._lang=this.nextLang();this._langSwitch.content(this._languages[this.nextLang()].toUpperCase());},updateKeys:function(){this.eachKey(this.updateK);},updateK:function(key,row,column){var c=this._layout[this._languages[this._lang]][row][column];c=this._isShifted?c.toUpperCase():c.toLowerCase();key.code(c);key.content(c);},eachKey:function(closure){if(this._keys&&closure){for(var i=0;i<this._keys.length;i++){var row=this._keys[i];for(var j=0;j<row.length;j++){closure.call(this,this._keys[i][j],i,j);}}}},clear:function(){if(this._keys){for(var i=0;i<5;i++){for(var j=0;j<13;j++){var item;if(this._keys[i]&&(item=this._keys[i][j])){item.clear();item.off();}}}}if(this._space){this._space.clear();this._space.off();}if(this._shift){this._shift.clear();this._shift.off();}if(this._langSwitch){this._langSwitch.clear();this._langSwitch.off();}},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._keys){for(var i=0;i<5;i++){for(var j=0;j<13;j++){var item;if(item=this._keys[i][j]){item.destroy();}}}this._keys=null;}if(this._space){this._space.destroy();this._space=null;}if(this._shift){this._shift.destroy();this._shift=null;}if(this._langSwitch){this._langSwitch.destroy();this._langSwitch=null;}}},{DEFAULT_LAYOUT:{"":[["","!",'"',"",";","%","?","*","(",")"],["","","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","-"],[".","/"]],eng:[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p","[","]"],["a","s","d","f","g","h","j","k","l",":","'"],["z","x","c","v","b","n","m","<",">",","],[".","/"]]}});cj.views.ToggleButton=cj.views.Button.extend({_isOn:false,toggleOn:function(cl){this._isOn=true;this.$el.addClass(cl||"toggled");},toggleOff:function(cl){this._isOn=false;this.$el.removeClass(cl||"toggled");},isOn:function(){return this._isOn;}});cj.views.RadioGroupView=cj.views.AbstractView.extend({_CL:"toggled",_buttons:null,_selectedButton:null,_selectedButtonIndex:-1,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);var self=this;this._buttons=_.map(options.elements,function(item){var b=new cj.views.ToggleButton({el:$(item),isSlow:true,timeout:100});b.on("click",self.onChange,self);return b;});if(options.toggleClass){this._CL=options.toggleClass;}},onChange:function(code){for(var i=0;i<this._buttons.length;i++){var b=this._buttons[i];if(b.code()==code){this.select(i);return;}}},select:function(index){for(var i=0;i<this._buttons.length;i++){var b=this._buttons[i];if(i==index){b.toggleOn(this._CL);this._selectedButton=b;this._selectedButtonIndex=i;}else{b.toggleOff(this._CL);}}this.trigger("change",this._selectedButtonIndex,this._selectedButton.code());},deselect:function(){this._selectedButton.toggleOff(this._CL);this._selectedButton=null;this._selectedButtonIndex=-1;this.trigger("change",this._selectedButtonIndex);},selectedButtonIndex:function(i){if((i!=-1)&&(i==0||i)){this.select(i);}else{if(i==-1){this.deselect();}}return this._selectedButtonIndex;},render:function(){_.each(this._buttons,function(item){item.render();});},clear:function(){if(this._buttons){_.each(this._buttons,function(item){item.clear();item.off();});}},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._buttons){_.each(this._buttons,function(item){item.destroy();});this._buttons=null;}}});var banks={};ACC={NO:"0",CARD:"1",ACCOUNT:"2",CONTRACT:"3"};OP={NO:"0",ACCOUNT:"1",CREDIT:"2",CARD:"3"};OP_NAME={"0":" ","1":" ","2":" ","3":" "};banks.CUSTOM_BANKS=[{fieldName:"mfo",mfo:"044525185",qkPrvId:"1327",shortName:"  ",longName:"Cetelem",min_commission:60,max_commission:0,commission:0.5,day_limit:600000,delay:"3",maxSum:15000,account_regexp:"^4(0817810|230[1-7]810)\\d{2}[^4]\\d{9}$"},{fieldName:"mfo",mfo:"044525811",qkPrvId:"23138",shortName:"   ",longName:"Cetelem",min_commission:50,max_commission:0,commission:1.5,day_limit:600000,delay:"3",maxSum:15000,account_regexp:"^4(0817810|230[1-7]810)\\d{2}[4]\\d{9}$"}];banks.validations={BIKKeying:function(account,bik){var s=0;var k=Number(account.charAt(8));s=7*bik.charAt(6)+1*bik.charAt(7)+3*bik.charAt(8)+7*account.charAt(0)+1*account.charAt(1)+3*account.charAt(2)+7*account.charAt(3)+1*account.charAt(4)+3*account.charAt(5)+7*account.charAt(6)+1*account.charAt(7)+7*account.charAt(9)+1*account.charAt(10)+3*account.charAt(11)+7*account.charAt(12)+1*account.charAt(13)+3*account.charAt(14)+7*account.charAt(15)+1*account.charAt(16)+3*account.charAt(17)+7*account.charAt(18)+1*account.charAt(19);s=((s%10)*3)%10;return(s==k);},GOSTCheck:function(account){var Summ="";var SSumm=0;for(var i=0;i<account.length;i++){Summ=Summ+String(Number(account.charAt(i))*(2-((i+2)%2)));}for(i=0;i<Summ.length;i++){SSumm=SSumm+Number(Summ.charAt(i));}return((SSumm%10)==0);},EANCheck:function(str){var Y=0;var X=0;var CRC=Number(str.charAt(12));var Q=0;for(var i=1;i<=12;i=i+2){Y+=Number(str.charAt(i));}for(var i=0;i<=10;i=i+2){X+=Number(str.charAt(i));}Q=Y*3+X;if((Math.round(Q%10))==0){Q=Math.round(Q%10);}else{Q=10-Math.round(Q%10);}return Q==CRC;},BINCheck:function(str,bins){if(bins){for(var i=0;i<bins.length;i++){if(str.substr(0,6)==bins[i]){return true;}}}return false;},ExpirationDate:function(str){var s=(str.length==3)?"0"+str:str;var d=new Date("20"+s.substr(2),Number(s.substr(0,2))-1,1);var delta=d.getFullYear()-new Date().getFullYear();return(delta>0&&delta<=5)||(delta==0&&d.getMonth()>=new Date().getMonth());},BirthDate:function(str){var s=(str.length==7)?"0"+str:str;var year=Number(s.substr(4));if(year<1938||year>2000){return false;}var month=Number(s.substr(2,2));if(month>12||month<1){return false;}var day=Number(s.substr(0,2));if(day>31||day<1){return false;}switch(month){case 2:if(day>29||((year%4)&&day>28)){return false;}break;case 4:case 6:case 9:case 11:if(day>30){return false;}}return true;},CustomBank:function(fieldName,value){var customCase=_.find(banks.CUSTOM_BANKS,function(item){return(item.fieldName==fieldName&&item[fieldName]==value);});if(customCase){var cfg=cj.session.get("config");if(customCase.qkPrvId){cj.session.get("startParams").qkPrvId=customCase.qkPrvId;}if(customCase.mfo){cj.session.set("fields_mfo",customCase.mfo);cj.session.set("fields_mfo_formatted",customCase.mfo);}if(customCase.shortName){cfg.shortName=customCase.shortName;}if(customCase.longName){cfg.longName=customCase.longName;}if(!_.isNull(customCase.min_commission)&&!_.isUndefined(customCase.min_commission)){cfg.params.min_commission=customCase.min_commission;}if(!_.isNull(customCase.max_commission)&&!_.isUndefined(customCase.max_commission)){cfg.params.max_commission=customCase.max_commission;}if(!_.isNull(customCase.commission)&&!_.isUndefined(customCase.commission)){cfg.params.commission=customCase.commission;}if(!_.isNull(customCase.day_limit)&&!_.isUndefined(customCase.day_limit)){cfg.params.dayLimit=customCase.day_limit;}if(customCase.delay){cfg.params.enrollTime=customCase.delay;}if(!_.isNull(customCase.maxSum)&&!_.isUndefined(customCase.maxSum)){cfg.maxSum=customCase.maxSum;}if(customCase.account_regexp){var accPage=_.findWhere(cfg.pages[ACC.ACCOUNT],{fieldName:"account"});accPage.regexp=customCase.account_regexp;}}return true;}};cj.maratl.onlines.generateStd=function(Num){return Number(new Date().getTime().toString().substr(0,10))^Number(Num);};cj.maratl.onlines.TEMPLATE=_.template('<?xml version="1.0" encoding="utf-8"?><request>'+"<protocol-version>4.00</protocol-version>"+"<request-type>60</request-type>"+"<terminal-id>1115666665</terminal-id>"+'<extra name="mylk-pin">5689</extra>'+'<extra name="std"><% print(cj.maratl.onlines.generateStd(1115666665)) %></extra>'+"<acc-l><acc>"+"<prv><%= startParams.qkPrvId %></prv>"+"<a><%= fields_account %></a>"+"<sum></sum>"+'<extra name="oper_type"><%= oper_type %></extra>'+'<extra name="account_type"><%= account_type %></extra>'+"<%_.each(extras, function(value, name){%>"+'<extra name="<%=name%>"><%-value%></extra>'+"<%});%>"+'<extra name="pay_type">4444</extra>'+"</acc></acc-l>"+"</request>");cj.maratl.onlines.PAYMENT=_.template('<?xml version="1.0" encoding="utf-8"?><request>'+"<protocol-version>4.00</protocol-version>"+"<request-type>39</request-type>"+'<extra name="mylk-pin"><%=pin%></extra>'+"<terminal-id><%=phone%></terminal-id>"+"<trm-id><%=TermID%></trm-id>"+'<extra name="client-software">html_banks <%=short_version%></extra>'+'<extra name="std"><% print(cj.maratl.onlines.generateStd(phone)) %></extra>'+"<v>html_banks <%=short_version%></v>"+'<auth count="1" to-amount="0.<%=to_amount%>">'+'<% if(payment_method == "cash"){%>'+'<extra name="p-id"><%=transaction_id%></extra>'+"<%}%>"+"<payment>"+"<transaction-number>"+'<% if(payment_method == "cash"){ print((Number(transaction_id) + 1).toString())}else{print(transaction_id)}%>'+"</transaction-number>"+"<from>"+"<amount><%=summ%></amount>"+"<service-id>4</service-id>"+"</from>"+"<to>"+"<amount><%=summ%></amount>"+"<service-id><%=startParams.qkPrvId%></service-id>"+"<account-number><%= fields_account %></account-number>"+"</to>"+'<extra name="comment">: <%=bank_name%></extra>'+'<extra name="oper_type"><%= oper_type %></extra>'+'<extra name="account_type"><%= account_type %></extra>'+"<%_.each(extras, function(value, name){%>"+'<extra name="<%=name%>"><%-value%></extra>'+"<%});%>"+'<extra name="pay_type"><%=pay_type%></extra>'+'<extra name="pfp"><%=pfp%></extra>'+"</payment>"+"</auth>"+"</request>");cj.maratl.onlines.SAVE_PAYMENT=_.template('<?xml version="1.0" encoding="utf-8"?><request>'+"<protocol-version>4.00</protocol-version>"+"<request-type>38</request-type>"+'<extra name="mylk-pin"><%=pin%></extra>'+"<terminal-id><%=phone%></terminal-id>"+'<extra name="client-software">html_banks <%=short_version%></extra>'+'<extra name="std"><% print(cj.maratl.onlines.generateStd(1115666665)) %></extra>'+"<v>html_banks <%=short_version%></v>"+"<item-list><item>"+"<title> <%=bank_name%></title>"+"<id><%= fav_id %></id>"+"<prv><%= startParams.qkPrvId %></prv>"+"<account><%= fields_account %></account>"+"<amount><%=summ%></amount>"+'<extra name="oper_type"><%= oper_type %></extra>'+'<extra name="account_type"><%= account_type %></extra>'+"<%_.each(extras, function(value, name){%>"+'<extra name="<%=name%>"><%-value%></extra>'+"<%});%>"+"</item></item-list>"+"</request>");cj.maratl.onlines.FAVOURITES_LIST=_.template('<?xml version="1.0" encoding="utf-8"?><request>'+"<protocol-version>4.00</protocol-version>"+"<request-type>36</request-type>"+'<extra name="mylk-pin"><%=pin%></extra>'+"<terminal-id><%=phone%></terminal-id>"+'<extra name="client-software">html_banks <%=short_version%></extra>'+'<extra name="std"><% print(cj.maratl.onlines.generateStd(1115666665)) %></extra>'+"<v>html_banks <%=short_version%></v>"+"</request>");cj.maratl.onlines.CHECK_PHONE=_.template('<?xml version="1.0" encoding="utf-8"?><request>'+"<protocol-version>4.00</protocol-version>"+"<request-type>57</request-type>"+"<terminal-id><%=phone%></terminal-id>"+'<extra name="phone"><%=phone%></extra>'+'<extra name="mylk-pin">666</extra>'+"<v>html_banks <%=short_version%></v>"+"</request>");cj.maratl.onlines.CHECK_PIN=_.template('<?xml version="1.0" encoding="utf-8"?><request>'+"<protocol-version>4.00</protocol-version>"+"<request-type>3</request-type>"+"<terminal-id><%=phone%></terminal-id>"+'<extra name="mylk-pin"><%=pin%></extra>'+"<v>html_banks <%=short_version%></v>"+"</request>");banks.ConfigParser={isLoaded:false,_loaded:{},load:function(id){var self=this;this.isLoaded=false;var script=document.getElementById("provider-config");var closure=function(){if(self.isLoaded==true){return;}self.isLoaded=true;if(!window.UIProvider){self.trigger("no_config");}else{self._loaded[id]=self.parse(UIProvider);self.trigger("loaded",id,self._loaded[id]);}};script.onreadystatechange=function(){if((this.readyState=="complete"||this.readyState=="loaded")){closure();}};script.onload=closure;script.src="../config/"+id+".js";},parse:function(data){var res={_all:data,id:data.id,longName:data.lName,shortName:data.sName,minSum:data.minSum,maxSum:data.maxSum,logo:cj.getFirstObjectByPropertyValue(data.__objects,"type","standard").img,params:this.parseParams(data.__objects),pages:this.parsePages(data.__objects)};return res;},parseParams:function(obj){var res={};var params=cj.getFirstObjectByPropertyValue(obj,"__type","constParams").__objects;for(var i=0;i<params.length;i++){var p=params[i];switch(p.name){case"day_limit":res.dayLimit=p.value;break;case"skip_template_check":res.skipTemplateCheck=(Number(p.value)==1);break;case"delay":res.enrollTime=p.value;break;case"pay_type":res.payType=p.value;break;case"account_type":res.accountType=p.value;break;case"mfo":res.bik=p.value;break;case"min_commission":res.min_commission=p.value;break;case"max_commission":res.max_commission=p.value;break;case"commision":res.commission=p.value;break;}}return res;},parsePages:function(obj){var res={"1":[],"2":[],"3":[],account:[],operation:[]};var pages=cj.getFirstObjectByPropertyValue(obj,"__type","pages").__objects;for(var i=0;i<pages.length;i++){var p=pages[i];var accountType=cj.getFirstObjectByPropertyValue(p,"name","account_type");var key;if(p.orderId=="1"){key="operation";}else{if(p.orderId=="2"){key="account";}else{if(!accountType||Number(accountType.disp_desc)<1||Number(accountType.disp_desc)>3){return;}else{key=accountType.disp_desc;}}}var p=pages[i];var input=cj.getFirstObjectByPropertyValue(p,"type","text_input");var validations=cj.getFirstObjectByPropertyValue(p,"name","validations");var bins=cj.getFirstObjectByPropertyValue(p,"name","bins");res[key].push({title:p.title,order:p.orderId,layout:p.pageFile,fieldName:input?input.name:null,fieldLabel:input?input.header:null,paymentName:input?input.disp_desc:null,mask:input?input.mask:null,regexp:input?input.regexp:null,validationRules:validations?validations.disp_desc.split(","):[],errorMessage:input?input.errMess:null,bins:bins?bins.disp_desc.split(","):[],buttons:(p.pageFile!="Buttons")?null:_.map(p.__objects[0].__objects,function(b){return{order:b.orderId,paramName:b.altName,paramValue:b[b.altName],text:b.disp_desc};})});}_.each([ACC.ACCOUNT,ACC.CARD,ACC.CONTRACT],function(code){res[code]=_.sortBy(res[code],function(item){return item.order;});});return res;},clear:function(){this._loaded={};this.isLoaded=false;delete window.UIProvider;}};_.extend(banks.ConfigParser,Backbone.Events);banks.StartParamParser={parse:function(str){var vals=str.split(";");return{qkPrvId:(Number(vals[0])).toString(),operationType:vals[1]?vals[1]:OP.NO,prvId:vals[2]};}};banks.RequestContextGenerator={generatePfp:function(){var date_pfp=new Date();var pfp=cj.session.get("TermID")+""+date_pfp.getTime();pfp=pfp.substr(0,18);return pfp;},generateTransNumber:function(){var now=new Date();var year=now.getFullYear();var month=now.getMonth();var ddate=now.getDate();var hour=now.getHours();var minute=now.getMinutes();var second=now.getSeconds();var millisecond=now.getMilliseconds();return Number(Date.UTC(year,month,ddate,hour,minute,second,millisecond).toString().substr(-12,11));},generate:function(config){var res={account_type:cj.session.get("account_type"),oper_type:cj.session.get("oper_type"),pay_type:config.params.payType,fields_account:cj.session.get("fields_account"),bank_name:config.shortName,phone:cj.session.get("phone"),pin:cj.session.get("pin"),TermID:cj.session.get("TermID"),startParams:cj.session.get("startParams"),summ:cj.session.get("summ"),payment_method:cj.session.get("payment_method"),to_amount:cj.session.get("payment_method")=="balance"?"3":"4",short_version:cj.APP_VERSION_SHORT,transaction_id:this.generateTransNumber(),pfp:this.generatePfp(),extras:{}};_.each(config.pages[res.account_type],function(item){if(item.fieldName!="account"){res.extras[item.fieldName]=cj.session.get("fields_"+item.fieldName+"_formatted");}if(item.fieldName=="exp_date"){res.extras.exp_date=cj.session.get("fields_exp_date");}});if(!res.extras.mfo&&config.params.bik){res.extras.mfo=config.params.bik;}return res;}};banks.parseFavourites=function(xmlResponse){var list=xmlResponse._data.getElementsByTagName("book-list")[0];if(!list){return null;}var res=[];var bankId=cj.session.get("startParams").qkPrvId;for(var i=0;i<list.childNodes.length;i++){if(list.childNodes[i].nodeName=="book-item"){var xItem=list.childNodes[i];var prvId=xItem.getElementsByTagName("prv-id")[0].childNodes[0].nodeValue;if(prvId.toString()!=bankId.toString()){continue;}var extras={};_.each(xItem.getElementsByTagName("extra"),function(item){extras[item.getAttribute("name")]=item.childNodes[0].nodeValue;});if(cj.session.get("startParams").operationType!=OP.NO&&extras.oper_type!=cj.session.get("startParams").operationType){continue;}res.push({id:xItem.getElementsByTagName("id")[0].childNodes[0].nodeValue,account:xItem.getElementsByTagName("account")[0].childNodes[0].nodeValue,amount:xItem.getElementsByTagName("amount")[0].childNodes[0].nodeValue,extras:extras});}}return res;};banks.clearFields=function(){cj.session.remove("fields_account");cj.session.remove("fields_mfo");cj.session.remove("fields_bdate");cj.session.remove("fields_fname");cj.session.remove("fields_mname");cj.session.remove("fields_lname");cj.session.remove("fields_bplace");cj.session.remove("fields_exp_date");cj.session.remove("summ");cj.session.remove("fav_to_change");cj.session.remove("selected_fav");cj.session.remove("go_to_favourites");};banks.NavGenerator=function(config,startParams){this.prepareNavigationBase=function(){var r=[];if(this._startParams.operationType==OP.NO){r.push(this._config.pages["operation"][0]);}if(!this._config.params.accountType||this._config.params.accountType==ACC.NO){r.push(this._config.pages["account"][0]);}return r;};this.getFirstNonButtonsPageIndex=function(){for(var i=0;i<this._navigationBase.length;i++){if(this._navigationBase[i].layout!="Buttons"){return i;}}return this._navigationBase.length;};this.update=function(){cj.session.set("combo_page",this.currentPageIndex);var acc_type=cj.session.get("account_type");var currentNav=(acc_type?this._navigationBase.concat(this._config.pages[acc_type]):this._navigationBase);this.currentPage=currentNav[this.currentPageIndex];};this._config=config;this._startParams=startParams;this.currentPageIndex=0;this._navigationBase=this.prepareNavigationBase();var cp=cj.session.get("combo_page");if(cp){if(cp=="fav_change"){this.currentPageIndex=this.getFirstNonButtonsPageIndex();}else{this.currentPageIndex=Number(cp);}}this.update();this.hasPrev=function(){return this.currentPageIndex>0;};this.hasNext=function(){var acc_type=cj.session.get("account_type");var nav_length=(acc_type?this._navigationBase.length+this._config.pages[acc_type].length:this._navigationBase.length);return(this.currentPageIndex<nav_length-1);};this.next=function(){if(this.hasNext()){this.currentPageIndex++;this.update();}};this.prev=function(){if(this.hasPrev()){this.currentPageIndex--;this.update();}};};banks.layouts={_markup:{}};banks.layouts.LayoutManager=function(el,page,model){this.$el=el;this._page=page;this._model=model;this.layout=null;_.extend(this,Backbone.Events);this.loadLayout=function(){var name=this._page.layout;if(!banks.layouts._markup[name]){var self=this;$.ajax({url:"pages/layouts/"+name+".html",dataType:"html",data:{},success:function(data){banks.layouts._markup[name]=data;self.applyLayout(data);}});}else{this.applyLayout(banks.layouts._markup[name]);}};this.applyLayout=function(html){this.$el.html(html);this.layout=new banks.layouts[this._page.layout]({el:this.$el,model:this._model,page:this._page});this.layout.render();this.layout.on("action",function(a){this.trigger("action",a);},this);this.layout.on("update",function(){this.trigger("update");},this);this.layout.on("next",function(){this.trigger("next");},this);this.trigger("update");};this.preValidate=function(){return this.layout.preValidate();};this.validate=function(){return this.layout.validate();};this.submit=function(){this.layout.submit();};this.render=function(){this.loadLayout();};this.destroy=function(){this.$el.empty();this.layout.off();this.layout.destroy();};};banks.layouts.AbstractLayout=cj.views.AbstractView.extend({_page:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._page=options.page;},validate:function(){return true;},preValidate:function(){return true;},submit:function(){}});banks.layouts.FieldLayoutBase=banks.layouts.AbstractLayout.extend({_field:null,_calcButton:null,_favouritesButton:null,initialize:function(options){banks.layouts.AbstractLayout.prototype.initialize.call(this,options);this._field=new cj.views.MaskedTextField({el:this.$el.find("#textfield"),mask:this._page.mask});cj.views.mixins.CombinedTextField.apply(this._field);},render:function(){this._field.value("");var val=cj.session.get("fields_"+this._page.fieldName);if(val&&val!="null"){this.value(val);}$("#comment").empty();if(this._page.fieldName=="mfo"||this._page.fieldName=="account"){this.showInfo();}},showInfo:function(){var comment=$("#comment");comment.html("        "+cj.session.get("config").maxSum+" .");var lims=$("#info-limits");var comm=$("#info-commission");var templLimits=_.template("<%=delay%><br/><br/>      //   7     <%=limit%> .");var templCommission=_.template("   (): <%=commission%>");var context=this.getInfoContext();lims.html(templLimits(context));lims.show();$("#info-calculator").hide();if(context.commission){comm.html(templCommission(context));$("#info-calculator").show();var calcEl=this.$el.find("#calculator-button");calcEl.show();(this._calcButton=new cj.views.Button({el:calcEl})).render();this._calcButton.on(cj.views.events.click,function(){this.trigger(cj.views.events.action,"calculator");},this);comm.show();}$("#info-favourites").show();if(!(this._page.fieldName=="mfo"&&_.contains(this._page.validationRules,"CustomBank"))){var favEl=this.$el.find("#favourites-button");favEl.show();(this._favouritesButton=new cj.views.Button({el:favEl})).render();this._favouritesButton.on(cj.views.events.click,function(){cj.session.set("go_to_favourites",true);this.trigger(cj.views.events.action,"favourites");},this);}},getInfoContext:function(){var config=cj.session.get("config");var delay="";switch(config.params.enrollTime.toString()){case"0":delay="";break;case"1":delay="     .";break;case"2":delay="    1 - 2  .";break;case"3":delay="      .";break;}var commission="";if(Number(config.params.commission)==0){commission="0%";}else{commission=config.params.commission+"%   ";if(Number(config.params.min_commission)!=0){commission+=",    "+config.params.min_commission+" .";}commission+=" +  .";}if(config.params.commission==undefined&&config.params.min_commission==undefined){commission="";}return{delay:delay,commission:commission,limit:config.params.dayLimit};},value:function(value){if(value||value==""){this._field.value(value);this.update();}return this._field.value();},update:function(){this.trigger("update");},preValidate:function(){return new RegExp(this._page.regexp).test(this.value());},validate:function(){for(var i=0;i<this._page.validationRules.length;i++){var rule=banks.validations[this._page.validationRules[i]];if(!rule){return false;}else{if(this._page.validationRules[i]=="BIKKeying"){if(!(rule(this.value(),cj.session.get("fields_mfo")||cj.session.get("config").params.bik))){return false;}}else{if(this._page.validationRules[i]=="BINCheck"){if(!(rule(this.value(),this._page.bins))){return false;}}else{if(this._page.validationRules[i]=="CustomBank"){rule(this._page.fieldName,this.value());}else{if(!rule(this.value())){return false;}}}}}}return true;},clear:function(){if(this._calcButton){this._calcButton.off();this._calcButton.clear();}if(this._favouritesButton){this._favouritesButton.off();this._favouritesButton.clear();}if(this._field){this._field.clear();}},submit:function(){cj.session.set("fields_"+this._page.fieldName,this.value());cj.session.set("fields_"+this._page.fieldName+"_formatted",this._field.text());},destroy:function(){banks.layouts.AbstractLayout.prototype.destroy.call(this);if(this._calcButton){this._calcButton.destroy();}if(this._favouritesButton){this._favouritesButton.destroy();}if(this._field){this._field.destroy();}}});banks.layouts.Account=banks.layouts.FieldLayoutBase.extend({_numpad:null,_eraseButton:null,initialize:function(options){banks.layouts.FieldLayoutBase.prototype.initialize.call(this,options);this._numpad=new cj.views.Numpad({el:this.$el.find("#numpad")});this._eraseButton=new cj.views.Button({el:this.$el.find("#erase")});},render:function(){banks.layouts.FieldLayoutBase.prototype.render.call(this);this._numpad.render();this._numpad.on(cj.views.events.click,this.onNumpad,this);this._eraseButton.render();this._eraseButton.on(cj.views.events.click,this.onErase,this);},onErase:function(){this._field.erase();this.update();},onNumpad:function(code){this._field.appendText(code.toString());this.update();},destroy:function(){banks.layouts.FieldLayoutBase.prototype.destroy.call(this);if(this._numpad){this._numpad.off();this._numpad.destroy();}if(this._eraseButton){this._eraseButton.off();this._eraseButton.destroy();}}});banks.layouts.ExpirationDate=banks.layouts.FieldLayoutBase.extend({_numpad:null,_eraseButton:null,initialize:function(options){banks.layouts.FieldLayoutBase.prototype.initialize.call(this,options);this._field.destroy();this._field=new cj.views.ExpirationDateTextField({el:this.$el.find("#textfield"),mask:this._page.mask});cj.views.mixins.TextFieldWithPlaceholder.apply(this._field);this._numpad=new cj.views.Numpad({el:this.$el.find("#numpad")});this._eraseButton=new cj.views.Button({el:this.$el.find("#erase")});},onErase:function(){this._field.erase();this.update();},onNumpad:function(code){this._field.appendText(code.toString());this.update();},render:function(){banks.layouts.FieldLayoutBase.prototype.render.call(this);this._numpad.on(cj.views.events.click,this.onNumpad,this);this._numpad.render();this._eraseButton.on(cj.views.events.click,this.onErase,this);this._eraseButton.render();},destroy:function(){banks.layouts.FieldLayoutBase.prototype.destroy.call(this);if(this._numpad){this._numpad.off();this._numpad.destroy();}if(this._eraseButton){this._eraseButton.off();this._eraseButton.destroy();}},submit:function(){banks.layouts.FieldLayoutBase.prototype.submit.call(this);cj.session.set("fields_"+this._page.fieldName+"_formatted",this._field.text().substr(0,2)+"."+this._field.text().substr(2));}});banks.layouts.FullDate=banks.layouts.FieldLayoutBase.extend({_numpad:null,_eraseButton:null,initialize:function(options){banks.layouts.FieldLayoutBase.prototype.initialize.call(this,options);this._field.destroy();this._field=new cj.views.FullDateTextField({el:this.$el.find("#textfield"),mask:this._page.mask});cj.views.mixins.TextFieldWithPlaceholder.apply(this._field);this._numpad=new cj.views.Numpad({el:this.$el.find("#numpad")});this._eraseButton=new cj.views.Button({el:this.$el.find("#erase")});},onErase:function(){this._field.erase();this.update();},onNumpad:function(code){this._field.appendText(code.toString());this.update();},render:function(){banks.layouts.FieldLayoutBase.prototype.render.call(this);this._numpad.on(cj.views.events.click,this.onNumpad,this);this._numpad.render();this._eraseButton.on(cj.views.events.click,this.onErase,this);this._eraseButton.render();},destroy:function(){banks.layouts.FieldLayoutBase.prototype.destroy.call(this);if(this._numpad){this._numpad.off();this._numpad.destroy();}if(this._eraseButton){this._eraseButton.off();this._eraseButton.destroy();}},submit:function(){banks.layouts.FieldLayoutBase.prototype.submit.call(this);cj.session.set("fields_"+this._page.fieldName+"_formatted",this._field.text().substr(0,2)+"."+this._field.text().substr(2,2)+"."+this._field.text().substr(4));}});banks.layouts.Qwerty=banks.layouts.FieldLayoutBase.extend({_keyboard:null,_field:null,_eraseButton:null,initialize:function(options){banks.layouts.FieldLayoutBase.prototype.initialize.call(this,options);this._field._disableMask=true;this._keyboard=new cj.views.Keyboard({el:this.$el.find("#keyboard")});this._eraseButton=new cj.views.Button({el:this.$el.find("#erase")});},render:function(){banks.layouts.FieldLayoutBase.prototype.render.call(this);this._keyboard.on(cj.views.events.click,this.onKeyboard,this);this._keyboard.render();this._eraseButton.render();this._eraseButton.on(cj.views.events.click,this.onErase,this);this._keyboard.isShifted(this.isUpperCaseState());this.update();},onErase:function(){this._field.erase();this.update();},onKeyboard:function(code){this._field.appendText(code.toString());this._keyboard.isShifted(this.isUpperCaseState());this.update();},isUpperCaseState:function(){if(this._field.value().length==0){return true;}var last=this._field.value().charAt(this._field.value().length-1);switch(last){case" ":case".":case"-":case"!":return true;}return false;},destroy:function(){banks.layouts.FieldLayoutBase.prototype.destroy.call(this);if(this._keyboard){this._keyboard.off();this._keyboard.destroy();}if(this._eraseButton){this._eraseButton.off();this._eraseButton.destroy();}}});banks.layouts.Buttons=banks.layouts.AbstractLayout.extend({_buttons:[],_fields:[],initialize:function(options){banks.layouts.AbstractLayout.prototype.initialize.call(this,options);var self=this;_.each(this._page.buttons,function(item){var i=Number(item.order)-1;self._buttons[i]=new cj.views.Button({el:self.$el.find("#button-"+item.order),content:item.text});self._buttons[i].code(i.toString());self._fields[i]=item;});cj.session.remove(self._fields[0].paramName);},render:function(){var self=this;_.each(this._buttons,function(button){button.render();button.show();button.on(cj.views.events.click,self.onButton,self);});},onButton:function(code){var i=Number(code);if(cj.session.get(this._fields[i].paramName)!=this._fields[i].paramValue){banks.clearFields();}cj.session.set(this._fields[i].paramName,this._fields[i].paramValue);this.trigger("next");},destroy:function(){banks.layouts.AbstractLayout.prototype.destroy.call(this);if(this._buttons){_.each(this._buttons,function(button){button.off();button.destroy();});this._buttons=null;}},preValidate:function(){return true;},validate:function(){return true;},submit:function(){}});cj.views.CheckStatusView=cj.views.AbstractView.extend({_startParamParser:null,_pulseTimes:0,_timeout:-1,_res:{},initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._startParamParser=banks.StartParamParser;},render:function(){this.clear();this.showPreloader();this.startOperations();},showFailPopup:function(popup,code){var self=this;this.stop();this.showPopup(_.extend(popup,{closeButtonCallback:function(){self.trigger(cj.views.events.action,"fail");}}));cj.statistics.append(code);},pulse:function(){if(this._pulseTimes>Number(this.model.get("min_show_time"))){if(this.check()){return;}}this._pulseTimes++;if(this._pulseTimes>=6){this.showFailPopup(this.model.get("connection-popup"),"E0");}cj.maratl.send("WriteToLog","   : "+cj.APP_VERSION);var p;if(p=this.model.get("prv_id")){cj.maratl.send("PrvId",p);}cj.maratl.send("GetTermID","true");cj.maratl.send("GetTermInfo","true");cj.maratl.send("GetBalance","true");cj.maratl.send("GetCommis","true");cj.maratl.send("GetStartParam","true");cj.maratl.send("GetPrtStatus","true");},startOperations:function(){cj.maratl.on("response",this.onMaratlResponse,this);var self=this;this._timeout=setInterval(function(){self.pulse();},1000);this.pulse();},onMaratlResponse:function(key,value){var codes=cj.maratl.codes;if(key.toLowerCase()=="terminfo"){var xml=$($.parseXML(value));var max=xml.find("max-pay-amount").text();this._res["max_pay_amount"]=(max=="0"?"15000":max.toString());return;}if(key.toLowerCase()=="commprof"){if(!cj.session.get("commission_profiles")){var xml=new ActiveXObject("Microsoft.XMLDOM");xml.async=false;xml.loadXML(value);var cp=cj.commission.CommissionProfilesParser.parse(xml.childNodes[1]);cj.session.set("commission_profiles",cp);}return;}if(key.toLowerCase()=="startparam"){var sp=this._startParamParser.parse(value);if(sp){this._res.startParams=sp;}else{this.showFailPopup(this.model.get("provider-popup"),"E0");}}this._res[key]=value;if(key==codes.PrtStatus&&value.toLowerCase()=="error"&&(this.model.get("need_printer")=="true")){this.showFailPopup(this.model.get("printer-popup"),"E2");}if(key==codes.PrvDenied&&value=="true"){this.showFailPopup(this.model.get("provider-popup"),"E0");}this.check();},hasBIKError:function(){var self=this;if(this._res.config.params.bik){return false;}return _.some([ACC.ACCOUNT,ACC.CARD,ACC.CONTRACT],function(item){var pages;return(pages=self._res.config.pages[item]).length&&!_.findWhere(pages,{fieldName:"mfo"});});},check:function(){var t=this.model.get("min_show_time");if(t&&Number(t)>this._pulseTimes){return false;}var r;var self=this;if(r=this.status()){this.stop();banks.ConfigParser.on("no_config",function(){banks.ConfigParser.off();self.showFailPopup(self.model.get("provider-popup"),"E0");});banks.ConfigParser.on("loaded",function(id,data){banks.ConfigParser.off();self._res.config=data;$("#bank-logo img").attr("src","../img/ui_item/"+data.logo).removeClass("hidden");if(self.hasBIKError()){self.showFailPopup(self.model.get("bik-error-popup"),"E1");return;}self.hidePreloader();self.trigger(cj.views.events.action,"submitted",self._res);self.trigger(cj.views.events.action,"success");});banks.ConfigParser.load(this._res.startParams.prvId);}return r;},status:function(){var codes=cj.maratl.codes,r=this._res;if(!r[codes.TermID]){return false;}if(!r["max_pay_amount"]){return false;}if(this.model.get("prv_id")&&!r[codes.PrvAllow]){return false;}if(!r[codes.PrtStatus]){return false;}return true;},stop:function(){clearInterval(this._timeout);this.stopPreloader();cj.maratl.off("response",this.onMaratlResponse,this);},clear:function(){this.stop();}});cj.views.OffertusView=cj.views.AbstractView.extend({_leftButton:null,_rightButton:null,path:null,_current:null,_total:null,_pages:null,$container:null,$content:null,$number:null,$text:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this.path=this._model.get("url");this._leftButton=new cj.views.Button({el:this.$el.find("#left-button")});this._rightButton=new cj.views.Button({el:this.$el.find("#right-button")});this.$container=this.$el.find("#offertus-container");this.$content=this.$el.find("#offertus-content");this.$number=this.$el.find("#offertus-pagenumber");},render:function(){this.clear();var self=this;$.ajax({url:self.path,success:function(data){console.log("offertus loaded");self.$text=$(data);self._current=0;self._pages=self.$text.find(".page");self._total=self._pages.length;self.showPage(self._current);},error:function(xhr,ajaxOptions,thrownError){self.showPopup(self.model.get("load_error_popup"));}});$("#header, #path-header").addClass("hidden");this._leftButton.render();this._leftButton.on(cj.views.events.click,this.prev,this);this._rightButton.render();this._rightButton.on(cj.views.events.click,this.next,this);},clear:function(){$("#header, #path-header").removeClass("hidden");if(this._leftButton){this._leftButton.off();this._leftButton.clear();}if(this._rightButton){this._rightButton.off();this._rightButton.clear();}},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._leftButton){this._leftButton.destroy();this._leftButton=null;}if(this._rightButton){this._rightButton.destroy();this._rightButton=null;}this.$container&&(this.$container=null);this.$content&&(this.$content=null);this.$number&&(this.$number=null);this.$text&&(this.$text=null);},prev:function(){if(this._current-1>=0){cj.log.l("prev");this.showPage(this._current-1);}},next:function(){if(this._current+1<this._total){cj.log.l("next");this.showPage(this._current+1);}},showPage:function(number){this._current=number;if(this._current){this.$container.addClass("nested");}else{this.$container.removeClass("nested");}this.$number.html((this._current+1)+" / "+this._total);this.$content.html(this._pages[this._current]);}});cj.views.PhoneEnterView=cj.views.AbstractView.extend({_nextButton:null,_numpad:null,_field:null,_backspaceButton:null,_offertusButton:null,_xmlOnline:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._nextButton=options.nextButton;this._field=new cj.views.PhoneTextField({el:this.$el.find("#phone-input"),maxChars:Number(this._model.get("maxChars"))||10});cj.views.mixins.CombinedTextField.apply(this._field);this._backspaceButton=new cj.views.Button({el:this.$el.find("#phone-backspace")});this._offertusButton=new cj.views.Button({el:this.$el.find("#offertus-button")});this._numpad=new cj.views.Numpad({el:this.$el.find(".numpad")});},render:function(){this.clear();var self=this;this._nextButton.on(cj.views.events.click,this.onNextButton,this);this._nextButton.hide();this._backspaceButton.on(cj.views.events.click,this.onErase,this);this._backspaceButton.render();this._offertusButton.on(cj.views.events.click,this.onOffertusButton,this);this._offertusButton.render();this._numpad.on(cj.views.events.click,this.onNumpad,this);this._numpad.render();var phone=cj.session.get("phone");if(phone){setTimeout(function(){self._field.value(phone);self.update();},200);}},onOffertusButton:function(){this.trigger(cj.views.events.action,"offertus");},onNumpad:function(code){this._field.appendText(code.toString());this.update();},onErase:function(){this._field.erase();this.update();},onNextButton:function(){var prvId=cj.phoneCapacity.prvId(this._field.value());if(prvId==-1){var template=this.model.get("wrong_number_popup").message;this.showPopup(_.extend(this.model.get("wrong_number_popup"),{message:_.template(template)({phone:this._field.text()})}));this.update();return;}cj.session.set("phone",this._field.value());cj.session.set("phone_formatted",this._field.text());this.performOnline();},performOnline:function(){var self=this;this.showPreloader();var o=cj.maratl.onlines;var context=banks.RequestContextGenerator.generate(cj.session.get("config"));var req=new o.XMLRequest(o.CHECK_PHONE(context));this._xmlOnline=new cj.maratl.onlines.XMLOnline(req,false);this._xmlOnline.on("timeout",function(){this.off();cj.statistics.append("E1");self.hidePreloader();self.showPopup({title:"!",message:"     .   "});});this._xmlOnline.on("response",function(e){this.off();self.hidePreloader();switch(e.resultCode()){case"0":cj.statistics.append("S9");cj.session.set("pin","666");var action=((cj.session.get("go_to_favourites")==true)?"favourites:":"")+"no_pin";self.trigger(cj.views.events.action,action);return;case"335":cj.statistics.append("S9");var action=((cj.session.get("go_to_favourites")==true)?"favourites:":"")+"submitted";self.trigger(cj.views.events.action,action);return;case"336":cj.statistics.append("S9");self.showPopup({title:"!",message:"     PIN-  SMS."});return;default:cj.statistics.append("E9");self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForCode(Number(e.resultCode()))});return;}});this._xmlOnline.start();},update:function(){if(this._field.value().length==10){this._nextButton.show();}else{this._nextButton.hide();}},clear:function(){this._backspaceButton&&this._backspaceButton.off()&&this._backspaceButton.clear();this._offertusButton&&this._offertusButton.off()&&this._offertusButton.clear();this._numpad&&this._numpad.off()&&this._numpad.clear();this._nextButton&&this._nextButton.off();},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._backspaceButton){this._backspaceButton.destroy();this._backspaceButton=null;}if(this._offertusButton){this._offertusButton.destroy();this._offertusButton=null;}if(this._numpad){this._numpad.destroy();this._numpad=null;}if(this._field){this._field.destroy();this._field=null;}if(this._nextButton){this._nextButton=null;}}});cj.views.PinEnterView=cj.views.AbstractView.extend({_nextButton:null,_numpad:null,_field:null,_backspaceButton:null,_xmlOnline:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._nextButton=options.nextButton;this._field=new cj.views.PasswordTextField({el:this.$el.find("#pin-input"),model:this._model});cj.views.mixins.CombinedTextField.apply(this._field);this._backspaceButton=new cj.views.Button({el:this.$el.find("#pin-backspace"),maxChars:Number(this._model.get("maxChars"))||10});this._numpad=new cj.views.Numpad({el:this.$el.find(".numpad")});},render:function(){this.clear();this._nextButton.on(cj.views.events.click,this.onNextButton,this);this._nextButton.hide();this._backspaceButton.on(cj.views.events.click,this.onErase,this);this._backspaceButton.render();this._numpad.on(cj.views.events.click,this.onNumpad,this);this._numpad.render();},onNextButton:function(){cj.session.set("pin",this._field.value());this.performOnline();},onNumpad:function(code){this._field.appendText(code.toString());this.update();},onErase:function(){this._field.erase();this.update();},performOnline:function(){var self=this;this.showPreloader();var o=cj.maratl.onlines;var context=banks.RequestContextGenerator.generate(cj.session.get("config"));var req=new o.XMLRequest(o.CHECK_PIN(context));this._xmlOnline=new cj.maratl.onlines.XMLOnline(req,false);this._xmlOnline.on("timeout",function(){this.off();cj.statistics.append("E1");self.hidePreloader();self.showPopup({title:"!",message:"     .   "});});this._xmlOnline.on("response",function(e){this.off();self.hidePreloader();switch(e.resultCode()){case"0":cj.statistics.append("S10");cj.session.set("balance",e.findValue("bal"));var action=(cj.session.get("go_to_favourites")?"favourites:":"")+"submitted";self.trigger(cj.views.events.action,action);return;default:self._field.value("");cj.statistics.append("E10");self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForCode(Number(e.resultCode()))||"  "});return;}});this._xmlOnline.start();},update:function(){if(this._field.value().length>=4){this._nextButton.show();}else{this._nextButton.hide();}},clear:function(){this._backspaceButton&&this._backspaceButton.off()&&this._backspaceButton.clear();this._numpad&&this._numpad.off()&&this._numpad.clear();this._nextButton&&this._nextButton.off();},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._backspaceButton){this._backspaceButton.destroy();this._backspaceButton=null;}if(this._numpad){this._numpad.destroy();this._numpad=null;}if(this._field){this._field.destroy();this._field=null;}if(this._nextButton){this._nextButton=null;}}});cj.views.SummEnterView=cj.views.AbstractView.extend({_nextButton:null,_prevButton:null,_numpad:null,_rubField:null,_kopField:null,_backspaceButton:null,_contractButton:null,_finalSumm:null,_finalSummLabel:null,_xmlOnline:null,_favourites:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._nextButton=options.nextButton;(this._prevButton=options.prevButton).show();if(!cj.session.get("favourites_list_"+cj.session.get("phone"))){this.performOnline();}},render:function(){this.clear();var self=this;this._nextButton.off();this._nextButton.on(cj.views.events.click,this.onNextButton,this);this._prevButton.off();this._prevButton.on(cj.views.events.click,this.onPrevButton,this);this._numpad=new cj.views.Numpad({el:this.$el.find(".numpad")});this._numpad.on(cj.views.events.click,function(code){this._activeField.appendText(code.toString());this.update();},this);this._numpad.render();this._rubField=new cj.views.TextField({el:this.$el.find("#rub-input"),maxChars:5});this._rubField.on("click",function(){if(self._activeField!=self){self.setActiveField(this);}});cj.views.mixins.CombinedTextField.apply(this._rubField);this._rubField.render();this._kopField=new cj.views.TextField({el:this.$el.find("#kop-input"),maxChars:2});this._kopField.on("click",function(){if(self._activeField!=self){self.setActiveField(this);}});cj.views.mixins.CombinedTextField.apply(this._kopField);this._kopField.render();this.setActiveField(this._rubField);var summ=cj.session.get("summ");if(summ){var rub=parseInt(summ);var kop=summ.toString().replace(/\d*.(\d*)/,"$1");setTimeout(function(){self._rubField.appendText(rub);self._kopField.appendText(kop);self.update();},200);}this._backspaceButton=new cj.views.Button({el:this.$el.find("#summ-backspace")});this._backspaceButton.on(cj.views.events.click,function(){this._activeField.erase();this.update();},this);this._backspaceButton.render();this._contractButton=new cj.views.Button({el:this.$el.find("#contract-button")});this._contractButton.on(cj.views.events.click,function(code){this.trigger(cj.views.events.action,"contract");},this);this._contractButton.render();this._finalSummLabel=this.$el.find("#price .summ");},clear:function(){this._backspaceButton&&this._backspaceButton.off();this._nextButton&&this._nextButton.off();if(this._numpad){this._numpad.off();}},onPrevButton:function(){if(cj.session.get("selected_fav")){this.trigger("action","favs");}else{if(cj.session.get("fav_to_change")){this.trigger("action","combo");}else{this.trigger("action","phone");}}},performOnline:function(){var self=this;var o=cj.maratl.onlines;var context=banks.RequestContextGenerator.generate(cj.session.get("config"));var req=new o.XMLRequest(o.FAVOURITES_LIST(context));this._xmlOnline=new cj.maratl.onlines.XMLOnline(req,false);this._xmlOnline.on("timeout",function(){cj.statistics.append("E1");this.off();});this._xmlOnline.on("response",function(e){this.off();switch(e.resultCode()){case"0":cj.statistics.append("S6");self._favourites=banks.parseFavourites(e);if(!self._favourites){return;}cj.session.set("favourites_list_"+cj.session.get("phone"),self._favourites);return;}});this._xmlOnline.start();},setActiveField:function(field){this._activeField=field;this._activeField.enable();if(this._activeField==this._rubField){this._kopField.disable();}else{this._rubField.disable();}},getSumm:function(){return parseFloat(this._rubField.text()+"."+this._kopField.text())||0;},onNextButton:function(){var summ=this.getSumm();var context={maxSumm:Number(cj.session.get("max_pay_amount")),minSumm:Number(cj.session.get("config").minSum)};var template;switch(true){case this._finalSumm>=context.maxSumm:template=this.model.get("max_sum_popup").message;this.showPopup(_.extend(this.model.get("max_sum_popup"),{message:_(template).template(context)}));return;case summ<context.minSumm:template=this.model.get("min_sum_popup").message;this.showPopup(_.extend(this.model.get("min_sum_popup"),{message:_(template).template(context)}));return;default:cj.session.set("summ",summ);this.trigger(cj.views.events.action,"submitted");}},update:function(){if(this._rubField.text().length){this._nextButton.show();}else{this._nextButton.hide();}var commission=cj.commission.CommissionUtils.getCommisSumm(this.getSumm(),[cj.commission.CommissionUtils.convert(cj.session.get("config").params)]);commission=cj.round2(commission);this._finalSumm=cj.round2(Number(this.getSumm())+Number(commission)).toString();this._finalSummLabel.text(this._finalSumm||"0");}});cj.views.ConfirmationView=cj.views.AbstractView.extend({$table:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this.$table=$(this.el).find("table");},render:function(){var config=cj.session.get("config");var op_type=cj.session.get("oper_type");var op_str="";switch(op_type){case OP.ACCOUNT:op_str=" ";this.addLine(" ",op_str);break;case OP.CREDIT:op_str=" ";this.addLine(" ",op_str);break;case OP.CARD:op_str=" ";this.addLine(" ",op_str);break;}this.addLine("",cj.session.get("phone_formatted"));this.addLine("",cj.session.get("summ")+" .");this.addLine("   ",(Number(cj.session.get("summ"))+Number(cj.commission.CommissionUtils.getCommisSumm(Number(cj.session.get("summ")),[cj.commission.CommissionUtils.convert(config.params)]))).toString().replace(/(\d*?\.\d{2}).*/,"$1")+" .");var pages=config.pages[cj.session.get("account_type")];for(var i=0;i<pages.length;i++){var p=pages[i];this.addLine(p.fieldLabel,cj.session.get("fields_"+p.fieldName+"_formatted"));}},addLine:function(key,value){var html=_($("#template").clone().html()).template({key:key,value:value});this.$table.append(html);},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this.$table){this.$table=null;}}});cj.views.PaymentMethodView=cj.views.AbstractView.extend({cashButton:null,balanceButton:null,_xmlOnline:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this.cashButton=new cj.views.Button({el:this.$el.find("#cash-button")});this.balanceButton=new cj.views.Button({el:this.$el.find("#balance-button")});},render:function(){this.clear();this.cashButton.on(cj.views.events.click,this.onCashButton,this);this.cashButton.render();if(cj.session.get("pin")=="666"){this.balanceButton.disable();}else{this.balanceButton.on(cj.views.events.click,this.onBalanceButton,this);}this.balanceButton.render();},onBalanceButton:function(){cj.session.set("payment_method","balance");this.trigger(cj.views.events.action,"balance");},onCashButton:function(){cj.session.set("payment_method","cash");this.performOnline();},performOnline:function(){var self=this;this.showPreloader();var o=cj.maratl.onlines;var context=banks.RequestContextGenerator.generate(cj.session.get("config"));cj.session.set("transaction_id",context.transaction_id);cj.session.set("comment",": "+context.bank_name);var req=new o.XMLRequest(o.PAYMENT(context));this._xmlOnline=new cj.maratl.onlines.XMLOnline(req,false);this._xmlOnline.on("timeout",function(){this.off();cj.statistics.append("E1");self.hidePreloader();self.showPopup({title:"!",message:"     .   "});});this._xmlOnline.on("response",function(e){this.off();self.hidePreloader();if(e.resultCode()!="0"){cj.statistics.append("E7");self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForCode(Number(e.resultCode()))});return;}var resCode=Number(e.find("payment").getAttribute("result-code"));if(resCode!=0){cj.statistics.append("E7");self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForCode(resCode)});return;}var status=Number(e.find("payment").getAttribute("status"));if(status>=100){cj.statistics.append("E7");self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForStatus(Number(e.resultCode()))});}else{cj.statistics.append("S7");self.trigger(cj.views.events.action,"cash");}});this._xmlOnline.start();},clear:function(){this.cashButton&&this.cashButton.off()&&this.cashButton.clear();this.balanceButton&&this.balanceButton.off()&&this.balanceButton.clear();},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this.cashButton){this.cashButton.destroy();this.cashButton=null;}if(this.balanceButton){this.balanceButton.destroy();this.balanceButton=null;}}});cj.views.CashPaymentView=cj.views.AbstractView.extend({_payment:null,_main:null,_provider:null,_comission:null,_change:null,_lowCashWarning:null,_commissionInfo:null,_failCount:3,_paymentInProcess:false,_minCashResult:0,_summ:0,_bankCommission:0,_minCash:0,_maxCash:0,_cashSumm:0,_terminalCommission:0,_account:0,_paySumm:0,_paySumm2:0,_commisSumm2:0,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);console.clear();this._summ=cj.session.get("summ");this._bankCommission=cj.commission.CommissionUtils.getCommisSumm(this._summ,[cj.commission.CommissionUtils.convert(cj.session.get("config").params)]);this._minCash=cj.round2(Number(this._summ)+Number(this._bankCommission));this._maxCash=Number(cj.session.get("max_pay_amount"));console.log("this._maxCash="+this._maxCash);this._account=cj.session.get("fields_account_formatted");var self=this;this._nextButton=options.nextButton;this._payment=new cj.maratl.payments.OneProvider(this._model.get("payment_options"));this._payment.on("validator:on",this.onValidatorOn,this);this._payment.on("validator:off",this.onValidatorOff,this);this._payment.on("validator:alert",this.onValidatorAlert,this);this._payment.on("validator:timeout",this.onValidatorTimeout,this);this._payment.on("validator:min_cash_result",this.onMinCashResult,this);this._payment.on("paysuccess",this.onPaySuccess,this);this._payment.on("receipt",this.onFiscalReceipt,this);this._payment.set("MinCashLimit",this._minCash);this._main=new cj.views.CashBlockView({el:this.$el.find("#main")});this._provider=new cj.views.CashBlockView({el:this.$el.find("#provider")});this._comission=new cj.views.CashBlockView({el:this.$el.find("#commission")});this._change=new cj.views.CashBlockView({el:this.$el.find("#change")});this._lowCashWarning=this.$el.find(".cash-warning");this._commissionInfo=new cj.views.CommissionInfoView({el:this.$el.find("#commission-info"),profiles:cj.session.get("commission_profiles")});cj.maratl.on("response",this.onCommissByPrvSumm,this);cj.timeout.off();cj.timeout.clickResetEnabled=false;cj.timeout.reset(150000);cj.timeout.on("timeout",function(){if(self._payment.isValidatorOn){self._payment.turnValidatorOff();}self.onValidatorTimeout(null);});},render:function(){this.clear();this._nextButton.on("click",this.onNextButton,this);this._main.label(" ");this._main.value("");this._main.comment("      1    15000 .");this._provider.label("   ");this._provider.value("");this._provider.comment("");this._comission.label("");this._comission.value("");this._comission.comment("");this._change.label("");this._change.value("");this._change.comment("");this._lowCashWarning.addClass("hidden");var params={};this._payment.start(params);},formatDate:function(d){var res=(d.getMonth()+1).toString()+"."+d.getFullYear();return res.length==6?("0"+res):res;},clear:function(){this.hidePreloader();this._nextButton.off("click",this.onNextButton,this);},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._payment){this._payment.destroy();}if(this._commissionInfo){this._commissionInfo.destroy();}},getOptions:function(options){var s="";for(var key in options){s+=key+"="+options[key]+"\r\n";}return s;},onCommissByPrvSumm:function(key,val){if(key=="CommisByPrvSumm"){var o=eval("("+val+")");var comm=cj.round2(Number(o.result));var change=cj.round2(this._minCashResult-this._minCash-comm);if(change<0){this._minCashResult=Number(this._minCashResult)+Math.ceil(Math.abs(change));}this._main.comment("      "+Number(this._minCashResult)+"    "+Number(this._maxCash)+" .");cj.maratl.off("response",this.onCommissByPrvSumm,this);}},onValidatorOn:function(options){if(options.ValOn=="false"){this.trigger("action","validator_error");return;}this._main.label(" ");this._main.value("<strong>0</strong> .");this._provider.label("   ");this._provider.value("<strong>0</strong> .");this._provider.comment("");this._lowCashWarning.find(".warning-text").html("   "+(Number(this._minCashResult)-Number(this._cashSumm))+" .");this._nextButton.show();},onValidatorOff:function(options){if(this._paymentInProcess){this._payment.createPay();}},onMinCashResult:function(value){this._minCashResult=Number(value.MinCashResult);this._main.comment("      "+Number(this._minCashResult)+"    "+Number(this._maxCash)+" .");cj.maratl.send("GetCommisByPrvSumm",'{"prvId":'+cj.session.get("PrvId")+',"summ":'+this._minCashResult+"}");},onValidatorAlert:function(options){cj.timeout.reset(150000);if(options.CashSumm&&Number(options.CashSumm>0)){this._cashSumm=Number(options.CashSumm);cj.session.set("payed_summ",this._cashSumm);this._main.value("<strong>"+(this._cashSumm)+"</strong> .");if(this._cashSumm<this._minCashResult){this._lowCashWarning.find(".warning-text").html("   "+(Number(this._minCashResult)-Number(this._cashSumm))+" .");}else{this._lowCashWarning.addClass("hidden");}}if(options.PaySumm){this._paySumm=Number(options.PaySumm);this._provider.value("<strong>"+(this._paySumm)+"</strong> .");}this._comission.label("");this._comission.value("<strong>0</strong> .");if((options.CommisSumm>0)&&(this._cashSumm>0)){this._terminalCommission=options.CommisSumm;this._comission.value("<strong>"+this._terminalCommission+"</strong> .");}if(options.CashSumm&&(Number(this._paySumm)-Number(this._minCash))>0){this._change.label("");this._change.comment("      Visa Qiwi Wallet  "+cj.session.get("phone"));var changeValue=Math.round((Number(this._paySumm)-Number(this._minCash))*100)/100;changeValue=changeValue.toString().replace(/(\d*?\.\d{2}).*/,"$1");this._change.value("<strong>"+changeValue+"</strong> .");}if(options.CashSumm){if((Number(this._paySumm)-Number(this._minCash))>=0){this.printTheBill();}else{this.printFailBill();}}},printFailBill:function(){var params={};params["_receipt_prt_top_msg"]="     Visa Qiwi Wallet.";this._payment.sendExtras(params);},printTheBill:function(){var params={};var paymentForText="<br>";paymentForText+="  ()<br>";paymentForText+="  2241<br>";paymentForText+=" : 001<br>";paymentForText+=": "+this._summ+" .<br>";paymentForText+=": "+this._bankCommission+" .<br>";params["_receipt_ "]=paymentForText;var acc_str=((cj.session.get("account_type")==ACC.CARD)?this._account.replace(/(\d{4})\d{8}(\d{4}).*/,"$1 **** **** $2"):this._account);var regionalBankText="<br>";regionalBankText+=acc_str+"<br>";regionalBankText+="          ()  <br>";params["_receipt_"+cj.session.get("config").shortName.toUpperCase()]=regionalBankText;var paymentsText="<br>";paymentsText+=": "+this._paySumm+" .<br>";paymentsText+=" : "+this._bankCommission+" .<br>";paymentsText+=": "+cj.round2(Number(this._paySumm)-Number(this._bankCommission))+" .<br>";params["_receipt_ "]=paymentsText;this._payment.sendExtras(params);},onPaySuccess:function(options){cj.session.set("sum_to_provider",this._paySumm.toString());cj.log.l("pay success");this.trigger("action",this._cashSumm>=this._minCashResult?"success":"fail");},onFiscalReceipt:function(options){if(options.FiscalReceipt.toLowerCase()=="wait"){cj.timeout.reset();this.showPreloader();}else{cj.session.set("fiscal_receipt",options.FiscalReceipt);}},onValidatorTimeout:function(options){var self=this;if(this._cashSumm==0){setTimeout(function(){self.trigger("action","validator_timeout");},100);}else{this._paymentInProcess=true;this._payment.createPay();}},onNextButton:function(){if(!this._nextButton.isVisible()){return;}if(this._cashSumm<this._minCashResult){if(this._failCount-->0){this.showWarning();return;}}if(this._cashSumm==0){if(this._payment.isValidatorOn){this._payment.turnValidatorOff();}this.trigger("action","zero_cash");}if(!this._paymentInProcess){this._paymentInProcess=true;this._payment.turnValidatorOff();}},showWarning:function(){this._lowCashWarning.removeClass("hidden");},update:function(){}});cj.views.BalancePaymentView=cj.views.AbstractView.extend({config:null,$warning:null,_nextButton:null,_failsCount:0,_balance:0,_summ:0,_minCash:0,_bankCommission:0,_xmlOnline:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this.config=cj.session.get("config");this._summ=Number(cj.session.get("summ"));this._bankCommission=cj.commission.CommissionUtils.getCommisSumm(this._summ,[cj.commission.CommissionUtils.convert(this.config.params)]);this._minCash=Number(this._summ)+Number(this._bankCommission);this._balance=Number(cj.session.get("balance"));this._nextButton=options.nextButton;this._nextButton.show();this.$warning=this.$el.find("#warning");if(!this.enoughMoney()){this.$warning.show();this.$el.find("#to-account").addClass("highlighted");this.$el.find("#to-account-description").hide();}},render:function(){this.clear();var self=this;this._nextButton.on(cj.views.events.click,self.onNextButton,this);this.balance(this._balance);this.toAccount(this._summ);this.commission(this._bankCommission);},enoughMoney:function(){return this._balance>=this._minCash;},warn:function(){var l=this.$el.find(".highlighted");l.removeClass("highlighted");setTimeout(function(){l.addClass("highlighted");},400);},onNextButton:function(){if(!this.enoughMoney()){if(this._failsCount++<3){this.warn();}else{this.trigger(cj.views.events.action,"insufficient");}}else{this.performOnline();}},performOnline:function(){var self=this;this.showPreloader();var o=cj.maratl.onlines;var context=banks.RequestContextGenerator.generate(this.config);var req=new o.XMLRequest(o.PAYMENT(context));this._xmlOnline=new cj.maratl.onlines.XMLOnline(req,false);this._xmlOnline.on("timeout",function(){this.off();cj.statistics.append("E1");self.hidePreloader();self.showPopup({title:"!",message:"     .   "});});this._xmlOnline.on("response",function(e){this.off();if(e.resultCode()!="0"){cj.statistics.append("E4");self.hidePreloader();self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForCode(Number(e.resultCode()))});return;}var resCode=Number(e.find("payment").getAttribute("result-code"));if(resCode!=0){cj.statistics.append("E4");self.hidePreloader();self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForCode(resCode)});return;}var status=Number(e.find("payment").getAttribute("status"));if(status>=100){cj.statistics.append("E4");self.hidePreloader();self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForStatus(Number(e.resultCode()))});}else{cj.statistics.append("S4");self.onSuccess();}});this._xmlOnline.start();},onSuccess:function(){var self=this;cj.maratl.sendRequest("AccNum="+cj.session.get("phone")+"&PrvId="+cj.session.get("PrvId")+"&PrvName="+cj.session.get("PrvName")+"&"+this.printTheBill()+"&PrintCheck=true");setTimeout(function(){self.hidePreloader();cj.session.set("payed_summ",(cj.round2(self._summ+self._bankCommission)).toString());self.trigger(cj.views.events.action,"enough");},500);},printTheBill:function(){var paymentForText="<br>";paymentForText+="  ()<br>";paymentForText+="  2241<br>";paymentForText+=" : 001<br>";paymentForText+=": "+this._summ+" .<br>";paymentForText+=": "+this._bankCommission+" .<br>";var acc_str=(cj.session.get("account_type")==ACC.CARD)?cj.session.get("fields_account").replace(/(\d{4})\d{8}(\d{4}).*/,"$1 **** **** $2"):cj.session.get("fields_account");var regionalBankText="<br>";regionalBankText+=acc_str+"<br>";regionalBankText+="          ()  <br>";return"_receipt_ ="+paymentForText+"&_receipt_"+this.config.shortName+"="+regionalBankText;},clear:function(){this._nextButton.off();},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this.$warning){this.$warning=null;}},balance:function(value){var $balance=this.$el.find("#balance .value");if(value||value==""){$balance.text(value);}return $balance.text();},toAccount:function(value){var $toAccount=this.$el.find("#to-account .value");if(value||value==""){$toAccount.text(value);}return $toAccount.text();},commission:function(value){var $commission=this.$el.find("#commission .value");if(value||value==""){$commission.text(value);}return $commission.text();}});cj.views.ComboView=cj.views.AbstractView.extend({_nextButton:null,_prevButton:null,_exitButton:null,_navGenerator:null,_currentPageInstance:null,_startParams:null,_config:null,_layoutManager:null,_xmlOnline:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._nextButton=options.nextButton;this._prevButton=options.prevButton;this._exitButton=options.exitButton;this._header=$("#header");this._config=cj.session.get("config");this._startParams=cj.session.get("startParams");this.buttonsOff();this.buttonsOn();if(this._startParams.operationType!=OP.NO){this.operationType(this._startParams.operationType);}if(this._config.params.accountType&&this._config.params.accountType!=ACC.NO){this.accountType(this._config.params.accountType);}this._navGenerator=new banks.NavGenerator(this._config,this._startParams);},buttonsOff:function(){this._nextButton.off();this._prevButton.off();},buttonsOn:function(){this._prevButton.on("click",this.prevPage,this);this._nextButton.on("click",this.nextPage,this);},prevPage:function(){if(this._navGenerator.hasPrev()){this._navGenerator.prev();this.render();}},nextPage:function(){var self=this;if(!this._layoutManager.validate()||!this._layoutManager.preValidate()){self.showPopup({title:"!",message:self._navGenerator.currentPage.errorMessage});return;}this._layoutManager.submit();if(this._navGenerator.hasNext()){this._navGenerator.next();this.render();}else{if(this._config.params.skipTemplateCheck==true){this.navigateNext();}else{this.performOnline();}}},performOnline:function(){var self=this;this.showPreloader();var o=cj.maratl.onlines;var context=banks.RequestContextGenerator.generate(this._config);var req=new o.XMLRequest(o.TEMPLATE(context));this._xmlOnline=new cj.maratl.onlines.XMLOnline(req,false);this._xmlOnline.on("timeout",function(){this.off();cj.statistics.append("E1");self.hidePreloader();self.showPopup({title:"!",message:"     .   "});});this._xmlOnline.on("response",function(e){var st,message="";this.off();self.hidePreloader();if(e.resultCode()!="0"){message=cj.maratl.onlines.getErrorForCode(Number(e.resultCode()));}else{if((st=e.find("acc").getAttribute("st"))!="1"){switch(st){case"0":message="    . ,    .";break;case"2":message="    .        .";break;case"3":message="   . ,   .";break;case"4":message=e.find("acc").getAttribute("msg");break;default:message=cj.maratl.onlines.getErrorForCode(Number(st));break;}}else{cj.statistics.append("S5");self.navigateNext();}}if(message){cj.statistics.append("E5");self.showPopup({title:"!",message:message});}});this._xmlOnline.start();},navigateNext:function(){if(cj.session.get("fav_to_change")){this.trigger(cj.views.events.action,"fav_change:submitted");}else{this.trigger(cj.views.events.action,"submitted");}},accountType:function(val){if(val||val==0||val==""){cj.session.set("account_type",val.toString());}return cj.session.get("account_type");},operationType:function(val){if(val||val==0||val==""){cj.session.set("oper_type",val.toString());}return cj.session.get("oper_type");},render:function(){var self=this;this.clear();var ph=$("#path-header");ph.html(this._config.longName);if(ph.height()>50){ph.css("font-size","24px");}ph.css("height","50px");this._nextButton.hide();this._navGenerator.currentPageIndex?this._prevButton.show():this._prevButton.hide();this._layoutManager=new banks.layouts.LayoutManager(this.$el.find("#ComboView"),this._navGenerator.currentPage,this._model);this._layoutManager.on("update",function(){this.preValidate()?self._nextButton.show():self._nextButton.hide();if(self._navGenerator.currentPage.layout=="Buttons"){self._nextButton.hide();}});this._layoutManager.on("next",function(){self.nextPage();});this._layoutManager.on("action",function(a){self.trigger("action",a);});cj.statistics.append(window.COREJS_APP_INSTANCE._current_page_code+"."+self._navGenerator.currentPage.order);this._layoutManager.render();this._header.html(this._navGenerator.currentPage.title);var l=this._header.html().length;if(l>32&&l<=50){this._header.css("font-size","40px");this._header.css("line-height","normal");this._header.css("height","55px");}else{if(l>50){this._header.css("font-size","40px");this._header.css("line-height","28px");this._header.css("height","55px");}else{this._header.css("font-size","50px");this._header.css("height","auto");this._header.css("line-height","normal");}}},clear:function(){if(this._layoutManager){this._layoutManager.off();this._layoutManager.destroy();this._layoutManager=null;}if(this._header){this._header.empty();}},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._nextButton){this._nextButton=null;}if(this._prevButton){this._prevButton=null;}if(this._exitButton){this._exitButton=null;}this._header.css("font-size","50px");this._header.css("height","auto");this._header.css("line-height","normal");}});cj.views.FinalView=cj.views.AbstractView.extend({initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);if(cj.session.get("payment_method")=="cash"){var v=cj.session.get("fiscal_receipt");if(v&&v.toLowerCase()=="false"){this.$el.find(".fiscal").removeClass("hidden");}}},render:function(){var fav;if(fav=cj.session.get("fav_to_change")){this.performOnline(fav.id);}else{if(cj.session.get("selected_fav")){}else{var fav_list=cj.session.get("favourites_list_"+cj.session.get("phone"));for(var i=0;i<fav_list.length;i++){if(cj.session.get("account_type")==fav_list[i].extras.account_type&&cj.session.get("fields_account")==fav_list[i].account){return;}}this.performOnline(0);}}},performOnline:function(id){var o=cj.maratl.onlines;var context=banks.RequestContextGenerator.generate(cj.session.get("config"));context.fav_id=id.toString()||"0";var req=new o.XMLRequest(o.SAVE_PAYMENT(context));this._xmlOnline=new cj.maratl.onlines.XMLOnline(req,false);this._xmlOnline.start();}});cj.views.CalculatorView=cj.views.AbstractView.extend({_numpad:null,_rubField:null,_kopField:null,_backspaceButton:null,_toInsert:null,_systemCommission:null,_addCommission:null,_change:null,_minCash:0,_terminalCommission:0,_summWithBank:0,_okButton:null,_flag:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);},render:function(){this.clear();var self=this;this._numpad=new cj.views.Numpad({el:this.$el.find(".numpad")});this._numpad.on(cj.views.events.click,this.onNumpad,this);this._numpad.render();this._rubField=new cj.views.TextField({el:this.$el.find("#rub-input"),maxChars:5});this._rubField.on("click",this.onRubFieldClick,this);cj.views.mixins.CombinedTextField.apply(this._rubField);this._rubField.render();this._kopField=new cj.views.TextField({el:this.$el.find("#kop-input"),maxChars:2});this._kopField.on("click",this.onKopFieldClick,this);cj.views.mixins.CombinedTextField.apply(this._kopField);this._kopField.render();this.setActiveField(this._rubField);var summ=cj.session.get("calc-summ");if(summ){var rub=parseInt(summ);var kop=summ.toString().replace(/\d*.(\d*)/,"$1");setTimeout(function(){self._rubField.appendText(rub);self._kopField.appendText(kop);self.update();},200);}this._backspaceButton=new cj.views.Button({el:this.$el.find("#calc-backspace")});this._backspaceButton.on(cj.views.events.click,this.onErase,this);this._backspaceButton.render();this._toInsert=new cj.views.TextField({el:this.$el.find("#to-insert")});cj.views.mixins.CombinedTextField.apply(this._toInsert);this._toInsert.appendText("0");this._systemCommission=new cj.views.TextField({el:this.$el.find("#sys-commission")});cj.views.mixins.CombinedTextField.apply(this._systemCommission);this._systemCommission.appendText("0");this._addCommission=new cj.views.TextField({el:this.$el.find("#add-commission")});cj.views.mixins.CombinedTextField.apply(this._addCommission);this._addCommission.appendText("0");this._change=new cj.views.TextField({el:this.$el.find("#change")});cj.views.mixins.CombinedTextField.apply(this._change);this._change.appendText("0");(this._okButton=new cj.views.Button({el:this.$el.find("#calc-ok-button")})).render();this._okButton.on(cj.views.events.click,this.onClose,this);cj.maratl.on(cj.maratl.events.response,this.onMaratlResponse,this);},onClose:function(){this.trigger(cj.views.events.action,"close");},onNumpad:function(code){this._activeField.appendText(code.toString());this.update();},onRubFieldClick:function(){if(this._activeField!=this._rubField){this.setActiveField(this._rubField);}},onKopFieldClick:function(){if(this._activeField!=this._kopField){this.setActiveField(this._kopField);}},onErase:function(){this._activeField.erase();this.update();},clear:function(){if(this._backspaceButton){this._backspaceButton.off();this._backspaceButton.clear();}if(this._numpad){this._numpad.off();this._numpad.clear();}if(this._kopField){this._kopField.off();this._kopField.clear();}if(this._rubField){this._rubField.off();this._rubField.clear();}if(this._okButton){this._okButton.off();this._okButton.clear();}cj.maratl.off(cj.maratl.events.response,this.onMaratlResponse,this);},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._backspaceButton){this._backspaceButton.destroy();this._backspaceButton=null;}if(this._numpad){this._numpad.destroy();this._numpad=null;}if(this._kopField){this._kopField.destroy();this._kopField=null;}if(this._rubField){this._rubField.destroy();this._rubField=null;}if(this._okButton){this._okButton.destroy();this._okButton=null;}},setActiveField:function(field){this._activeField=field;this._activeField.enable();if(this._activeField==this._rubField){this._kopField.disable();}else{this._rubField.disable();}},getSumm:function(){return parseFloat(this._rubField.text()+"."+this._kopField.text())||0;},onMaratlResponse:function(key,value){if(key=="MinCashResult"){this._minCash=cj.round2(Number(value));cj.maratl.send("GetCommisByPrvSumm",'{"prvId":'+cj.session.get("PrvId")+',"summ":'+this._minCash+"}");}if(key=="CommisByPrvSumm"){var o=eval("("+value+")");this._terminalCommission=cj.round2(Number(o.result));this._addCommission.text(this._terminalCommission.toString());this._toInsert.text(this._minCash.toString());var change=cj.round2(this._minCash-this._summWithBank-this._terminalCommission);if(change<0){this.recalc();}this._change.text(change.toString());}},recalc:function(){this._minCash++;cj.maratl.send("GetCommisByPrvSumm",'{"prvId":'+cj.session.get("PrvId")+',"summ":'+this._minCash+"}");},update:function(){var cur_summ=this.getSumm();cj.session.set("calc-summ",cur_summ);if(cur_summ<=0){this._terminalCommission=0;this._summWithBank=0;this._minCash=0;this._systemCommission.text("0");this._addCommission.text("0");this._toInsert.text("0");this._change.text("0");return;}var commission=cj.commission.CommissionUtils.getCommisSumm(this.getSumm(),[cj.commission.CommissionUtils.convert(cj.session.get("config").params)]);commission=cj.round2(commission);this._systemCommission.text(commission.toString());this._summWithBank=cj.round2(Number(this.getSumm())+Number(commission));cj.maratl.send("GetMinCash",this._summWithBank.toString());}});cj.views.FavouritesView=cj.views.AbstractView.extend({_leftButton:null,_rightButton:null,_current:0,_total:0,_pages:null,_buttons:null,_rg:null,$container:null,$content:null,_xmlOnline:null,_favourites:null,_nextButton:null,initialize:function(options){cj.views.AbstractView.prototype.initialize.call(this,options);this._leftButton=new cj.views.Button({el:this.$el.find("#left-button")});this._rightButton=new cj.views.Button({el:this.$el.find("#right-button")});this.$container=this.$el.find("#favourites-container");this.$content=this.$el.find("#favourites-content");(this._nextButton=options.nextButton).hide();this._nextButton.off();banks.clearFields();},render:function(){this.clear();if(!(this._favourites=cj.session.get("favourites_list_"+cj.session.get("phone")))){this.performOnline();}else{this.onFavsLoaded();}this._leftButton.render();this._leftButton.on(cj.views.events.click,this.prev,this);this._rightButton.render();this._rightButton.on(cj.views.events.click,this.next,this);this._nextButton.on("click",this.onNextButton,this);},onNextButton:function(){var fav=cj.session.get("selected_fav");this.fillSessionFromFav(fav);this.trigger("action","next");},onFavsLoaded:function(){if(!this._favourites.length){this.showNoFavsPopup();return;}$("#comment").html(OP_NAME[cj.session.get("startParams").operationType]);for(var i=0;i<this._favourites.length;i++){this.addFav(this._favourites[i]);}this.renderFavs();this._total=this._pages.length;this.showPage(0);},showNoFavsPopup:function(){this.showPopup({title:"!",message:"   ",closeButtonCallback:function(){this.trigger("action","no_favs");}});},performOnline:function(){var self=this;this.showPreloader();var o=cj.maratl.onlines;var context=banks.RequestContextGenerator.generate(cj.session.get("config"));var req=new o.XMLRequest(o.FAVOURITES_LIST(context));this._xmlOnline=new cj.maratl.onlines.XMLOnline(req,false);this._xmlOnline.on("timeout",function(){this.off();cj.statistics.append("E1");self.hidePreloader();self.showPopup({title:"!",message:"     .   "});});this._xmlOnline.on("response",function(e){this.off();self.hidePreloader();switch(e.resultCode()){case"0":cj.statistics.append("S6");self._favourites=banks.parseFavourites(e);if(self._favourites){cj.session.set("favourites_list_"+cj.session.get("phone"),self._favourites);}if(!self._favourites||!self._favourites.length){self.showNoFavsPopup();return;}self.onFavsLoaded();return;default:cj.statistics.append("E6");self.showPopup({title:"!",message:cj.maratl.onlines.getErrorForCode(Number(e.resultCode())),closeButtonCallback:function(){cj.session.set("go_to_favourites",true);self.trigger("online_error");}});return;}});this._xmlOnline.start();},addFav:function(fav){if(!this._pages){this._pages=[];}if(!this._pages.length||_.last(this._pages).elements.length==4){this._pages.push({elements:[]});}_.last(this._pages).elements.push(fav);},renderFavs:function(){this._buttons=[];for(var i=0;i<this._pages.length;i++){var page=$('<div class="page"></div>');for(var j=0;j<this._pages[i].elements.length;j++){var typeId=this._pages[i].elements[j].extras["account_type"];var type=["","C",""][Number(typeId)-1];var id=(i*4+j+1);var acc_str=(typeId==ACC.CARD)?this._pages[i].elements[j].account.replace(/(\d{4})\d{8}(\d{4}).*/,"$1 **** **** $2"):this._pages[i].elements[j].account;var s=$('<div class="element"><div id="acc-radio-'+id+'" data-code="'+id+'" class="gray-button-big"><div class="button-ico"></div><div class="button-content">'+type+" :<br/><strong>"+acc_str+'</strong></div></div><div id="change-button-'+id+'"><div class="button-ico"><img src="../img/ui/corejs/icons/change.jpg"/>'+'</div><div class="button-content"></div></div></div>');var b=new cj.views.Button({el:s.find("#change-button-"+id),isSlow:true});b.render();b.code(id.toString());b.on("click",this.onChangeClick,this);this._buttons.push(b);page.append(s);}this.$content.append(page);}this._rg=new cj.views.RadioGroupView({el:this.$content,elements:this.$content.find("div[id|='acc-radio']"),toggleClass:"pressed"});this._rg.render();this._rg.on("change",this.onRGChange,this);},onRGChange:function(index,code){cj.session.set("selected_fav",this._favourites[index]);this._nextButton.show();},fillSessionFromFav:function(fav){for(var key in fav.extras){if(key=="account_type"||key=="oper_type"){cj.session.set(key,fav.extras[key]);}}cj.session.set("fields_account",fav.account);cj.session.set("fields_account_formatted",this.format("account",fav.account));cj.session.set("summ",fav.amount);for(var key in fav.extras){if(key!="account_type"&&key!="oper_type"){cj.session.set("fields_"+key,fav.extras[key]);cj.session.set("fields_"+key+"_formatted",this.format(key,fav.extras[key]));}if(key=="bdate"){cj.session.set("fields_bdate",fav.extras[key].replace(/\./g,""));}}},format:function(name,val){switch(name){case"account":var accType=cj.session.get("account_type");try{var mask=_.findWhere(cj.session.get("config").pages[accType],{fieldName:"account"}).mask;return cj.Masker.format(val,mask);}catch(ex){return val;}case"exp_date":return val.substr(0,2)+"."+val.substr(2);default:return val;}},onChangeClick:function(code){var index=Number(code)-1;var fav=this._favourites[index];cj.session.remove("selected_fav");cj.session.set("fav_to_change",fav);this.fillSessionFromFav(fav);cj.session.set("combo_page","fav_change");this.trigger("action","fav_change");},clear:function(){if(this._rg){this._rg.off();this._rg.clear();}_.each(this._buttons,function(b){b.off();b.clear();});if(this._leftButton){this._leftButton.off();this._leftButton.clear();}if(this._rightButton){this._rightButton.off();this._rightButton.clear();}},destroy:function(){cj.views.AbstractView.prototype.destroy.call(this);if(this._rg){this._rg.destroy();this._rg=null;}_.each(this._buttons,function(b){b.destroy();});this._buttons&&(this._buttons=null);if(this._leftButton){this._leftButton.destroy();this._leftButton=null;}if(this._rightButton){this._rightButton.destroy();this._rightButton=null;}this.$content&&(this.$content=null);this.$container&&(this.$container=null);},prev:function(){if(this._current-1>=0){this.showPage(this._current-1);}},next:function(){if(this._current+1<this._total){this.showPage(this._current+1);}},showPage:function(number){this._current=number;this.$content.animate({marginLeft:(-number*1000).toString()});number?this._leftButton.enable():this._leftButton.disable();(number==this._total-1)?this._rightButton.disable():this._rightButton.enable();}});var pages_cache={};var Page=Backbone.Model.extend({defaults:{header:"",path:"",id:"",file_name:"",template_name:"",container_class:"",prev_page:"none",next_page:"none",exit_page:"stat",content:"",type:"content"},fetch:function(){var mod=this;if(mod.get("type")=="content"){$.ajax({url:"pages/"+mod.id+".html",dataType:"html",data:{}}).done(function(data){mod.set({"content":data,"loaded":true});});}},initialize:function(){this.set("loaded",false);this.fetch();}});var AppView=Backbone.View.extend({el:$("#content-wrapper"),$wrapper:$("#wrapper"),$header:$("#header"),$path:$("#path-header"),$comment:$("#comment"),$popup:null,$popupButtons:null,$popupLightbox:$("#popup-lightbox"),$preloader:null,_current_view:null,initialize:function(){(this.exit=new cj.views.Button({el:$("#exit"),isSlow:true})).render();(this.prev=new cj.views.Button({el:$("#prev"),isSlow:true})).render();(this.next=new cj.views.Button({el:$("#next"),isSlow:true})).render();this.setButtonEvents();$("#version").html(cj.APP_VERSION);},addHeaders:function(){var h=this.model.get("header");if(h){this.$header.html(h);}var p=this.model.get("path");if(p){this.$path.html(p);}var c=this.model.get("comment");if(c){this.$comment.html(c);}},setButtonEvents:function(){this.prev.off();this.next.off();this.exit.off();this.prev.on(cj.views.events.click,function(page){if(this.model.get("prev_page")!="none"){this.trigger(cj.events.change,page);}},this);this.next.on(cj.views.events.click,function(page){if(this.model.get("next_page")!="none"){this.trigger(cj.events.change,page);}},this);this.exit.on(cj.views.events.click,function(page){this.trigger(cj.events.change,page);},this);},updateNavButton:function(button,property){if(this.model.get(property)!="none"){button.show();if(this.model.get(property)=="last"){button.code(cj.session.get("last_page"));}else{button.code(this.model.get(property));}}else{button.hide();}},updateClasses:function(){if(this.model.get("container_class")){this.$el.addClass(this.model.get("container_class"));}if(this.model.get("wrapper_class")){this.$wrapper.addClass(this.model.get("wrapper_class"));}},applyView:function(){if(this.model.get("class")){this._current_view=new cj.views[this.model.get("class")]({el:this.$el,model:this.model,nextButton:this.next,prevButton:this.prev,exitButton:this.exit});this._current_view.on(cj.views.events.action,this.onAction,this);this._current_view.on(cj.views.events.popup,this.popupAction,this);this._current_view.on(cj.views.events.preloader,this.preloaderAction,this);this._current_view.render();}},onAction:function(action,data){if(action=="submitted"){for(var key in data){cj.session.set(key,data[key]);}}var events=this.model.get("nav_events");if(events&&events[action]){this.trigger(cj.events.change,events[action]);}},popupAction:function(data){switch(data.state){case"show":this.showPopup(data);break;case"hide":this.hidePopup(data);}},preloaderAction:function(data){switch(data.state){case"show":this.showPreloader(data);break;case"stop":this.stopPreloader(data);break;case"hide":this.hidePreloader(data);}},showPopup:function(popupOptions){var self=this;var name=popupOptions.content?"#popup-"+popupOptions.content:"#default-popup";if(this.$popup=$(name)){this.$popup.find(".title").text(popupOptions.title||"");this.$popup.find(".message").text(popupOptions.message||"");this.$popupButtons=[];var $b;if($b=this.$popup.find(name+"-close-button")){var b=new cj.views.Button({el:$b});b.on(cj.views.events.click,self.hidePopup,self).render();b.content(popupOptions.closeButtonText||"");if(popupOptions.closeButtonCallback){b.on(cj.views.events.click,popupOptions.closeButtonCallback,popupOptions.context);}this.$popupButtons.push(b);}_(popupOptions.buttons).each(function(value,key){if($b=self.$popup.find(name+"-"+key+"-button")){var b=new cj.views.Button({el:$b});b.on(cj.views.events.click,popupOptions.context[value],popupOptions.context).render();self.$popupButtons.push(b);}});this.$popup.show();this.$popupLightbox.show();}},hidePopup:function(popupOptions){if(this.$popup){this.$popup.hide();this.$popupLightbox.hide();_(this.$popupButtons).each(function(b){b.off();b.destroy();});this.$popupButtons=null;}},showPreloader:function(options){var name=options.content?"#preloader-"+options.content:"#default-preloader";if(this.$preloader=$(name)){(this.$preloader=new cj.views.PreloaderView({el:this.$preloader,text:options.text})).render();this.$preloader.show();}},hidePreloader:function(options){if(this.$preloader){this.$preloader.stop();this.$preloader.hide();this.$preloader.destroy();this.$preloader=null;}},stopPreloader:function(options){if(this.$preloader){this.$preloader.stop();}},render:function(){this.clear();var self=this;if(!this.model.get("loaded")){return this;}this.addHeaders();this.updateNavButton(this.prev,"prev_page");this.updateNavButton(this.next,"next_page");this.updateNavButton(this.exit,"exit_page");this.setButtonEvents();this.updateClasses();this.$el.html(this.model.get("content"));cj.timeout.off();cj.timeout.reset(this.model.get("timeout"));cj.timeout.clickResetEnabled=true;cj.timeout.on(cj.timeout.events.timeout,function(){cj.session.set("timeout_exit","true");self.trigger(cj.events.change,cj.TIMEOUT_PAGE);});this.applyView();return this;},clear:function(){this.$el.empty();this.$el.removeClass();this.$wrapper.removeClass();if(this._current_view){this._current_view.destroy();this._current_view.off();this._current_view=null;}},destroy:function(){this.clear();this.next.off();this.next.destroy();this.prev.off();this.prev.destroy();this.exit.off();this.exit.destroy();this.$preloader.off();this.$preloader.destroy();this.$el=null;},setModel:function(model){if(this.model){this.model.off();}this.model=model;this.listenToModelChange();},listenToModelChange:function(){this.model.on(cj.events.change,this.render,this);}});var App=Backbone.Router.extend({_appView:null,_pages:null,_current_page_code:"",_current_page_content:"",_start_page:"1",initialize:function(options){var t=this;var flag=false;var script=document.getElementById("app-config");var closure=function(){if(flag==true){return;}flag=true;cj.APP_VERSION=APP_CONFIG.options.version;cj.APP_VERSION_SHORT=APP_CONFIG.options.shortVersion;cj.TIMEOUT_PAGE=APP_CONFIG.options.timeout_page;cj.LOG_ENABLED=APP_CONFIG.options.log=="true";cj.USE_JS_SESSION=APP_CONFIG.options.single_page_app=="true";if(APP_CONFIG.options.test_mode=="true"){cj.maratl.TEST_MODE_ON();}if(APP_CONFIG.options.start_page){t._start_page=APP_CONFIG.options.start_page;}for(var prop in APP_CONFIG.session){cj.session.set(prop,APP_CONFIG.session[prop]);}t._pages=APP_CONFIG.pages;for(var ch in t._pages){t._pages[ch].id=ch;}t._appView=new AppView();t._appView.on(cj.events.change,function(page){t.page.apply(t,[page]);});t.microsite();};script.onreadystatechange=function(){if((this.readyState=="complete"||this.readyState=="loaded")){closure();}};script.onload=closure;script.src="config.js";script=null;},microsite:function(){this.page(this._start_page);},page:function(code){if(this._pages[code]){if(this._current_page_code&&this._pages[this._current_page_code].prev_target=="true"){cj.session.set("last_page",this._current_page_code);}this._current_page_code=code;this.renderView();}else{this.destroy();document.location=code;}},destroy:function(){if(this._appView){this._appView.destroy();this._appView.off();this._appView=null;}cj.maratl.off();cj.timeout.off();},renderView:function(){var code=this._current_page_code;cj.statistics.append(code);this._current_page_content=pages_cache[code]||(pages_cache[code]=new Page(this.getOptions(code)));this._appView.setModel(this._current_page_content);this._appView.render();},getOptions:function(code){return this._pages[code];}});if(!window.console){window.console={log:function(value){cj.log.l(value);},clear:function(){cj.log.clear();},show:function(){cj.log.show();},hide:function(){cj.log.hide();}};}else{window.console.clear=function(){cj.log.clear();};}